# Schema-Based Testing

Wallarm's Schema-Based Testing is designed to perform dynamic security testing of your applications and APIs to identify a wide range of vulnerabilities - including those outlined in both the OWASP Top 10 and the OWASP API Security Top 10 - through comprehensive, automated tests.

Schema-Based Testing capabilities:

* Deep, dynamic analysis of API endpoints.
* Detection of vulnerabilities in the application or API itself, as well as security misconfigurations in the underlying infrastructure or environment.
* Visualization of found issues in the Wallarm Console's [**Security Issues**](../../api-attack-surface/security-issues.md) section.
* Lightweight execution via Docker container.

![Schema-Based Testing - test runs](../../images/vulnerability-detection/sbt-test-runs.png)

## How it works

Use Schema-Based Testing by fulfilling the following steps:

1. **Create test policy**: specify the target application, provide its OpenAPI specification or Postman collection, base URL, and select the tests to run.
1. **Copy Docker command**: find your test policy on the **Test policies** tab, click it, and copy the provided Docker command.
1. **Run and monitor**: start the agent with the command. Track progress and view results on the **Test runs** tab.

![Schema-Based Testing - how it works](../../images/vulnerability-detection/sbt-diagram.png)

## Test basis

API Test Patrol can base its tests on:

* **OpenAPI specification (OAS)** - precise and machine-readable blueprint of your API allows API Test Patrol to build efficient and reliable test suite for your application.
* **Postman collection** - if you use the [**Postman**](https://www.postman.com/) API design platform, the **functional tests** from its [*collections*](https://www.postman.com/product/collections/) may be used by API Test Patrol to build security tests alongside. See [details](setup.md#postman-collection-based).

## Test types

For OpenAPI specification-based tests, Schema-Based Testing uses three types of tests to detect security issues:

* **Environment misconfiguration tests** check for vulnerabilities and misconfigurations in the environment or infrastructure the application and APIs run on (not the API logic). Examples:

    * Exposed source code, backups, configuration files.
    * Accessible `.git`, `.env`, or system files.
    * Insecure web server settings (e.g., directory listing, weak TLS).

* **Input parameter tests** check each input point (parameters, headers, etc.) defined in the OpenAPI specification for application-level vulnerabilities. Covered vulnerabilities:

    * Command injection
    * CRLF injection
    * LFI / RFI
    * NoSQL injection
    * Open redirect
    * Path traversal
    * Remote code execution (RCE)
    * SQL injection
    * SSRF
    * SSTI
    * XSS
    * XXE
    * Infoleak

## Enabling and setup

To start using Schema-Based Testing, enable and configure it as described in [Schema-Based Testing Setup](setup.md).
