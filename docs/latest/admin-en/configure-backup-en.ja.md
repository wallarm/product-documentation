# フェイルオーバーメソッドの設定

フィルターノードを[リバースプロキシ](../glossary-en.ja.md#reverse-proxy)としてデプロイするには、フィルターノードが高可用性である必要があります。例えば、停電によるフィルターノードの故障は、Webアプリケーションの動作に制約をもたらします。Wallarmの高可用性を確保するために、このセクションで説明するフェイルオーバー手法のいずれかを使用することをお勧めします。

フェイルオーバー手法は、メインのフィルターノードが故障した場合にトラフィックが自動的に転送される追加のノードを導入します。

## データセンターのフェイルオーバー

Webアプリケーションとフィルターノードがデータセンターにある場合は、データセンターの「フェイルオーバーIP」サービスを使用してください。

## VRRPまたはCARP

各フィルターノードで`keepalived`または`ucarp`デーモンを起動し、ノードの可用性を監視し、ノードがダウンした場合にトラフィックの転送を開始します。これは、DNSバランシングでトラフィックを分散させることでトラフィックの負荷分散にも使用できる標準的な高可用性手法です。

!!! info "NGINX Plusとの連携"
    Wallarmは、[NGINX Plus](https://www.nginx.com/products/nginx/)にカスタムVRRPラッパーを使用して設定できます。

    CentOSやDebianなどのほとんどのLinuxディストリビューションには、このビルドをインストールできるカスタムパッケージが用意されています。

    WallarmとNGINX Plusのインストールについては、「[«NGINX Plusとのインストール»](../installation/nginx-plus.ja.md)」ページに記載されている詳細な手順を参照してください。

## ハードウェアL3またはL4ロードバランサー

レイヤー3またはレイヤー4のロードバランサーは、高可用性ソリューションとして適切です。

## DNSロードバランシング

DNS設定で複数のIPアドレスを指定します。この方法は負荷分散を目的としていますが、高可用性手法としても役立つかもしれません。