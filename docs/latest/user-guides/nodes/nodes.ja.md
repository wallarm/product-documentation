# Wallarmノード

Wallarm Console UIの**ノード**セクションでは、**Wallarmノード**と[**CDNノード**](cdn-node.md)タイプのノードを管理できます。この記事では、Wallarmノードについて説明します。

Wallarmノードモジュールは、Wallarmが悪意のあるトラフィックを軽減するために、顧客の環境にデプロイされるべきです。Wallarmノードは、悪意のあるリクエストを軽減しながら、正当なリクエストを保護対象のリソースに転送するプロキシとして機能します。

WallarmノードのUI管理オプション：

* 新しいノードを作成する
* インストールされたノードのプロパティとメトリックを表示する
* ノードトークンを再生成する
* ノードの名前を変更する
* ノードを削除する

![!ノード](../../images/user-guides/nodes/table-nodes.png)

!!! info "管理者アクセス"
    Wallarmノード/トークンの作成、削除、再生成は、**管理者**ロールを持つユーザーのみが利用できます。インストール済みノードの詳細の表示は、すべてのユーザーが利用できます。

!!! warning "通常とクラウドノードの種類"
    バージョン4.0のリリース前では、Wallarmノードは通常タイプまたはクラウドタイプのいずれかである可能性がありました。新しいリリースから、[通常タイプが非推奨となり、クラウドタイプが**Wallarmノード**に改名されました](/4.0/updating-migrating/what-is-new/#unified-registration-of-nodes-in-the-wallarm-cloud-by-tokens)。

    **Wallarmノード**は、[すべてのサポートされている環境](../../installation/supported-deployment-options.md)で登録および設定を統一されたアプローチを利用します。

## ノードの作成

Wallarmノードを作成するには：

1. [USクラウド](https://us1.my.wallarm.com/nodes) または [EUクラウド](https://my.wallarm.com/nodes) のWallarm Console → **ノード**を開き、**Wallarmノード**タイプのノードを作成します。

    ![!Wallarmノード作成](../../images/user-guides/nodes/create-cloud-node.png)

    !!! info "マルチテナントオプション"
        **マルチテナント**オプションでは、Wallarmを使用して、複数の独立した会社のインフラストラクチャや隔離された環境を同時に保護できます。[詳細を読む](../../installation/multi-tenant/overview.md)

        ノードを作成時や既存のノードのメニューから、マルチテナントモードに切り替えることができます。
1. 生成されたトークンをコピーします。
1. 生成されたトークンを使用して、作成したノードを [好適な環境](../../installation/supported-deployment-options.md)にデプロイします。

## ノードの詳細を表示する

インストールされたフィルタリングノードの詳細は、各フィルタリングノードのテーブルとカードに表示されます。カードを開くには、適切なテーブルレコードをクリックしてください。

次のノードのプロパティとメトリックが利用可能です：

* ノード作成時に与えられたノード名
* 1秒あたりの平均リクエスト数（RPS）
* ノードのIPアドレス
* ユニークなノード識別子（UUID）
* Wallarmノードのトークン
* フィルタリングノードとWallarmクラウドとの最後の同期時間
* フィルタリングノード作成日
* その月のノードによって処理されたリクエスト数
* 使用されているLOMとproton.dbのバージョン
* インストールされたWallarmパッケージ、NGINX、Envoy（ある場合）のバージョン

![!ノードカード](../../images/user-guides/nodes/view-wallarm-node.png)

Wallarmノードが複数のインスタンス（例えば、初期トラフィック処理と異なるサーバーインスタンスで実行されるリクエストポストアナリティクス）にインストールされている場合、対応するフィルタリングノードの数がテーブル内の1つのレコードにグループ化されます。各インスタンスに対し、プロパティとメトリックが利用可能です。

Wallarmでは、ノードインスタンスは`hostname_NodeUUID`という名前で呼ばれます。ただし、：

* `hostname`は、ノードインスタンスが起動されているワーキングマシンの名前です。
* `NodeUUID`は、ユニークなノード識別子（UUID）です。

`register-node`スクリプト内で、`-n`パラメータを使用して`hostname`を手動で設定できます。

## ノードトークンの再生成

トークンの再生成は、ノードに新しいトークンを作成します。

1. Wallarm Console → **ノード**を開きます。
2. ノードメニューやノードカードの**トークンを再生成**をクリックします。
3. ノードが既にインフラにインストールされている場合は、新しいトークン値をコピーし、インストール済みのノード設定内で指定します。

![!ノードトークンの再生成](../../images/user-guides/nodes/generate-new-token.png)

## ノードの削除

ノードを削除すると、アプリケーションへのリクエストのフィルタリングが停止します。フィルタリングノードの削除は取り消すことができません。ノードはノードリストから永久に削除されます。

1. Wallarm Console → **ノード**を開きます。
2. 1つもしくは複数のノードを選択し、**削除**をクリックします。また、ノードメニューやノードカードのボタンを選択して、フィルタリングノードを削除することもできます。
3. アクションを確認します。