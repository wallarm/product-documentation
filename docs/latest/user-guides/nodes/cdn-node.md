[cdn-node-operation-scheme]:        ../../images/waf-installation/quickstart/cdn-node-scheme.png
[data-to-wallarm-cloud-docs]:       ../rules/sensitive-data-rule.md
[operation-modes-docs]:             ../../admin-en/configure-wallarm-mode.md
[operation-mode-rule-docs]:         ../../admin-en/configure-wallarm-mode.md#setting-up-endpoint-targeted-filtration-rules-in-wallarm-console
[wallarm-cloud-docs]:               ../../about-wallarm/overview.md#cloud
[cdn-node-creation-modal]:          ../../images/waf-installation/quickstart/cdn-node-creation-modal.png
[cname-required-modal]:             ../../images/waf-installation/quickstart/cname-required-modal.png
[attacks-in-ui]:                    ../../images/admin-guides/test-attacks-quickstart.png
[user-roles-docs]:                  ../settings/users.md
[update-origin-ip-docs]:            #updating-the-origin-address-of-the-protected-resource
[rules-docs]:                       ../rules/rules.md
[ip-lists-docs]:                    ../ip-lists/overview.md
[integration-docs]:                 ../settings/integrations/integrations-intro.md
[trigger-docs]:                     ../triggers/triggers.md
[application-docs]:                 ../settings/applications.md
[events-docs]:                      ../events/check-attack.md
[graylist-populating-docs]:         ../ip-lists/overview.md#managing-graylist
[link-app-conf]:                    ../settings/applications.md
[using-varnish-cache]:              #using-varnish-cache

# CDN filtering nodes

The **Nodes** section of the Wallarm Console UI allows you to manage the nodes of the [**Wallarm node**](nodes.md) and **CDN node** types. This article is about CDN nodes.

!!! info "CDN nodes under Free tier"
    Deployment of the CDN node type is not supported under the [Free tier plan](../../about-wallarm/subscription-plans.md#free-tier-subscription-plan-us-cloud).

--8<-- "../include/waf/installation/cdn-node/how-cdn-node-works.md"

## Creating a node

To create the CDN node, please follow the [instructions](../../installation/cdn-node.md).

## Viewing details of a node

The details of the installed node are displayed in the table and card of each node. To open the card, click the appropriate table record.

The following node properties and metrics are available:

* Node name generated based on the protected domain's name
* Node IP address
* Origin address associated with the protected domain
* Unique node identifier (UUID)
* Node status
* SSL/TLS certificate: Let's Encrypt generated by Wallarm or the custom one
* Time of the last synchronization of the filtering node and Wallarm Cloud
* Date of the filtering node creation
* Number of requests processed by the node in the current month
* Versions of used custom_ruleset and proton.db
* Versions of installed Wallarm packages
* Indicator of available component updates

![CDN node card](../../images/user-guides/nodes/view-cdn-node-comp-vers.png)

## Updating the origin address of the protected resourse

If your hosting provider dynamically updates the origin IP address or domain associated with the protected resource, please keep the origin address specified in the CDN node configuration up to date. Otherwise, requests will not reach the protected resource since the CDN node will try to proxy them to an incorrect origin address.

To update the origin address, use the **Edit origin address** option.

## Uploading the custom SSL/TLS certificate

Wallarm automatically issues the [Let's Encrypt](https://letsencrypt.org/) certificate enabling HTTPS on the CDN node domain. Certificates are generated and renewed automatically as needed.

If you already have a certificate for the protected domain and prefer that to the Let's Encrypt certificate, you can upload your own using the **Update SSL/TLS certificate** option.

## Using Varnish Cache

Utilizing a CDN node with the [Varnish Cache](https://varnish-cache.org/intro/index.html#intro) HTTP accelerator speeds up content delivery to users (e.g. your server responses). However if you change your content, the cached copy on the CDN may be updated with a delay, which may cause [problems](#why-is-there-a-delay-in-the-update-of-the-content-protected-by-the-cdn-node) and be the reason to disable Varnish Cache.

To avoid problems with the content update speed, Varnish Cache is disabled by default. You can enable/disable Varnish Cache manually. To do so, proceed to **Nodes** → CDN node menu → **Enable Varnish Cache** or **Disable Varnish Cache**.

## Deleting a node

When the filtering node is deleted, the filtration of requests to your domain will be stopped. The deleting of the filtering node cannot be undone. The Wallarm node will be deleted from the list of nodes permanently.

1. Delete the Wallarm CNAME record from the DNS records of the protected domain.

    !!! warning "Malicious request mitigation will be stopped"
        Once the CNAME record is removed and changes take effect on the Internet, the Wallarm CDN node will stop request proxying, and legitimate and malicious traffic will go directly to the protected resource.

        It results in the risk of the protected server vulnerability exploitation when deleted DNS record took effect but the CNAME record generated for the new node version did not take effect yet.
1. Wait for the changes to be propagated. The actual CNAME record status is displayed in Wallarm Console → **Nodes** → **CDN** → **Delete node**.
1. Delete the CDN node from the node list.

![Deleting the node](../../images/user-guides/nodes/delete-cdn-node.png)

## CDN node troubleshooting

--8<-- "../include/waf/installation/cdn-node/cdn-node-troubleshooting.md"
