# API漏洩の管理

**API漏洩**モジュールは、APIトークンの漏洩をチェックするために、数千の公開リポジトリやソースを積極的にスキャンし、任意の漏洩したトークンをブロックして、あなたのAPIポートフォリオへの攻撃やその他の被害を防止します。この記事では、API漏洩を管理する方法について情報を提供します。

基本的な機能の概要については、**API漏洩**モジュールの[概要](../about-wallarm/api-leaks.ja.md)をご参照ください。

## API漏洩へのアクセス

Wallarmのコンソールで、以下のように動作する**API漏洩**セクションを使用します。

* **API漏洩**モジュールを有効にするためには、[Wallarmの技術サポート](mailto:support@wallarm.com)にリクエストをしてください。
* **管理者**または**グローバル管理者**[ロール](../user-guides/settings/users.ja.md#user-roles)を持つユーザーのみが、このセクションにアクセスして漏洩を管理することができます。
* **アナリスト**または**グローバルアナリスト**の役割を持つユーザーはこのセクションにアクセスできますが、漏洩を管理することはできません。

## 新しいAPI漏洩

新しい漏洩を登録するには2つの方法があります：

* 自動的 - Wallarmは数千の公開リポジトリやソースを積極的にスキャンし、新しい漏洩をリストに追加します。**ステータス**で並び替えて`開いている`漏洩を見ると、あなたの注意を必要とします。
* 手動 - APIの漏洩を手動で追加します。それぞれが漏洩したトークンのセットです。

![API漏洩 - 手動追加](../images/about-wallarm-waf/api-leaks/api-leaks-add-manually.png)

## インタラクティブな視覚化

**API漏洩**セクションは、見つけたAPI漏洩に対する現在の状況のための豊富な視覚的表現を提供します。グラフィックスを使用して、見つかった漏洩についての現状をすばやく分析し、リスクレベルやソースによる漏洩をフィルタリングするためのダイアグラム要素をクリックします。

![API漏洩 - 視覚化](../images/about-wallarm-waf/api-leaks/api-leaks-visual.png)

## 決定を下す

API漏洩が自動的に追加された場合でも手動で追加された場合でも、何をするべきかの決定は常にあなた次第です。以下のようにこれらの決定を管理できます：

* すべての漏洩したトークンの使用試行をブロックするために仮想パッチを適用します。

    [仮想パッチルール](../user-guides/rules/vpatch-rule.ja.md)が作成されます。

* こちらが間違って追加したと考えるなら、漏洩を誤りとしてマークします。
* すべての漏洩したトークンが再生成または削除されたら、保護を停止するために漏洩を閉じます。これにより、仮想パッチルールが削除されます。
* 漏洩が閉じられていても、削除はされません。再オープンしてから修復を適用し、保護を再開します。

## 漏洩したトークンの使用試行

Wallarmコンソール→ **イベント**で、**タイプ**フィルタを`仮想パッチ`（`vpatch`）に設定して、漏洩したトークンの使用試行を全て見ます。

![イベント - vpatch経由のAPI漏洩](../images/about-wallarm-waf/api-leaks/api-leaks-in-events.png)

現時点では、`vpatch`が適用されている場合にのみ、漏洩したトークンの使用試行を追跡することができます。