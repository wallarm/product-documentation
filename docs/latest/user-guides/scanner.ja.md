# 会社の公開アセットの管理 <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

Wallarm Consoleの**スキャナー**セクションには、ドメイン、IPアドレス、ポートなど、Wallarmスキャナーに自動的に検出されたすべての公開アセットを見ることができます。

プロジェクトが成長するにつれて、リソースは増加し、コントロールは減少します。リソースは会社のデータセンターの外に位置している可能性があり、これはセキュリティを危険にさらす可能性があります。Wallarmは、エシカルハッカーに似た方法を使用してセキュリティを評価し、結果を可視化するのに役立ちます。

![!スキャナーセクション](../images/user-guides/scanner/check-scope.png)

## アセットの追加

Wallarmにあなたの会社の公開アセットを発見させるためには、まず最初の公開アセットを手動で追加します。**ドメインまたはIPの追加**をクリックし、あなたのドメインまたはIPの一つを入力します：

![!スキャナーセクション](../images/user-guides/scanner/add-asset-manually.png)

新しいドメインまたはIPアドレスが追加された後、Wallarmスキャナーはリソースと関連するアセットを検索するためのスキャン処理を開始し、それらをリストに追加します。Wallarmは最初にポートをスキャンし、その後これらのポート上のネットワークリソースを検出します。

公開アセットの収集と更新の継続的なプロセスでは、さまざまな方法が使用されます：

* 自動モード
    * DNSゾーン転送（[AXFR](https://tools.ietf.org/html/rfc5936)）
    * NSとMXレコードの受信
    * SPFレコードデータの受信
    * サブドメイン辞書の検索
    * SSL証明書の解析
* 手動データ入力（Wallarm Console UIまたは[Wallarm API](../api/overview.md)を介して）。

あなたは**設定**セクションで[アセット発見方法を制御](#fine-tuning-asset-scanning)することができます。

## ドメインの予約

あなたはWallarmに、あなたの会社の公開アセットのリストに追加することができるドメインを予約するように依頼することができます。これらのドメインを他のアカウントが追加するのを防ぐために、予約リクエストを[support@wallarm.com](mailto:support@wallarm.com)に送信してください。

## アセットの管理

Wallarmは、公開アセットをドメイン、IP、サービスグループに分類します。IPアドレスが特定のデータセンターに属している場合、それに対応するタグ（例えば、Amazonの場合はAWS、Googleの場合はGCP）がアセットの隣に表示されます。

新たに発見されたアセットで、まだどのユーザーにも閲覧されていないものは**新規**タブに表示されます。**無効**タブでは、脆弱性スキャンが[無効化されている](#disabling-vulnerability-scanning-for-certain-assets)アセットが表示されます。

リソースのドメイン、IPアドレス、ポートは相互に依存します。アセットを選択すると、選択したIPアドレスに関連するドメインなど、その関連性を見ることができます：

![!関連性を持つスコープ要素](../images/user-guides/scanner/asset-with-associations.png)

### アセットの接続の制御

デフォルトでは、優先度の高いアセットは、優先度の低いアセットが無効化されているときでも活動的なままです。[無効化](#disabling-vulnerability-scanning-for-certain-assets)するドメインは、関連するIPアドレスとポートを無効化します。[削除](#deleting-assets)するIPアドレスは関連するポートを削除しますが、ドメインはアクティブなままです。アセットの接続を削除することで、それぞれを個別に無効化または削除することができます。

各アセットのスキャン設定を独立して管理するためには：

1. 互いに切断する必要があるアセットペアから一つのアセットを選択します。
1. 現在のものとペアを組んでいるアセットの隣にあるスイッチをクリックします。

    現在のリソースの名前は太字で表示されます。また、その発見日もUIに表示されます。

![!リソース連携の無効化](../images/user-guides/scanner/disable-association.png)

アセットの相互接続を有効にするためには、相互接続を無効にするときと同じ手順を踏みます。

### アセットの削除

**削除**することで、あなたはWallarmがリストに誤って追加したアセットを報告することができます。削除されたアセットは、今後のスキャンでは発見されません。

誤って削除したアセットを回復するには、[Wallarmサポートチーム](mailto:support@wallarm.com)に連絡してください。

### 公開アセットリストの変更に関する通知

Wallarmはあなたに、公開アセットリストの変更に関する通知をお送りすることができます：新たに発見された公開アセット、無効化されたものと削除されたもの。

通知を受け取るためには、適切な[ネイティブインテグレーション](settings/integrations/integrations-intro.md)をメッセンジャーやSOARシステム（例：PagerDuty、Opsgenie、Slack、Telegram）と設定してください。

Slackメッセージの例：

```
[テストメッセージ] [テストパートナー] ネットワークの周辺が変化しました

通知タイプ：新規スコープオブジェクトIP

ネットワークの周辺で新たに発見されたIPアドレス：
8.8.8.8

クライアント：テスト会社
クラウド：EU
```

## アセットスキャンの詳細設定

Wallarmでアセットスキャンを詳細に設定するためには、**設定**ボタンをクリックします。そこから、Wallarmスキャナーがあなたの会社の公開アセットを見つけるためにどの方法を使用するか制御することができます。デフォルトでは、全ての利用可能な方法が使用されます。

![!スキャナー設定](../images/user-guides/vulnerabilities/scanner-configuration-options.png)

Wallarmスキャナーには**基本的なスキャナー機能**と呼ばれるグローバルスイッチがあります。このスイッチは、アセットスキャンと脆弱性発見プロセスの両方を制御することで、あなたの会社の全アカウントに対するスキャナーを有効化または無効化します。このトグルスイッチは**脆弱性**セクションでも見つけることができます。一方のセクションでスイッチを切り替えると、他のセクションの設定も自動的に更新されます。

## 公開アセットの脆弱性スキャン

Wallarmは、あなたのインフラストラクチャにおけるセキュリティ上の問題を発見するために複数の方法を使用します。これには、公開アセットを典型的な脆弱性に対してスキャンすることが含まれます。スキャナーは、公開アセットを収集した後、すべてのIPアドレスとドメインを自動的に脆弱性に対して確認します。

Wallarm Consoleの [**脆弱性**セクション](vulnerabilities.md) は、発見した脆弱性を表示し、どの脆弱性を発見すべきか制御することを可能にします。

### 特定のアセットに対する脆弱性スキャニングの無効化

**スキャナー**セクションでは、すべてのアセットはその特定のアセットに対する脆弱性スキャンをオンまたはオフにするためのスイッチを持っています。このスイッチは、現在選択している太字で表示されているアセットの左に配置されています。スイッチを見つけるために要素にホバーする必要はありません。

### 脆弱性スキャニングの制限

Wallarmスキャナーは、リソースが応答したベースで検出されたリソースの脆弱性を特定するためにテスト悪意あるリクエストを使用します。あなたのリソースを圧倒しないようにするために、WallarmスキャナーリクエストのRequests Per Second（RPS）とRequests Per Minute（RPM）を管理することができます。また、公開アセットのリソースに向けて送られる場合、Active Threat Verificationモジュールも、ユーザーが定義した値に基づいてリクエストを制限します。

全てのドメインとIPアドレスに対して同じ制限を設けるためには、**設定**をクリックして、対応するセクションで値を設定します。

特定のIPアドレスやドメインに対する制限を上書きするには：

1. **ドメイン**または**IP**タイプのアセットを開きます。
1. **RPS制限の設定**ボタンをクリックし、制限を指定します。

    もしドメインのRPSを設定する場合、そのドメインの依存しているIPアドレスごとにRPSを設定することができます。**IPごとのRPS**欄に望ましい値を入力します。
1. **保存**をクリックします。

デフォルトの設定に戻すためには、空の値を使用するか、`0`を入力します。

![!ドメインRPSの設定](../images/user-guides/scanner/set-rps-for-domain.png)

もし複数のドメインが同じIPアドレスに関連付けられている場合、このIPアドレスへのリクエストの速度はIPアドレスの制限を超えません。もし一つのドメインが複数のIPアドレスに関連付けられている場合、これらのIPアドレスへのリクエストの合計速度は、このドメインの制限を超えません。