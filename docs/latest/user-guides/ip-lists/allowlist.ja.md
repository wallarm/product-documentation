# IPアドレス許可リスト

**許可リスト**は、攻撃の兆候を含むリクエストが送信されてもアクセスが許可される信頼できるIPアドレスのリストです。許可リストは他のリストの中で最も優先度が高いため、[フィルタリングモード](../../admin-en/configure-wallarm-mode.md)のフィルタリングノードは、許可リストに登録されたIPアドレスからのリクエストをブロックしません。

Wallarmコンソール → **IPリスト** → **許可リスト**で、許可リストに登録されたIPアドレスを以下のように管理できます。

--8<-- "../include-ja/waf/features/ip-lists/common-actions-with-lists-overview.md"

![!許可リスト用IP](../../images/user-guides/ip-lists/allowlist-apps.png)

!!! info "リストの古い名前"
    IPアドレスの許可リストの古い名前は、「IPアドレスホワイトリスト」です。

## IP許可リストの使用例

* システムの脆弱性を検索するために、[Wallarm脆弱性スキャナ](../../about-wallarm/detecting-vulnerabilities.md#vulnerability-scanner)を使用できます。スキャナは、アプリケーションのアドレスに悪意のあるリクエストを送信し、アプリケーションの応答を分析します。スキャナのIPアドレスが許可リストに登録されていない場合、フィルタリングノードはスキャナによって送信されたリクエストをブロックすることがあります。Wallarmのコンポーネントがリソースの脆弱性をシームレスにスキャンできるようにするには、スキャナのIPアドレスを許可リストに登録する必要があります。

    Wallarmノード3.0から、Wallarmは自動的にスキャナのIPアドレスを許可リストに登録します。
* 他の信頼できるツールを使用して悪意のあるリクエストが発生する場合は、これらのツールのソースIPを手動で許可リストに追加する必要があります。

## リストにオブジェクトを追加する

!!! info "マルチテナントノードのリストにIPアドレスを追加する"
    [マルチテナントノード](../../installation/multi-tenant/overview.md)をインストールした場合は、リストにIPアドレスを追加する[テナントのアカウント](../../installation/multi-tenant/configure-accounts.md#tenant-account-structure)にまず切り替えてください。

リストにIPアドレス、サブネット、またはIPアドレスのグループを追加するには：

1. Wallarmコンソール → **IPリスト** → **許可リスト** を開き、**オブジェクトを追加** ボタンをクリックします。
1. ドロップダウンリストから、新しいオブジェクトを追加するリストを選択します。
2. 次の方法のいずれかでIPアドレスまたはIPアドレスのグループを指定します：

    * **IPアドレス** または **サブネット** を入力します

        !!! info "サポートされているサブネットマスク"
            サポートされている最大サブネットマスクは、IPv6アドレスの場合は`/32`、IPv4アドレスの場合は`/12`です。
    
    * 登録済みのIPアドレスをすべて追加する **国** または **地域** (ジオロケーション) を選択します
    * このタイプに属するすべてのIPアドレスを追加する **ソースタイプ** を選択します。例えば：
        * **Tor** は、TorネットワークのIPアドレスです
        * **Proxy** は、パブリックまたはウェブプロキシサーバーのIPアドレスです
        * **Search Engine Spiders** は、検索エンジンスパイダーのIPアドレスです
        * **VPN** は、仮想プライベートネットワークのIPアドレスです
        * **AWS** は、Amazon AWSで登録されているIPアドレスです
3. 指定されたIPアドレスに対してアクセスを許可または制限するアプリケーションを選択します。
4. リストにIPアドレスまたはIPアドレスのグループを追加する期間を選択します。最小値は5分で、最大値は無期限です。
5. IPアドレスまたはIPアドレスのグループをリストに追加する理由を指定します。

![!リストにIPを追加(アプリあり)](../../images/user-guides/ip-lists/add-ip-to-list-app.png)

--8<-- "../include-ja/waf/features/ip-lists/common-actions-with-lists-allow-apps.md"