# 脆弱性の管理

脆弱性とは、攻撃者が不正な行動をシステムで実行するために悪用する可能性のあるインフラストラクチャのセキュリティ上の欠陥です。 Wallarm Consoleの**脆弱性**セクションでは、システム内でWallarmによって検出されたセキュリティ上の欠陥を分析し管理することができます。

Wallarmは、さまざまな手法を使用して[セキュリティの脆弱性](../about-wallarm/detecting-vulnerabilities.ja.md)を探し出します：

* **パッシブ検出**：セキュリティインシデントが発生したことにより脆弱性が見つかった
* **アクティブな脅威の検証**：攻撃検証過程中に脆弱性が見つかった
* **脆弱性スキャナー**：[露出している資産](scanner.ja.md)のスキャンプロセス中に脆弱性が見つかった

Wallarmは、検出されたすべての脆弱性の履歴を**脆弱性**セクションに保存します：

![!脆弱性タブ](../images/user-guides/vulnerabilities/check-vuln.png)

## 脆弱性のライフサイクル

脆弱性のライフサイクルには、評価、修復、および確認の段階が含まれます。各ステージで、Wallarmは問題を徹底的に対処し、システムを強化するための必要なデータを提供します。さらに、Wallarm Consoleは**アクティブ**および**クローズド**の状態を活用して、脆弱性の状態を簡単に監視および管理する機能を提供します。

* **アクティブ**の状態は、インフラストラクチャ内に脆弱性が存在することを示しています。
* **クローズド**の状態は、脆弱性がアプリケーション側で解消されたか、誤検出であると判断された場合に使用されます。

    [誤検出](../about-wallarm/detecting-vulnerabilities.ja.md#false-positives)は、正当なエンティティが誤って脆弱性として識別された状況を指します。誤検出であると思われる脆弱性に遭遇した場合、脆弱性メニューの適切なオプションを使用して報告できます。これにより、Wallarmの脆弱性検出の精度が向上します。 Wallarmは脆弱性を誤検出と再分類し、そのステータスを**クローズド**に変更し、それ以上の[再確認](#verifying-vulnerabilities)は行いません。

脆弱性を管理する際には、脆弱性のステータスを手動で切り替えることができます。さらに、Wallarmは定期的に脆弱性を[再確認](#verifying-vulnerabilities)し、結果に基づいて脆弱性のステータスを自動的に変更します。

![!脆弱性のライフサイクル](../images/user-guides/vulnerabilities/vulnerability-lifecycle.png)

脆弱性のライフサイクルの変化は、脆弱性の変更履歴に反映されます。

## 脆弱性の評価と修復

Wallarmは、リスクレベルを評価し、セキュリティ問題に対処するための手順を講じるのに役立つ詳細を各脆弱性に提供します：

* Wallarm システム内の脆弱性の一意の識別子
* 脆弱性が悪用された結果の危険を示すリスクレベル

    Wallarmは、Common Vulnerability Scoring System（CVSS）フレームワーク、脆弱性が悪用される可能性、システムへの潜在的な影響などを使用して脆弱性リスクを自動的に示します。独自のシステム要件とセキュリティ優先事項に基づいてリスクレベルを独自の値に変更することができます。
* 脆弱性を悪用する攻撃のタイプにも対応する[脆弱性のタイプ](../attacks-vulns-list.ja.md)
* 脆弱性が存在するドメインとパス
* 悪意のあるペイロードを渡して脆弱性を悪用するために使用できるパラメーター
* 脆弱性が[検出](../about-wallarm/detecting-vulnerabilities.ja.md#vulnerability-detection-methods)された方法
* 脆弱性が悪用された場合に影響を受ける可能性のある目標コンポーネント。**サーバー**、**クライアント**、**データベース**が該当します
* 脆弱性が検出された日付と時刻
* 脆弱性の最後の[確認日](#verifying-vulnerabilities)
* 詳細な脆弱性の説明、悪用の例、および推奨される対策手順
* 関連するインシデント
* 脆弱性ステータス変更の履歴

[検索文字列](search-and-filters/use-search.ja.md)と事前定義されたフィルターを使用して脆弱性をフィルタリングすることができます。

![!脆弱性の詳細情報](../images/user-guides/vulnerabilities/vuln-info.png)

すべての脆弱性はアプリケーション側で修正するべきであり、そのためシステムは悪意のある行動に対して脆弱になります。脆弱性が修正できない場合、[仮想パッチ](rules/vpatch-rule.ja.md)ルールを使用すると、関連する攻撃をブロックし、インシデントのリスクを排除するのに役立ちます。

## 脆弱性の確認 <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;margin-bottom: -4px;"></a>

Wallarmは定期的にアクティブな脆弱性とクローズされた脆弱性を再確認します。これには、以前に発見されたセキュリティ問題に対するインフラストラクチャの再テストが含まれます。再確認の結果、脆弱性が存在しないことが示された場合、Wallarmは脆弱性のステータスを**クローズド**に変更します。これには、サーバーが一時的に利用できない場合も含まれます。一方、クローズされた脆弱性の再確認が、アプリケーションに依然として存在していることを示した場合、Wallarmはそのステータスを**アクティブ**に戻します。

アクティブな脆弱性および1か月以内に修復された脆弱性は、1日に1回再確認されます。1か月以上前に修復された脆弱性は、1週間に1回再確認されます。

初期の脆弱性検出方法に応じて、テストは**脆弱性スキャナー**または**アクティブな脅威の検証**モジュールによって実行されます。自動再確認プロセスの設定は、[**設定**](#configuring-vulnerability-detection)ボタンを介して制御できます。

パッシブに検出された脆弱性を再確認することはできません。

脆弱性を手動で再確認する必要がある場合は、脆弱性メニューの適切なオプションを使用して再確認プロセスをトリガーすることができます：

![!再確認できる脆弱性](../images/user-guides/vulnerabilities/recheck-vuln.png)

## 脆弱性検出の設定

脆弱性検出の設定は**設定**ボタンを使用して微調整できます。以下のオプションがあります：

* 脆弱性スキャナーを使用して検出したい特定の脆弱性のタイプを選択できます。デフォルトでは、スキャナーはすべての利用可能な脆弱性タイプを対象として設定されています。
* 脆弱性と[露出した資産](scanner.ja.md)の発見プロセスを含む**基本的なスキャナー機能**を有効/無効にします。デフォルトでは、この機能が有効になっています。

    **スキャナー**セクションでも同じ切り替えスイッチを見つけることができます。一方のセクションでスイッチを切り替えると、他のセクションの設定も自動的に更新されます。
* スキャナーを使って脆弱性再確認を有効/無効にするには、**Recheck vulnerabilities**オプションを使用します。
* 脆弱性の検出と再確認のための**アクティブな脅威の検証**モジュールを有効/無効にします。このオプションはモジュール自体を制御し、再確認プロセスだけではありません。

    デフォルトでは、このモジュールは無効になっており、有効化前にその設定の[ベストプラクティス](../admin-en/attack-rechecker-best-practices.ja.md)を学びます。

![!脆弱性スキャン設定](../images/user-guides/vulnerabilities/vuln-scan-settings.png)

さらに、ユーザーインターフェースの[**スキャナー**](scanner.ja.md)セクションでは、脆弱性スキャナーがスキャンする必要がある露出した資産を制御し、各資産に対してスキャナーによって生成されるRPS/RPMを許可することができます。

## 脆弱性レポートのダウンロード

脆弱性データをPDFまたはCSVレポートにエクスポートするための対応するボタンをUIで使用することができます。Wallarmは指定されたアドレスにレポートをメールで送信します。

PDFは、脆弱性とインシデントの概要を視覚的に豊かに提示するのに適していますが、CSVは技術的な目的にはより適しており、各脆弱性についての詳細な情報を提供します。CSVはダッシュボードの作成、最も脆弱性のあるAPIホスト/アプリケーションのリストの作成などに使用できます。

## 脆弱性を取得するためのAPI呼び出し

脆弱性の詳細を取得するためには、Wallarm Console UIを使用するだけでなく、[Wallarm APIを直接呼び出す](../api/overview.ja.md)こともできます。以下に対応するAPI呼び出し の例を示します。

過去24時間以内のステータス**アクティブ**の最初の50の脆弱性を取得するためには、次のリクエストを使用し、`TIMESTAMP`を[Unix Timestamp](https://www.unixtimestamp.com/)形式に変換された24時間前の日期を置き換えます：

--8<-- "../include/api-request-examples/get-vulnerabilities.ja.md"