# バイナリデータの攻撃兆候を無視する

**バイナリデータを許可**および**特定のファイルタイプを許可**のルールは、バイナリデータの標準攻撃検出ルールを調整するために使用されます。

デフォルトでは、Wallarmノードはすべての既知の攻撃兆候を含む受信要求を分析します。分析中に、Wallarmノードは攻撃兆候を通常のバイナリ記号として認識しないことがあり、バイナリデータ内の悪意のあるペイロードを誤って検出することがあります。

**バイナリデータを許可**および**特定のファイルタイプを許可**のルールを使用すると、バイナリデータを含むリクエスト要素を明示的に指定できます。指定されたリクエスト要素の解析中、Wallarmノードは、バイナリデータで決して渡されない攻撃兆候を無視します。

* **バイナリデータを許可**のルールにより、バイナリデータ（アーカイブ化または暗号化されたファイルなど）を含むリクエスト要素に対する攻撃検出を微調整できます。
* **特定のファイルタイプを許可**のルールにより、特定のファイルタイプ（PDFやJPGなど）を含むリクエスト要素に対する攻撃検出を微調整できます。

## ルールの作成および適用

--8<-- "../include-ja/waf/features/rules/rule-creation-options.md"

**Rules**セクションでルールを作成および適用するには：

1. 指定されたリクエスト要素で伝達されるバイナリデータの攻撃検出ルールを任意の方法で調整するには、Wallarmコンソールの**Rules**セクションで**バイナリデータを許可**のルールを作成します。ルールは以下の要素で構成されます：

      ＊ルールを適用するエンドポイントを [説明](add-rule.md#branch-description) する**Condition**。
      ＊バイナリデータを含む元のリクエスト要素を指す**Part of request**。

         --8<-- "../include-ja/waf/features/rules/request-part-reference.md"
2. 指定のリクエスト要素で伝達される特定のファイルタイプの攻撃検出ルールを調整するには、Wallarmコンソールの**Rules**セクションで**特定のファイルタイプを許可**のルールを作成します。ルールは以下の要素で構成されます：

      ＊ルールを適用するエンドポイントを [説明](add-rule.md#branch-description) する**Condition**。
      ＊攻撃兆候を無視するファイルタイプ。
      ＊指定されたファイルタイプを含む元のリクエスト部分を指す**Part of request**。

         --8<-- "../include-ja/waf/features/rules/request-part-reference.md"
3. [ルールのコンパイルが完了](compiling.md)するのを待ちます。

## ルールの例

ユーザーがサイトのフォームを使って画像のバイナリファイルをアップロードすると、クライアントは `multipart/form-data` タイプの POST リクエストを `https://example.com/uploads/`に送信します。バイナリファイルは `fileContents` というボディパラメータで渡されます。

`fileContents`パラメータの攻撃検出を微調整する**Allow binary data**ルールは、次のようになります：

![!「バイナリデータを許可」ルールの例](../../images/user-guides/rules/ignore-binary-attacks-example.png)