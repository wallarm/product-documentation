# ضبط كشف هجمة `overlimit_res`

يستهلك عقدة Wallarm وقتًا محدودًا في معالجة طلب وارد واحد وإذا تم تجاوز الحد الزمني، يتم تعليم الطلب كهجمة [تجاوز الحد المسموح من الموارد (`overlimit_res`)](../../attacks-vulns-list.md#overlimiting-of-computational-resources). قاعدة **ضبط كشف هجمة overlimit_res** تمكنك من تخصيص الحد الزمني المخصص لمعالجة طلب واحد والسلوك الافتراضي للعقدة عند تجاوز الحد.

تحد معالجة زمن الطلب من التهرب من الهجمات الموجهة إلى عقد Wallarm. في بعض الأحيان، قد تشير الطلبات المعلمة كـ `overlimit_res` إلى عدم كفاية الموارد المخصصة لوحدات عقدة Wallarm مما يؤدي إلى معالجة طلب طويلة.

## سلوك العقدة الافتراضي

تم تكوين عقدة Wallarm لاستغراق لا يزيد عن **1000 مللي ثانية** في معالجة طلب وارد واحد بشكل افتراضي.

إذا تجاوز الحد الزمني، تقوم عقدة Wallarm:

1. بوقف معالجة الطلب.
1. تعليم الطلب بأنه هجمة `overlimit_res` وتحميل تفاصيل الهجمة إلى Wallarm Cloud.

    إذا احتوى جزء الطلب المعالج أيضًا على [أنواع هجمات أخرى](../../attacks-vulns-list.md)، تقوم عقدة Wallarm بتحميل تفاصيلها إلى السحابة أيضًا.

    سيتم عرض هجمات الأنواع المقابلة في [قائمة الأحداث](../events/check-attack.md) في وحدة تحكم Wallarm.
1. <a name="request-blocking"></a>في وضع **المراقبة**، تحول العقدة الطلب الأصلي إلى عنوان التطبيق. يوجد خطر أن يتم استغلال التطبيق بواسطة الهجمات المضمنة في كل من الأجزاء المعالجة وغير المعالجة من الطلب.

    في وضع **الحظر الآمن**، تحظر العقدة الطلب إذا كان مصدره من عنوان IP المدرج في القائمة الرمادية. وإلا، تحول العقدة الطلب الأصلي إلى عنوان التطبيق. يوجد خطر أن يتم استغلال التطبيق بواسطة الهجمات المضمنة في كل من الأجزاء المعالجة وغير المعالجة من الطلب.

    في وضع **الحظر**، تحظر العقدة الطلب.

!!! info "معالجة الطلب في وضع "التعطيل""
    في وضع **التعطيل**، لا تحلل العقدة حركة المرور الواردة وبالتالي، لا تلتقط الهجمات الموجهة نحو تجاوز الحد المسموح من الموارد.

## تغيير سلوك العقدة الافتراضي

!!! تحذير "خطر التهرب من الحماية أو نفاد ذاكرة النظام"
    * يوصى بتغيير السلوك الافتراضي للعقدة فقط في المواقع المحددة بدقة حيث يكون ذلك ضروريًا بالفعل، مثل حيث يتم تحميل الملفات الكبيرة، وحيث لا يوجد خطر من التهرب من الحماية واستغلال الثغرات الأمنية.
    * يمكن أن يؤدي الحد الزمني المرتفع و/أو استمرار معالجة الطلب بعد تجاوز الحد الزمني إلى أسباب استنفاد الذاكرة أو معالجة الطلب خارج الوقت.

تتيح قاعدة **ضبط كشف هجمة overlimit_res** تغيير سلوك العقدة الافتراضي على النحو التالي:

* تعيين حد مخصص على معالجة طلب واحد
* إيقاف أو استمرار معالجة الطلب عند تجاوز الحد الزمني

    إذا استمرت العقدة في معالجة الطلب بعد تجاوز الحد الزمني، فإنها تقوم بتحميل بيانات عن الهجمات المكتشفة إلى السحابة فقط بعد اكتمال معالجة الطلب بالكامل.

    إذا تم ضبط القاعدة على إيقاف المعالجة، توقف العقدة معالجة الطلب بمجرد تجاوز الحد الزمني. ثم تحول الطلب ما لم يتم ضبطه على تسجيل هجمة ويكون في وضع الحظر. في هذه الحالة، تحظر العقدة الطلب وتسجل هجمة `overlimit_res`.
* تسجيل هجمة `overlimit_res` عند تجاوز وقت معالجة الطلب أم لا

    إذا تم تكوين العقدة لتسجيل الهجمة، فإنها إما [تحظر الطلب أو تحوله إلى عنوان التطبيق](#request-blocking) حسب وضع التصفية.

    إذا لم تتم تهيئة العقدة لتسجيل الهجمة والطلب لا يحتوي على أنواع هجمات أخرى، تحول العقدة الطلب الأصلي إلى عنوان التطبيق. إذا احتوى الطلب على أنواع هجمات أخرى، إما تحظر العقدة الطلب أو تحوله إلى عنوان التطبيق حسب وضع التصفية

لا تسمح القاعدة بـ:

* تعيين وضع الحظر لهجمات `overlimit_res` بشكل منفصل عن التهيئات الأخرى. إذا تم اختيار خيار **التسجيل والعرض في الأحداث**، إما تحظر العقدة هجمة `overlimit_res` أو تحولها إلى عنوان التطبيق حسب [وضع التصفية](../../admin-en/configure-wallarm-mode.md) المعين لنقطة النهاية المقابلة.

## مثال على القاعدة

* تزيد القاعدة من الحد الزمني لمعالجة كل طلب POST إلى `https://example.com/upload` حتى 1020 مللي ثانية. يؤدي النقطة النهائية المحددة تحميل ملف كبير.
* تظل المعايير الأخرى لسلوك العقدة افتراضية - إذا ما قامت العقدة بمعالجة الطلب لأكثر من 1020 مللي ثانية، توقف معالجة الطلب وتسجل هجمة `overlimit_res`.

![مثال على قاعدة "التسجيل والعرض في الأحداث"](../../images/user-guides/rules/fine-tune-overlimit-detection-example.png)