# عقد تصفية CDN

تتيح لك قسم **العقد** في واجهة مستخدم كونسول Wallarm إدارة عقد [**عقدة Wallarm**](nodes.md) وعقد **CDN**. هذه المقالة تتناول عقد CDN.

!!! info "عقد CDN تحت الخطة المجانية"
    لا يدعم نشر نوع عقدة CDN تحت خطة[الخطة المجانية](../../about-wallarm/subscription-plans.md#free-tier-subscription-plan-us-cloud).

--8<-- "../include/waf/installation/cdn-node/how-cdn-node-works.md"

## إنشاء عقدة

لإنشاء عقدة CDN، يرجى اتباع [التعليمات](../../installation/cdn-node.md).

## عرض تفاصيل العقدة

يتم عرض تفاصيل العقدة المُثبتة في جدول وبطاقة لكل عقدة. لفتح البطاقة، انقر على سجل الجدول المناسب.

تتوفر المعلومات والمقاييس التالية للعقدة:

* اسم العقدة الذي يتم إنشاؤه بناءً على اسم النطاق المحمي
* عنوان IP للعقدة
* عنوان المنشأ المرتبط بالنطاق المحمي
* الرمز الفريد لتعريف العقدة (UUID)
* حالة العقدة
* شهادة SSL/TLS: شهادة Let's Encrypt التي يولدها Wallarm أو الشهادة الخاصة
* وقت آخر تزامن لعقدة التصفية و Wallarm Cloud
* تاريخ إنشاء عقدة التصفية
* عدد الطلبات التي تمت معالجتها بواسطة العقدة في الشهر الحالي
* الإصدارات المستخدمة من custom_ruleset و proton.db
* إصدارات حزم Wallarm المُثبتة
* مؤشر لتحديثات المكونات المتاحة

![بطاقة عقدة CDN](../../images/user-guides/nodes/view-cdn-node-comp-vers.png)

## تحديث عنوان المنشأ للمورد المحمي

إذا كان موفر الاستضافة الخاص بك يقوم بتحديث عنوان IP للمنشأ أو النطاق المرتبط بالمورد المحمي ديناميكيًا، فيرجى الحفاظ على تحديث عنوان المنشأ المحدد في تكوين عقدة CDN. وإلا، لن تصل الطلبات إلى المورد المحمي نظرًا لأن عقدة CDN ستحاول توجيهها إلى عنوان منشأ غير صحيح.

لتحديث عنوان المنشأ، استخدم خيار **تعديل عنوان المنشأ**.

## تحميل شهادة SSL/TLS الخاصة

تصدر Wallarm تلقائيًا شهادة [Let's Encrypt](https://letsencrypt.org/) مما يمكن HTTPS على نطاق عقدة CDN. يتم توليد الشهادات وتجديدها تلقائيًا حسب الحاجة.

إذا كنت تمتلك بالفعل شهادة للنطاق المحمي وتفضل ذلك على شهادة Let's Encrypt، يمكنك تحميل شهادتك الخاصة باستخدام خيار **تحديث شهادة SSL/TLS**.

## استخدام Varnish Cache

يسرع استخدام عقدة CDN بالتزامن مع مسرع HTTP [Varnish Cache](https://varnish-cache.org/intro/index.html#intro) توصيل المحتوى للمستخدمين (مثل استجابات الخادم). ومع ذلك، إذا قمت بتغيير المحتوى الخاص بك، قد يتم تحديث النسخة المخزنة مؤقتًا على CDN بتأخير، مما قد يسبب [مشاكل](#why-is-there-a-delay-in-the-update-of-the-content-protected-by-the-cdn-node) ويكون سببًا لتعطيل Varnish Cache.

لتجنب المشاكل مع سرعة تحديث المحتوى، يتم تعطيل Varnish Cache افتراضيًا. يمكنك تمكين/تعطيل Varnish Cache يدويًا. للقيام بذلك، انتقل إلى **العقد** → قائمة عقدة CDN → **تمكين Varnish Cache** أو **تعطيل Varnish Cache**.

## حذف عقدة

عند حذف عقدة التصفية، سيتم إيقاف تصفية الطلبات إلى نطاقك. لا يمكن التراجع عن حذف عقدة التصفية. سيتم حذف العقدة من قائمة العقد نهائيًا.

1. حذف سجل CNAME الخاص بـ Wallarm من سجلات DNS للنطاق المحمي.

    !!! warning "سيتم إيقاف تخفيف الطلبات الضارة"
        بمجرد إزالة سجل CNAME ودخول التغييرات حيز التنفيذ على الإنترنت، ستتوقف عقدة CDN الخاصة بـ Wallarm عن توجيه الطلبات وسيذهب الحركة المشروعة والضارة مباشرة إلى المورد المحمي.

        ينتج عن ذلك خطر استغلال ثغرات الخادم المحمي عند التأثير في السجل المحذوف لـ DNS ولكن لم يدخل سجل CNAME الذي تم إنشاؤه للإصدار الجديد من العقدة حيز التنفيذ بعد.
1. انتظر حتى يتم نشر التغييرات. تُعرض حالة سجل CNAME الفعلية في Wallarm Console → **العقد** → **CDN** → **حذف العقدة**.
1. حذف العقدة CDN من قائمة العقد.

![حذف العقدة](../../images/user-guides/nodes/delete-cdn-node.png)

## مشكلات عقدة CDN

--8<-- "../include/waf/installation/cdn-node/cdn-node-troubleshooting.md"