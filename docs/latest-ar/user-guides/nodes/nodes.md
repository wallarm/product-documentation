# عقد والارم

يتيح لك قسم **العقد** في واجهة مستخدم وحدة تحكم والارم إدارة عقد **عقد والارم** و[**عقد CDN**](cdn-node.md). هذه المقالة عن عقد والارم.

يجب نشر وحدات عقد والارم في بيئة العميل حتى تتمكن والارم من تخفيف حركة المرور الخبيثة. تعمل عقدة والارم كبروكسي من خلال تخفيف الطلبات الخبيثة وتوجيه الطلبات المشروعة إلى المورد المحمي.

خيارات إدارة واجهة مستخدم عقد والارم:

* إنشاء عقد جديدة
* عرض خصائص ومقاييس العقد المثبتة
* إعادة توليد رموز العقد
* إعادة تسمية العقد
* حذف العقد

![العقد](../../images/user-guides/nodes/table-nodes.png)

!!! info "وصول المدير"
    إنشاء وحذف وإعادة توليد عقد/رموز والارم متاح فقط للمستخدمين بدور **المدير** أو **المدير العالمي**. يتاح عرض تفاصيل العقد المثبتة لجميع المستخدمين.

!!! warning "إزالة أنواع العقد العادية والسحابية"
    ابتداءً من الإصدار 4.6، فقط [**نوع عقد والارم** متاح](../../updating-migrating/what-is-new.md#removal-of-the-email-password-based-node-registration).

    **عقدة والارم** تستخدم منهجية موحدة للتسجيل والتكوين في [أي بيئة مدعومة](../../installation/supported-deployment-options.md).

## إنشاء عقدة

لإنشاء عقدة والارم باستخدام [الرمز المناسب](#api-and-node-tokens-for-node-creation):

=== "باستخدام رمز API"

    1. افتح وحدة تحكم والارم → **الإعدادات** → **رموز API** في [سحابة الولايات المتحدة](https://us1.my.wallarm.com/settings/api-tokens) أو [سحابة الاتحاد الأوروبي](https://my.wallarm.com/settings/api-tokens).
    1. ابحث أو أنشئ رمز API بدور مصدر `النشر`.
    1. انسخ هذا الرمز.
    1. نشر عقدة جديدة في [البيئة المناسبة](../../installation/supported-deployment-options.md) باستخدام رمز API الخاص بك. بعد تسجيل العقدة، ستظهر تلقائيًا في قسم **العقد** في وحدة تحكم والارم.

=== "باستخدام رمز العقدة"

    1. افتح وحدة تحكم والارم → **العقد** في [سحابة الولايات المتحدة](https://us1.my.wallarm.com/nodes) أو [سحابة الاتحاد الأوروبي](https://my.wallarm.com/nodes) وأنشئ العقدة من نوع **عقدة والارم**.

        ![إنشاء عقدة والارم](../../images/user-guides/nodes/create-cloud-node.png)
    
    1. انسخ الرمز المولد.
    1. نشر عقدة جديدة في [البيئة المناسبة](../../installation/supported-deployment-options.md) باستخدام رمز العقدة الخاص بك.

!!! info "خيار المستأجر المتعدد"
    يتيح خيار **المستأجر المتعدد** استخدام والارم لحماية عدة بنى تحتية مستقلة للشركات أو بيئات معزولة في نفس الوقت. [اقرأ المزيد](../../installation/multi-tenant/overview.md)

    === "تثبيت رمز API"

        يمكنك تبديل عقدة إلى وضع المستأجر المتعدد بعد التثبيت من قائمة العقدة الحالية.

    === "تثبيت رمز العقدة"
    
        يمكنك تبديل العقدة إلى وضع المستأجر المتعدد إما خلال إنشائها أو من قائمة العقدة الحالية.

## عرض تفاصيل عقدة

يتم عرض تفاصيل العقدة الفلترة في جدول وبطاقة كل عقدة فلترة. لفتح البطاقة، انقر على سجل الجدول المناسب.

الخصائص والمقاييس المتاحة للعقدة هي:

* اسم العقدة الذي تم إعطاؤه للعقدة عند إنشائها
* متوسط عدد الطلبات في الثانية (RPS)
* عنوان IP للعقدة
* المعرف الفريد للعقدة (UUID)
* رمز عقدة والارم (مرئي فقط للمستخدمين بـ[دور](../settings/users.md) **المدير** أو **المدير العالمي**)
* وقت آخر تزامن للعقدة الفلترة مع سحابة والارم
* تاريخ إنشاء العقدة الفلترة
* عدد الطلبات التي تعالجها العقدة في الشهر الحالي، يمكنك أيضًا **عرض الأحداث من هذه العقدة لليوم** (يتم التبديل إلى قسم **الهجمات**)
* إصدارات LOM وproton.db المستخدمة
* إصدارات حزم والارم وNGINX وEnvoy المثبتة (إن وجدت)

![بطاقة العقدة](../../images/user-guides/nodes/view-wallarm-node.png)

إذا تم تثبيت عقدة والارم واحدة لعدة حالات (مثلًا لمعالجة الحركة المبدئية وتحليلات ما بعد الطلب التي تتم بواسطة حالات خادم مختلفة)، فإن عدد العقد الفلترة المقابلة سيتم تجميعها في سجل واحد في الجدول. ستتوفر الخصائص والمقاييس لكل حالة.

في والارم، تُسمى حالات العقد `hostname_NodeUUID`، حيث:

* `hostname` هو اسم الآلة العاملة التي تم إطلاق حالة العقدة عليها
* `NodeUUID` هو المعرف الفريد للعقدة (UUID)

يمكنك تعيين `hostname` يدويًا أثناء تثبيت العقدة باستخدام المعامل `-n` في سكربت `register-node`.

## إعادة توليد رمز العقدة

إعادة توليد الرمز يخلق رمزًا جديدًا للعقدة.

1. افتح وحدة تحكم والارم → **العقد**.
2. انقر على **إعادة توليد رمز** في قائمة العقدة أو البطاقة.
3. إذا كانت العقدة مثبتة بالفعل في بنيتك التحتية، انسخ قيمة الرمز الجديد وحددها ضمن إعدادات العقدة المثبتة.

![إعادة توليد رمز العقدة](../../images/user-guides/nodes/generate-new-token.png)

## حذف عقدة

عند حذف العقدة، سيتم إيقاف تصفية الطلبات إلى تطبيقك. لا يمكن التراجع عن حذف العقدة الفلترة. سيتم حذف العقدة نهائيًا من قائمة العقد.

1. افتح وحدة تحكم والارم → **العقد**.
1. حدد عقدة واحدة أو أكثر وانقر على **حذف**. يمكنك أيضًا حذف العقدة الفلترة باختيار زر من قائمة العقدة أو بطاقة العقدة.
1. أكد الإجراء.

## رموز API والعقد لإنشاء عقدة

تتفاعل العقدة الفلترة والارم مع سحابة والارم. لتوفير الوصول إلى واجهة برمجة تطبيقات سحابة والارم للعقدة، تحتاج إلى توليد رمز من جانب السحابة واستخدامه على الجهاز مع العقدة. استخدم **رموز API** (الموصى بها) أو **رموز العقد** لهذا الغرض:

* [**رموز API**](../settings/api-tokens.md) بدور `النشر` عندما:

    * لا يُعرف مسبقًا عدد مجموعات العقد المستخدمة لتنظيم العقد منطقيًا في واجهة المستخدم (سيتم إضافة/إزالة مجموعات العقد باستمرار - مع رموز API ستتمكن من إدارة هذه المجموعات بسهولة مع ضبط متغير `WALLARM_LABELS` لتعيين قيمة العلامة `مجموعة`).
    * تحتاج إلى التحكم في دورة حياة الرمز (يمكنك تحديد تاريخ انتهاء الصلاحية أو تعطيل رموز API مما يجعلها أكثر أمانًا).

        !!! info "رموز API غير مدعومة بواسطة بعض خيارات التثبيت"
            حاليًا لا يمكن استخدام رموز API لـ[متحكمات الوصول كونغ](../../installation/kubernetes/kong-ingress-controller/deployment.md) ونشر AWS استنادًا إلى [وحدة Terraform](../../installation/cloud-platforms/aws/terraform-module/overview.md). استخدم رموز العقد بدلاً من ذلك.

* **رموز العقد** عندما تعرف مسبقًا ما ستكون عليه مجموعات العقد المقدمة. استخدم **العقد** → **إنشاء عقدة** لإنشاء وتسمية مجموعة العقد. أثناء نشر العقدة، استخدم رمز المجموعة لكل عقدة تريد تضمينها في المجموعة.

!!! info "دعم التوسع التلقائي"
    كلا نوعي الرمز يدعمان ميزة توسع العقد تلقائيًا المتوفرة في بعض السحابات/خيارات التثبيت.