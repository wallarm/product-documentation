# عقد Wallarm

تتيح لك قسم **العقد** في واجهة مستخدم Wallarm Console إدارة عقد كل من أنواع **عقدة Wallarm** و[**عقدة CDN**](cdn-node.md). هذه المقالة تتعلق بعقد Wallarm.

يجب نشر وحدات عقدة Wallarm في بيئة العميل حتى تتمكن Wallarm من التخفيف من حركة الإنترنت الضارة. تعمل عقدة Wallarm كوكيل عبر تخفيف الطلبات الضارة وتوجيه الطلبات المشروعة إلى المورد المحمي.

خيارات إدارة واجهة مستخدم عقدة Wallarm:

* إنشاء عقد جديدة
* عرض خصائص ومقاييس العقد المثبتة
* إعادة توليد رموز العقد
* إعادة تسمية العقد
* حذف العقد

![العقد](../../images/user-guides/nodes/table-nodes.png)

!!! info "وصول المسؤول"
    إنشاء وحذف وإعادة توليد عقد/رموز Wallarm متاح فقط للمستخدمين ذوي دور **المسؤول** أو **المسؤول العالمي**. عرض تفاصيل العقد المثبتة متاح لجميع المستخدمين.

!!! warning "إزالة أنواع العقد العادية والسحابية"
    ابتداءً من الإصدار 4.6، فقط [**نوع عقدة Wallarm** متوفر](../../updating-migrating/what-is-new.md#removal-of-the-email-password-based-node-registration).

    **عقدة Wallarm** تستخدم نهجًا موحدًا للتسجيل والتكوين في [أي بيئة مدعومة](../../installation/supported-deployment-options.md).

## إنشاء عقدة

لإنشاء عقدة Wallarm باستخدام [الرمز المناسب](#api-and-node-tokens-for-node-creation):

=== "باستخدام رمز API"

    1. افتح Wallarm Console → **الإعدادات** → **رموز API** في [السحابة الأمريكية](https://us1.my.wallarm.com/settings/api-tokens) أو [السحابة الأوروبية](https://my.wallarm.com/settings/api-tokens).
    1. ابحث أو أنشئ رمز API بدور المصدر `Deploy`.
    1. انسخ هذا الرمز.
    1. نشر عقدة جديدة في [البيئة المناسبة](../../installation/supported-deployment-options.md) باستخدام رمز API الخاص بك. بعد تسجيل العقدة، ستظهر تلقائيًا في قسم **العقد** في وحدة تحكم Wallarm.

=== "باستخدام رمز العقدة"

    1. افتح Wallarm Console → **العقد** في [السحابة الأمريكية](https://us1.my.wallarm.com/nodes) أو [السحابة الأوروبية](https://my.wallarm.com/nodes) وأنشئ العقدة من نوع **عقدة Wallarm**.

        ![إنشاء عقدة Wallarm](../../images/user-guides/nodes/create-cloud-node.png)
    
    1. انسخ الرمز المولد.
    1. نشر عقدة جديدة في [البيئة المناسبة](../../installation/supported-deployment-options.md) باستخدام رمز عقدتك.

!!! info "خيار العقد المتعددة المستأجرين"
    خيار **العقد متعددة المستأجرين** يتيح استخدام Wallarm لحماية عدة بنى تحتية مستقلة للشركة أو بيئات معزولة في وقت واحد. [اقرأ المزيد](../../installation/multi-tenant/overview.md)

    === "تثبيت باستخدام رمز API"

        يمكنك تحويل عقدة إلى وضع متعدد المستأجرين بعد التثبيت من قائمة العقدة الموجودة.

    === "تثبيت باستخدام رمز العقدة"
    
        يمكنك تحويل عقدة إلى وضع متعدد المستأجرين إما أثناء إنشائها أو من قائمة العقدة الموجودة.

## عرض تفاصيل عقدة

تُعرض تفاصيل عقدة التصفية في جدول وبطاقة كل عقدة تصفية. لفتح البطاقة، انقر على سجل الجدول المناسب.

الخصائص والمقاييس التالية للعقدة متوفرة:

* اسم العقدة الذي تم إعطاؤه للعقدة عند الإنشاء
* متوسط عدد الطلبات في الثانية (RPS)
* عنوان IP للعقدة
* معرف العقدة الفريد (UUID)
* رمز عقدة Wallarm (مرئي فقط للمستخدمين ذوي [دور](../settings/users.md) **المسؤول** أو **المسؤول العالمي**)
* وقت آخر مزامنة لعقدة التصفية وسحابة Wallarm
* تاريخ إنشاء عقدة التصفية
* عدد الطلبات التي تمت معالجتها بواسطة العقدة في الشهر الحالي، يمكنك أيضًا **عرض الأحداث من هذه العقدة لليوم** (يتم التحويل إلى قسم **الهجمات**)
* إصدارات LOM و proton.db المستخدمة
* إصدارات حزم Wallarm المثبتة و NGINX و Envoy (إذا كانت موجودة)

![بطاقة العقدة](../../images/user-guides/nodes/view-wallarm-node.png)

إذا تم تثبيت عقدة Wallarm واحدة لعدة حالات (مثل معالجة حركة الإنترنت الأولية وتحليلات الطلبات التي تؤديها حالات الخادم المختلفة)، فإن العدد المناسب من عقد التصفية سيتم تجميعها في سجل واحد في الجدول. ستكون الخصائص والمقاييس متاحة لكل حالة.

في Wallarm، تُسمى حالات العقدة بالطريقة التالية `hostname_NodeUUID`، حيث: 

* `hostname` هو اسم الجهاز العامل الذي يتم فيه إطلاق حالة العقدة
* `NodeUUID` هو معرف العقدة الفريد (UUID)

يمكنك تعيين `hostname` يدويًا أثناء تثبيت العقدة باستخدام الوسيط `-n` في سكربت `register-node`.

## إعادة توليد رمز العقدة

ينشئ إعادة التوليد رمزًا جديدًا للعقدة.

1. افتح Wallarm Console → **العقد**.
2. انقر على **إعادة توليد الرمز** في قائمة العقدة أو بطاقتها.
3. إذا كانت العقدة مثبتة بالفعل في بنيتك التحتية، انسخ قيمة الرمز الجديد وحددها ضمن إعدادات العقدة المثبتة.

![إعادة توليد رمز العقدة](../../images/user-guides/nodes/generate-new-token.png)

## حذف عقدة

عند حذف العقدة، سيتوقف تصفية الطلبات إلى تطبيقك. لا يمكن التراجع عن حذف عقدة التصفية. سيتم حذف العقدة من قائمة العقد بشكل دائم.

1. افتح Wallarm Console → **العقد**.
1. حدد عقدة واحدة أو أكثر وانقر على **حذف**. يمكنك أيضًا حذف عقدة التصفية عن طريق اختيار زر من قائمة العقدة أو بطاقتها.
1. أكد الإجراء.

## رموز API ورموز العقد لإنشاء العقدة

تتفاعل عقدة التصفية Wallarm مع سحابة Wallarm. لتوفير الوصول إلى API سحابة Wallarm للعقدة، تحتاج إلى توليد رمز على جانب السحابة واستخدامه على الجهاز الموجود فيه العقدة. استخدم **رموز API** (الموصى بها) أو **رموز العقد** لهذا الغرض:

* [**رموز API**](../settings/api-tokens.md) بدور `Deploy` عند:

    * عدم معرفة عدد مجموعات العقد المستخدمة لتنظيم العقد في واجهة المستخدم مسبقًا (سيتم إضافة/إزالة مجموعات العقد باستمرار - مع رموز API ستتمكن من إدارة هذه المجموعات بسهولة بتعيين قيمة تسمية `المجموعة` باستخدام المتغير `WALLARM_LABELS`).
    * تحتاج إلى التحكم في دورة حياة الرمز (يمكنك تحديد تاريخ انتهاء الصلاحية أو تعطيل رموز API مما يجعلها أكثر أمانًا).

        !!! info "رموز API غير مدعومة بواسطة بعض خيارات التثبيت"
            حاليًا، لا يمكن استخدام رموز API لمتحكمات  AWS بناءً على [وحدة Terraform](../../installation/cloud-platforms/aws/terraform-module/overview.md). استخدم رموز العقد بدلاً من ذلك.

* **رموز العقد** عندما تعرف مسبقًا ما هي مجموعات العقد التي ستكون موجودة. استخدم **العقد** → **إنشاء عقدة** لإنشاء وتسمية مجموعة العقد. خلال نشر العقدة، استخدم رمز المجموعة لكل عقدة ترغب في تضمينها في المجموعة.

!!! info "دعم التوسع التلقائي"
    كلا نوعي الرموز يدعمان ميزة توسع العقد التلقائي المتوفرة في بعض السحب/خيارات التثبيت.