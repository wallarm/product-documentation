# إدارة ملف تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

في قسم **الوقاية من سوء استخدام واجهة برمجة التطبيقات** من واجهة Wallarm، يمكنك إدارة ملفات تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات التي مطلوبة لتكوين وحدة [**الوقاية من سوء استخدام واجهة برمجة التطبيقات**](../api-abuse-prevention/overview.md).

القسم متاح فقط للمستخدمين ذوي [الأدوار](../user-guides/settings/users.md#user-roles) التالية:

* **مدير** أو **محلل** للحسابات العادية.
* **مدير عالمي** أو **محلل عالمي** للحسابات مع ميزة العقد المتعدد.

## إنشاء ملف تعريف للوقاية من سوء استخدام واجهة برمجة التطبيقات

لإنشاء ملف تعريف للوقاية من سوء استخدام واجهة برمجة التطبيقات:

1. في واجهة Wallarm → **الوقاية من سوء استخدام واجهة برمجة التطبيقات**، انقر على **إنشاء ملف تعريف**.
1. حدد التطبيقات التي يجب حمايتها.
1. حدد مستوى [التسامح](../api-abuse-prevention/overview.md#tolerance).
1. إذا لزم الأمر، في قسم **الحماية من**، قم بتحديد [أنواع البوتات](../api-abuse-prevention/overview.md#automated-threats-blocked-by-api-abuse-prevention) التي يجب حمايتها.
1. حدد الرد المناسب علي [البوتات الخبيثة](../api-abuse-prevention/overview.md#reaction-to-malicious-bots).
1. إذا كان الرد هو الإضافة إلى القائمة السوداء أو القائمة الرمادية، حدد الوقت الذي ستبقى خلاله الـ IP في القائمة. القيمة الافتراضية هي `أضف ليوم`..
1. عيّن اسمًا واختياريًا الوصف.

    ![ملف تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات](../images/about-wallarm-waf/abi-abuse-prevention/create-api-abuse-prevention.png)

    بمجرد تكوين ملف تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات، ستبدأ الوحدة في [تحليل المرور ومنع الهجمات الآلية المدعومة](../api-abuse-prevention/overview.md#how-api-abuse-prevention-works).

## تعطيل ملف تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات

الملفات التعريفية المُعطلة هي التي لا تستخدمها وحدة **الوقاية من سوء استخدام واجهة برمجة التطبيقات** أثناء تحليل المرور ولكنها لا تزال تُعرض في قائمة الملفات التعريفية. يمكنك إعادة تمكين الملفات التعريفية المُعطلة في أي وقت. إذا لم يكن هناك ملفات تعريف ممكّنة، فالوحدة لا تمنع البوتات الخبيثة.

يمكنك تعطيل الملف التعريفي عن طريق استخدام الخيار المناسب **تعطيل**.

## حذف ملف تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات

الملفات التعريفية المحذوفة هي التي لا يمكن استعادتها والتي لا تستخدمها وحدة **الوقاية من سوء استخدام واجهة برمجة التطبيقات** أثناء تحليل المرور.

يمكنك حذف الملف التعريفي عن طريق استخدام الخيار المناسب **حذف**.

## استكشاف البوتات الخبيثة المحظورة وهجماتها

تحظر وحدة **الوقاية من سوء استخدام واجهة برمجة التطبيقات** البوتات عن طريق إضافتها إلى [القائمة السوداء](../user-guides/ip-lists/overview.md) أو [القائمة الرمادية](../user-guides/ip-lists/overview.md) لمدة ساعة.

يمكنك استكشاف IP البوتات المحظورة في واجهة Wallarm → **قائمة الـ IP** → **القائمة السوداء** أو **القائمة الرمادية**. استكشف الـ IP المُضافة مع سبب `البوت`.

![IP البوتات في القائمة السوداء](../images/about-wallarm-waf/abi-abuse-prevention/denylisted-bot-ips.png)

!!! info "الثقة"
    كنتيجة ل[عمل المكتشفات](../api-abuse-prevention/overview.md#how-api-abuse-prevention-works)، يحصل كل بوت تم اكتشافه على **نسبة الثقة** : مدى ثقتنا بأن هذا بوت. في كل نوع من أنواع البوتات، لدى المكتشفات أهمية نسبية / عدد من الأصوات. وبالتالي، نسبة الثقة هي الأصوات المكتسبة من جميع الأصوات الممكنة في هذا النوع من البوت (المقدمة من المكتشفات التي عملت).

يمكنك التدخل في عملية حماية البوت. إذا كانت الـ IP المُدرجة في القائمة السوداء أو القائمة الرمادية ليست مستخدمة بالفعل من قبل بوت خبيث، يمكنك إما حذف الـ IP من القائمة أو تضمينها في [القائمة البيضاء](../user-guides/ip-lists/overview.md). لا تمنع Wallarm أي طلبات تنشأ من الـ IP المُدرجة في القائمة البيضاء بما في ذلك الطلبات الخبيثة.

يمكنك أيضًا استكشاف هجمات سوء استخدام واجهة برمجة التطبيقات التي تتم بواسطة البوتات في واجهة Wallarm → قسم **الهجمات**. استخدم مفتاح البحث `api_abuse` أو حدد `الوقاية من سوء الاستخدام من واجهة برمجة التطبيقات` من فلتر **النوع**.

![أحداث الوقاية من سوء استخدام واجهة برمجة التطبيقات](../images/about-wallarm-waf/abi-abuse-prevention/api-abuse-events.png)

تتم تصور معلومات البوت في ثلاث خرائط حرارية. في جميع الخرائط الحرارية، كلما كانت الفقاعة أكبر، وأقرب إلى اللون الأحمر والزاوية العلوية اليمنى - كانت هناك أسباب أكثر للنظر في هذه الـ IP كبوت.

على الخرائط الحرارية، يمكنك أيضًا المقارنة بين بوتك الحالي (**هذا البوت**) والبوتات الأخرى التي هاجمت التطبيق نفسه خلال الـ 24 ساعة الماضية. إذا هاجم العديد من البوتات، سيتم عرض 30 من البوتات الأكثر شبه إجرامي فقط.

الخرائط الحرارية:

* **الأداء** يُظهر أداء البوتات الحالية والأخرى التي تم اكتشافها بما في ذلك عدم فريدة الطلبات، والطلبات المجدولة، والطلبات في الثانية، وفترة الطلب.
* **السلوك** يُظهر درجة السلوك المشبوه للبوتات الحالية والأخرى التي تم اكتشافها بما في ذلك درجة السلوك المشبوه، وعدد الطلبات إلى النقاط النهائية الحرجة أو الحساسة، والطلبات في الثانية وعدد مكتشفات البوتات التي اكتشفتها كـ بوتات.
* **أخطاء HTTP** يصور أخطاء واجهة برمجة التطبيقات التي تسببها نشاطات البوت بما في ذلك عدد النقاط النهائية المختلفة التي يستهدفونها، وعدد الطلبات غير الآمنة التي يقدمونها، وطلباتهم في الثانية، وعدد رموز الاستجابة للأخطاء التي يتلقونها.

تتضمن كل خريطة حرارية تفاصيل وصف حجم فقاعتها، لونها ومعنى موقعها (استخدم **إظهار المزيد**). يمكنك التكبير في خريطة الحرارة عن طريق رسم مستطيل حول المنطقة المطلوبة.

تقوم وحدة **الوقاية من سوء استخدام واجهة برمجة التطبيقات** بتجميع مرور العميل إلى أنماط URL. قد يحتوي نموذج الـ URL على الأجزاء التالية:

| الجزء | يحتوي على | مثال |
|---|---|---|
| الحساس | أجزاء الـ URL التي توفر الوصول إلى وظائف التطبيق الحرجة أو الموارد، مثل لوحة الإدارة. يجب الاحتفاظ بها سرية وتحديدها للأفراد المعتمدين فقط لمنع انتهاك الأمان المحتمل. | `wp-admin` |
| المعرّف | معرفات مختلفة مثل المعرفات الرقمية، UUIDs، الخ. | - |
| الثابت | المجلدات التي تحتوي على ملفات ثابتة من أنواع مختلفة. | `images`, `js`, `css` |
| الملف | أسماء الملفات الثابتة. | `image.png` |
| الاستعلام | معلمات الاستعلام. | - |
| المصادقة | المحتوى المتعلق بنقاط النهاية للمصادقة/التفويض. | - |
| اللغة | أجزاء متعلقة باللغة. | `en`, `fr` |
| فحص الصحة | المحتوى المتعلق بنقاط النهاية لفحص الصحة. | - |
| التباين | يتم وضع علامة على الجزء كـ التباين إذا كان من المستحيل نسبها إلى الفئات الأخرى. جزء متغير من مسار الـ URL. | - |

## العمل مع القائمة الاستثنائية

لتعليم بعض عناوين الـ IP المرتبطة بالبوتات المشروعة أو الزاحفين لتجنب حظرها بواسطة الوقاية من سوء استخدام واجهة برمجة التطبيقات، استخدم [**القائمة الاستثنائية**](../api-abuse-prevention/overview.md#exception-list).

تضيف عنوان الـ IP أو النطاق إلى القائمة الاستثنائية وتحدد التطبيق المستهدف: هذا يتسبب في أن أي طلبات من هذه العناوين إلى التطبيق المستهدف لن تؤدي إلى وضع علامة على هذه العناوين كبوتات خبيثة ولن يتم إضافتها إلى [القائمة السوداء](../user-guides/ip-lists/overview.md) أو [القائمة الرمادية](../user-guides/ip-lists/overview.md) بواسطة الوقاية من سوء استخدام واجهة برمجة التطبيقات.

هناك طريقتين لإضافة عناوين الـ IP إلى القائمة الاستثنائية:

* من قسم **الوقاية من سوء استخدام واجهة برمجة التطبيقات** → علامة التبويب **القائمة الاستثنائية** عبر **إضافة استثناء**. هنا، بالإضافة إلى الـ IP والشبكات الفرعية، يمكنك إضافة المواقع وأنواع المصدر التي يجب تجاهلها بواسطة الوقاية من سوء استخدام واجهة برمجة التطبيقات.

    ![الوقاية من سوء استخدام واجهة برمجة التطبيقات - إضافة عناصر من داخل القائمة الاستثنائية](../images/about-wallarm-waf/abi-abuse-prevention/exception-list-add-from-inside.png)

* من قسم **الهجمات**: استخدم مفتاح البحث `api_abuse` أو حدد `الوقاية من سوء الاستخدام من واجهة برمجة التطبيقات` من فلتر **النوع**، ثم توسع الحدث المطلوب وانقر على **إضافة إلى القائمة الاستثنائية**.

    ![الوقاية من سوء استخدام واجهة برمجة التطبيقات - إضافة عناصر من داخل القائمة الاستثنائية](../images/about-wallarm-waf/abi-abuse-prevention/exception-list-add-from-event.png)

عند إضافة عنوان الـ IP إلى القائمة الاستثنائية، يتم إزالة العنوان تلقائيًا من [القائمة السوداء](../user-guides/ip-lists/overview.md) أو [القائمة الرمادية](../user-guides/ip-lists/overview.md)، ولكن فقط إذا تمت إضافته هناك بواسطة الوقاية من سوء استخدام واجهة برمجة التطبيقات نفسها (لديه سبب `البوت`).

!!! info "حظر أنواع هجمات أخرى من IP"
    إذا أنتج عنوان IP من القائمة الاستثنائية [أنواع هجمات](../attacks-vulns-list.md) أخرى، مثل هجمات قوة التجاوز أو التحقق من الإدخال وغيرها، تمنع Wallarm مثل هذه الطلبات.

بشكل افتراضي، يتم إضافة الـ IP إلى القائمة الاستثنائية إلى الأبد. يمكنك تغيير هذا وتعيين الوقت الذي يجب فيه إزالة العنوان من القائمة الاستثنائية. يمكنك أيضًا إزالة العنوان من الاستثناءات فورًا في أي لحظة.

توفر علامة التبويب **القائمة الاستثنائية** البيانات التاريخية - يمكنك عرض العناصر التي كانت موجودة في القائمة ضمن الفترة الزمنية المحددة في الماضي.

## العمل مع الاستثناءات لعناوين الـ URL المستهدفة والطلبات المحددة

بالإضافة إلى وضع علامة على IPs البوتات الجيدة عبر  [القائمة الاستثنائية](#working-with-exception-list)، يمكنك تعطيل حماية البوت سواء للـ URLs التي تستهدفها الطلبات أو لأنواع الطلبات المعينة، على سبيل المثال، للطلبات التي تحتوي على رؤوس محددة.

لاحظ أن مقارنة بتكوين الوقاية من سوء استخدام واجهة برمجة التطبيقات الأخرى، يتم تكوين هذه القدرة **ليس** ضمن ملف تعريف الوقاية من سوء استخدام واجهة برمجة التطبيقات، ولكن بشكل منفصل - بمساعدة قاعدة [**تعيين وضع الوقاية من سوء استخدام واجهة برمجة التطبيقات**](#_5).