# نظرة عامة على اكتشاف الواجهة البرمجية للتطبيق (API) <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

يقوم وحدة **اكتشاف الواجهة البرمجية للتطبيق (API)** في منصة Wallarm ببناء قائمة لواجهة التطبيق البرمجية REST API الخاصة بتطبيقك بناءً على استخدام الAPI الفعلي. تقوم الوحدة بتحليل طلبات المرور الواقعية باستمرار وتبني قائمة الAPI بناءً على نتائج التحليل.

تشمل قائمة الAPI المبنية العناصر التالية:

* نقاط نهاية الAPI
* طرق الطلب (GET, POST، وغيرها)
* متطلبات ووسائط GET, POST، ومعلمات الرأس بما في ذلك:
    * [النوع/التنسيق](./exploring.md#parameter-format-and-data-type) للبيانات المرسلة في كل معلم
    * التاريخ والوقت الذي تم فيه تحديث معلومات المعلم آخر مرة

![النقاط المكتشفة بواسطة اكتشاف الAPI](../images/about-wallarm-waf/api-discovery/discovered-api-endpoints.png)

## المشاكل التي يعالجها اكتشاف الAPI

**بناء قائمة API فعلية وكاملة** هو المشكلة الرئيسية التي تعالجها وحدة اكتشاف الAPI.

الحفاظ على قائمة الAPI محدثة هو مهمة صعبة. هناك فرق متعددة تستخدم واجهات API مختلفة ومن الشائع أن يتم استخدام أدوات وعمليات مختلفة لإنتاج وثائق الAPI. ونتيجة لذلك، تواجه الشركات صعوبة في فهم الAPIs التي لديها، البيانات التي تكشف عنها وامتلاك وثائق API محدثة.

بما أن وحدة اكتشاف الAPI تستخدم المرور الواقعي كمصدر بيانات، فإنها تساعد على الحصول على وثائق API محدثة وكاملة بما في ذلك جميع نقاط النهاية التي تقوم بالفعل بمعالجة الطلبات.

**بما أن لديك قائمة الAPI المكتشفة من Wallarm، يمكنك**:

* الحصول على رؤية كاملة على كل ممتلكات الAPI بما في ذلك قائمة الAPIs [الخارجية والداخلية](exploring.md#distinguish-external-and-internal-apis).
* رؤية البيانات التي [تدخل إلى الAPIs](exploring.md#viewing-endpoint-parameters).
* الحصول على قائمة نقاط النهاية مع الثغرات الأمنية المفتوحة.
* الحصول على قائمة التهديدات التي وقعت خلال الـ7 أيام الماضية لأي نقطة نهاية API معينة.
* تصفية الAPIs التي تعرضت للهجوم فقط، وترتيبها حسب عدد الضربات.
* تصفية الAPIs التي تستهلك وتحمل [بيانات حساسة](#sensitive-data-detection).
* عرض ملخص مرئي حول بنية قائمة الAPI والمشاكل على [لوحة القيادة](dashboard.md) المريحة.
* فهم أي نقاط نهاية من المرجح [أكثر](risk-score.md) لتكون هدفًا للهجوم.
* العثور على [APIs ظلية، يتيمة وزومبي](rogue-api.md).
* [تتبع التغييرات](track-changes.md) في API التي حدثت خلال الفترة الزمنية المحددة.
* تصفية نقاط نهاية الAPI حسب حالة الحماية التلقائية المغلقة [BOLA](bola-protection.md).
* تزويد المطورين ب[الوصول](../user-guides/settings/users.md#user-roles) إلى قائمة الAPI المبنية لمراجعتها وتنزيلها.

## كيف يعمل اكتشاف الAPI؟

يعتمد اكتشاف الAPI على إحصائيات الطلب ويستخدم خوارزميات معقدة لتوليد مواصفات API محدثة بناءً على استخدام الAPI الفعلي.

### معالجة المرور

يستخدم اكتشاف الAPI نهجًا مختلطًا لإجراء التحليل محليًا وفي السحابة. يتيح هذا النهج [عملية أولية للخصوصية](#security-of-data-uploaded-to-the-wallarm-cloud) حيث يتم الاحتفاظ ببيانات الطلب والبيانات الحساسة محليًا بينما يتم استخدام قوة السحابة لتحليل الإحصائيات:

1. يقوم اكتشاف الAPI بتحليل المرور المشروع محليًا. تحلل Wallarm النقاط التي يتم إجراء الطلبات عليها والمعلمات التي يتم تمريرها.
1. وفقًا لهذه البيانات، يتم إجراء الإحصائيات وإرسالها إلى السحابة.
1. تقوم سحابة Wallarm بتجميع الإحصائيات الواردة وبناء [وصف الAPI](exploring.md) على أساسها.

    !!! معلومة "كشف الضوضاء"
        يتم [تحديد الطلبات النادرة أو المنفردة كضوضاء](#noise-detection) ولا تتضمن في قائمة الAPI.

### كشف الضوضاء

يعتمد كشف الضوضاء في وحدة اكتشاف الAPI على معاملين رئيسيين للمرور:

* استقرار نقطة النهاية - يجب تسجيل ما لا يقل عن 5 طلبات خلال 5 دقائق من لحظة الطلب الأول إلى نقطة النهاية.
* استقرار المعلم - يجب أن تكون نسبة حدوث المعلم في الطلبات إلى نقطة النهاية أكثر من 1 بالمئة.

ستعرض قائمة الAPI نقاط النهاية والمعلمات التي تجاوزت هذه الحدود. الوقت اللازم لبناء قائمة الAPI الكاملة يعتمد على تنوع المرور وشدته.

أيضًا، يقوم اكتشاف الAPI بتصفية الطلبات بالاعتماد على معايير أخرى:

* يتم معالجة الطلبات التي يرد عليها الخادم في نطاق 2xx فقط.
* الطلبات التي لا تتوافق مع مبادئ تصميم الREST API لا يتم معالجتها. يتم ذلك عن طريق التحكم في معلم الرأس `Content-Type` للردود: إذا لم يحتوي معلم `Content-Type` على `application` كنوع و`json` كنونوع فرعي، يُعتبر هذا الطلب غير REST API ويتم تصفيته. مثال على رد REST API: `Content-Type: application/json;charset=utf-8`. إذا لم يكن المعلم موجودًا، يقوم اكتشاف الAPI بتحليل الطلب.
* يتم تجاهل الحقول القياسية مثل `Accept` وما إلى ذلك.

### كشف البيانات الحساسة

يكتشف اكتشاف الAPI ويبرز البيانات الحساسة التي يتم استهلاكها ونقلها بواسطة APIs الخاصة بك:

* بيانات فنية مثل عناوين IP وMAC
* بيانات تسجيل الدخول مثل المفاتيح السرية وكلمات المرور
* البيانات المالية مثل أرقام بطاقات البنك
* البيانات الطبية مثل رقم ترخيص الطبي
* المعلومات الشخصية القابلة للتعريف (PII) مثل الاسم الكامل، رقم الجواز أو رقم الضمان الاجتماعي

### الأمان للبيانات المرفوعة إلى سحابة Wallarm

يقوم اكتشاف الAPI بتحليل معظم المرور محليًا. ترسل الوحدة إلى سحابة Wallarm نقاط النهاية المكتشفة فقط، أسماء المعلمات ومختلف البيانات الإحصائية (وقت الوصول، عددها، إلخ) يتم نقل جميع البيانات عبر قناة آمنة: قبل تحميل الإحصائيات إلى سحابة Wallarm، تقوم وحدة اكتشاف الAPI بتجزئة قيم معلمات الطلب باستخدام خوارزمية [SHA-256](https://en.wikipedia.org/wiki/SHA-2).

من جانب السحابة، يتم استخدام البيانات المُجزَّأة للتحليل الإحصائي (على سبيل المثال، عند تحديد عدد الطلبات بمعلمات متطابقة).

البيانات الأخرى (قيم نقاط النهاية، طرق الطلب، وأسماء المعلمات) لا يتم تجزئتها قبل تحميلها إلى سحابة Wallarm، لأنه لا يمكن استعادة التجزئات إلى حالتها الأصلية مما سيجعل بناء قائمة الAPI مستحيلًا.

!!! تحذير "مهم"
    لا ترسل Wallarm قيم المعلمات المحددة إلى السحابة. يتم إرسال نقاط النهاية، أسماء المعلمات والإحصائيات عليها فقط.

## فيديو توضيحي لاكتشاف الAPI

شاهد فيديو توضيحي لاكتشاف الAPI:

<div class="video-wrapper">
  <iframe width="1280" height="720" src="https://www.youtube.com/embed/0bRHVtpWkJ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

## التحقق من اكتشاف الAPI في ملعب الاختبار

لتجربة الوحدة حتى قبل التسجيل ونشر العقدة في بيئتك، تعرف على اكتشاف الAPI في [ملعب اختبار Wallarm](https://my.us1.wallarm.com/playground).

في الملعب، يمكنك الوصول إلى واجهة اكتشاف الAPI كما لو كانت مليئة بالبيانات الحقيقية وبالتالي تعلم وتجربة كيف تعمل الوحدة، والحصول على بعض الأمثلة المفيدة لاستخدامها في الوضع القرائي فقط.

![اكتشاف الAPI – بيانات العينة](../images/about-wallarm-waf/api-discovery/api-discovery-sample-data.png)

## تمكين وتكوين اكتشاف الAPI

لبدء استخدام اكتشاف الAPI، قم بتمكينه وتكوينه كما هو موضح في [إعداد اكتشاف الAPI](setup.md).