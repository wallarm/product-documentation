# شادو، يتيم، زومبي API <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

تتعرف وحدة [اكتشاف API](overview.md) بشكل تلقائي على واجهات برمجة التطبيقات من نوع شادو ويتيم وزومبي بمقارنة التخصيصات المرفوعة بالحركة المرورية الفعلية.

|نوع Rogue API | ما هو؟ |
|--|--|
| [شادو API](#shadow-api) | واجهة برمجة التطبيقات غير الموثقة التي توجد ضمن بنية تحتية لمنظمة دون تصريح أو إشراف صحيح.|
| [يتيم API](#orphan-api) | واجهة برمجة التطبيقات الموثقة التي لا تتلقى حركة مرور. |
| [زومبي API](#zombie-api) | واجهات برمجة التطبيقات التي تم إهمالها والتي يفترض الجميع أنه تم تعطيلها ولكنها ما زالت تُستخدم فعليًا. |

![اكتشاف API - تسليط الضوء وتصفية Rogue API](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

## رصد Rogue APIs بشكل ساعي

يمكنك رفع تخصيصك لأداء مقارنة فورية لمحتواه مع النقاط النهائية التي كشف عنها اكتشاف API حتى اللحظة. ولكن يمكن أن يتغير شيئان بمرور الزمن:

* جرد API الفعلي لديك (سيتم الكشف عن التغييرات بواسطة اكتشاف API)
* تخصيصك الخاص (يمكن وصول نسخ جديدة)

لذا لضبط رصد مستمر لـ Rogue API، لديك خيار المقارنة **على أساس ساعي**. لاستخدام الخيار، يجب أن يتم رفع التخصيص من URL. سيتم تحديث التخصيص نفسه قبل كل مقارنة.

لضبط رصد Rogue APIs على أساس ساعي:

1. انتقل إلى قسم **مواصفات API** في الـ[US](https://us1.my.wallarm.com/api-specifications) أو الـ[EU](https://my.wallarm.com/api-specifications) Cloud.
1. انقر على **رفع تخصيص**.
1. اختر تخصيص للرفع. يجب أن يكون بتنسيق OpenAPI 3.0 JSON أو YAML.
1. ضبط معايير المقارنة:

    * التطبيقات والمضيفين - سيتم المقارنة للنقاط النهائية المتعلقة بالتطبيقات/المضيفين المختارين فقط. إذا اخترت **مقارنة مع جميع التطبيقات / المضيفين التي تم اكتشافها حاليًا وفي المستقبل**، سيتم تضمين جميع المضيفين (للتطبيقات المختارة) المعروفة الآن وجميع المضيفين التي سيتم اكتشافها في المستقبل في المقارنة.

        يمكنك تغيير إعدادات المقارنة في أي وقت لاحق - بعد ذلك سيتم إعادة القيام بالمقارنة وتقديم نتائج جديدة.

    * اختر الرفع من URL. إذا لزم الأمر، يمكنك تحديد رمز للتوثيق.
    * اترك **أداء مقارنة منتظمة** خيارًا محددًا (هو بشكل افتراضي).

    ![اكتشاف API - مواصفات API - رفع مواصفات API للعثور على Rogue APIs](../images/about-wallarm-waf/api-discovery/api-discovery-specification-upload.png)

1. ابدأ الرفع.

بمجرد الانتهاء من الرفع، سيتم عرض عدد Rogue (شادو، يتيم وزومبي) APIs لكل تخصيص في قائمة **مواصفات API**.

![قسم مواصفات API](../images/about-wallarm-waf/api-discovery/api-discovery-specifications.png)

كما سيتم عرض Rogue APIs في قسم **اكتشاف API**. استخدم فلتر **Rogue APIs** لرؤية شادو، يتيم و/أو زومبي APIs المتعلقة بالمقارنات المختارة وتصفية النقاط النهائية المتبقية.

![اكتشاف API - تسليط الضوء وتصفية Rogue API](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

في التفاصيل الخاصة بمثل هذه النقاط النهائية، في قسم **نزاعات المواصفات**، سيتم الإشارة إلى تخصيص/ات التي تم بمساعدتها اكتشاف شادو/زومبي/يتيم.

يتم عرض شادو APIs أيضًا بين النقاط النهائية الأكثر خطورة في [لوحة تحكم اكتشاف API](dashboard.md).

## العثور على Rogue APIs عن طريق مقارنة لمرة واحدة

يمكنك رفع التخصيص لأداء مقارنة فورية لمرة واحدة لمحتواه مع النقاط النهائية التي كشف عنها اكتشاف API حتى اللحظة. للقيام بذلك، في إعدادات المقارنة، اختر للرفع من الجهاز المحلي أو قم بإلغاء تحديد خيار **أداء مقارنة منتظمة** للتخصيص المرفوع من URL.

فكر في الآتي:

* يمكنك إعادة بدء المقارنة في أي وقت عبر قائمة التخصيص → **إعادة بدء المقارنة**.
* يمكنك تنزيل التخصيص الذي تم رفعه سابقًا عبر **مواصفات API** → نافذة تفاصيل التخصيص → **تنزيل التخصيص**.

## نسخ المواصفات و Zombie APIs

على خلاف شادو ويتيم APIs، يتطلب زومبي APIs مقارنة لنسخ مختلفة من المواصفات:

* في حالة [المقارنة الأوتوماتيكية الساعية](#monitor-rogue-apis-on-hourly-basis)، فقط ضع النسخة الجديدة في URL الذي تستضيف فيه المواصفات - سيتم معالجتها حسب الجدول الساعي أو فورًا إذا قمت باختيار **إعادة بدء المقارنة** من قائمة التخصيص.
* في حالة عدم استخدام المقارنة العادية:

    * إذا كنت ترفع من URL، غير هذا الURL إلى واحد جديد أو ضع محتوى جديد في نفس URL.
    * إذا كنت ترفع من الجهاز المحلي، افتح نافذة المواصفات في وحدة تحكم Wallarm، ثم ارفع ملفًا جديدًا أو نفس الملف بمحتوى جديد.

    ثم احفظ المواصفات، ومن قائمتها، اختر **إعادة بدء المقارنة**.

## العمل مع مواصفات متعددة

في حالة استخدامك لعدة مواصفات منفصلة لوصف جوانب مختلفة من واجهة برمجة التطبيقات الخاصة بك، يمكنك رفع عدة مواصفات أو جميعها إلى Wallarm.

في قسم **اكتشاف API**، استخدم فلتر **مقارنة بـ...** لاختيار مقارنات المواصفات - فقط بالنسبة لهم ستتم تمييز Rogue APIs بعلامات خاصة في عمود **المشكلات**.

![اكتشاف API - تسليط الضوء وتصفية Rogue API](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

## الحصول على إشعارات

للحصول على إشعارات فورية حول اكتشاف Rogue APIs جديدة لنظام [SIEM، SOAR، نظام إدارة السجلات، أو المراسل](../user-guides/settings/integrations/integrations-intro.md)، في قسم **المحفزات** من وحدة تحكم Wallarm، قم بتكوين واحد أو أكثر من المحفزات مع شرط **تم اكتشاف Rogue API**.

يمكنك الحصول على رسائل حول اكتشاف شادو، يتيم أو زومبي APIs جديدة أو عن جميعها. يمكنك أيضًا تضييق الإشعارات حسب التطبيق أو المضيف الذي تريد مراقبته وحسب المواصفات المستخدمة لاكتشافها.

**كيف تأتي الإشعارات**
    
* كل Rogue API جديد يتسبب في رسالة إشعار واحدة
* إذا كنت قد تلقيت بالفعل إشعارًا حول بعض Rogue API، لن يتم إرساله مرة أخرى، بغض النظر عن عدد مرات تشغيل المقارنة
* إذا قمت بتحديث إعدادات التخصيص المرفوع، يتم إعادة إرسال الإشعارات حول جميع **اليتيم** APIs (لا ينطبق هذا على شادو أو زومبي APIs)

**مثال على المحفز: إشعار حول اكتشاف نهايات شادو جديدة في Slack**

في هذا المثال، إذا وجد اكتشاف API نهايات جديدة غير مدرجة في `التخصيص-01` (شادو APIs)، يتم إرسال الإشعار حول هذا إلى قناة Slack المُعدة الخاصة بك.

![محفز تم اكتشاف Rogue API](../images/user-guides/triggers/trigger-example-rogue-api.png)

**لاختبار المحفز:**

1. اذهب إلى وحدة تحكم Wallarm → **التكاملات** في الـ[US](https://us1.my.wallarm.com/integrations/) أو الـ[EU](https://my.wallarm.com/integrations/) cloud، وقم بتكوين [التكامل مع Slack](../user-guides/settings/integrations/slack.md).
1. في قسم **اكتشاف API**، قم بتصفية النقاط النهائية حسب مضيف API الذي تختاره، ثم قم بتنزيل النتائج كتخصيص واسمه `التخصيص-01`.
1. في قسم **مواصفات API**، قم برفع `التخصيص-01` للمقارنة.
1. في قسم **المحفزات**، أنشئ محفز كما هو موضح أعلاه.
1. احذف بعض النقاط النهائية من ملف `التخصيص-01` المحلي الخاص بك.
1. في **مواصفات API**، أعد رفع `التخصيص-01` الخاص بك للمقارنة.
1. تحقق من أن النقطة النهائية الخاصة بك قد حصلت على علامة شادو API في عمود **المشكلات**.
1. تحقق من الرسائل في قناة Slack الخاصة بك مثل:

    ```
    [wallarm] تم اكتشاف نقطة نهائية جديدة شادو في لواجهة برمجة التطبيقات الخاصة بك

    نوع الإشعار: api_comparison_result

    تم اكتشاف نقطة نهائية جديدة لـ GET example.com/users شادو في واجهة برمجة التطبيقات الخاصة بك.

        العميل: العميل-01
        السحابة: US

        التفاصيل:

          التطبيق: التطبيق-01
          api_host: example.com
          endpoint_path: /users
          http_method: GET
          type_of_endpoint: شادو
          رابط: https://my.wallarm.com/api-discovery?instance=1802&method=GET&q=example.com%2Fusers
          اسم التخصيص: التخصيص-01
    ```

## أنواع Rogue API والمخاطر

### شادو API

**شادو API**