# الواجهة البرمجية المظلية، اليتيمة، الزومبي <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

تحدد وحدة [اكتشاف الواجهة البرمجية](overview.md) تلقائيا الواجهات البرمجية الظلية، اليتيمة والزومبية من خلال مقارنة مواصفاتك المُرسلة مع حركة المرور الحية.

|نوع الواجهة البرمجية المارقة | ما هي؟ |
|--|--|
| [الواجهة البرمجية المظلية](#shadow-api) | واجهة برمجية غير مُدونة توجد ضمن بنية المنظمة بدون الترخيص أو الإشراف الصحيح|
| [الواجهة البرمجية اليتيمة](#orphan-api) | واجهة برمجية مُدونة لا تتلقى حركة مرور. |
| [الواجهة البرمجية الزومبي](#zombie-api) | الواجهات البرمجية التي تم التخلي عنها والتي يعتقد الجميع أنها تم تعطيلها ولكنها تستخدم في الواقع. |

![API Discovery - highlighting and filtering rogue API](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

## راقب الواجهات البرمجية المارقة كل ساعة

يمكنك تحميل مواصفاتك لتنفيذ مقارنة فورية لمحتواها مع النقاط النهائية التي تم كشفها بواسطة اكتشاف الواجهة البرمجية حتى اللحظة. ولكن يمكن أن تتغير شيئين مع مرور الزمن:

* فهرس الواجهة البرمجية الفعلي الخاص بك (سيتم كشف التغييرات بواسطة اكتشاف الواجهة البرمجية)
* مواصفاتك الخاصة (يمكن أن تصل نسخ جديدة)

لذا ، لإعداد الرصد المستمر للواجهات البرمجية المارقة ، لديك خيار المقارنة **كل ساعة**. لاستخدام الخيار ، يجب تحميل المواصفات من URL. ستتم تحديث المواصفات نفسها قبل كل مقارنة.

لإعداد الرصد للواجهات البرمجية المارقة كل ساعة:

1. انتقل إلى قسم **مواصفات الواجهة البرمجية** في [الغيمة الأمريكية](https://us1.my.wallarm.com/api-specifications) أو [الغيمة الأوروبية](https://my.wallarm.com/api-specifications).
1. انقر على **تحميل المواصفات**.
1. حدد مواصفات لتحميلها. يجب أن تكون بتنسيق OpenAPI 3.0 JSON أو YAML.
1. قم بتعيين معلمات المقارنة:

    * التطبيقات والمضيفين - سيتم فقط مقارنة النقاط النهائية الخاصة بالتطبيقات / المضيفين المحددين. إذا قمت باختيار **المقارنة مع جميع التطبيقات والمضيفين المكتشفين الحاليين والمستقبليين** ، ستتضمن جميع المضيفين (للتطبيقات المحددة) المعروفين الآن وجميع المضيفين الذين سيتم اكتشافهم في المستقبل في المقارنة.

        يمكنك تغيير إعدادات المقارنة في أي لحظة في وقت لاحق - بعد ذلك ستتم المقارنة مرة أخرى بتقديم نتائج جديدة.

    * اختر التحميل من URL. إذا لزم الأمر ، يمكنك تحديد رمز للمصادقة.
    * اترك خيار **تنفيذ المقارنة بانتظام** المحدد (وهو هكذا بشكل افتراضي).

    ![API Discovery - API Specifications - uploading API specification to find rogue APIs](../images/about-wallarm-waf/api-discovery/api-discovery-specification-upload.png)

1. ابدأ التحميل.

عند الانتهاء من التحميل ، سيتم عرض عدد الواجهات البرمجية المارقة (الظلية ، اليتيمة والزومبي) لكل مواصفة في قائمة **مواصفات الواجهة البرمجية**.

![API Specifications section](../images/about-wallarm-waf/api-discovery/api-discovery-specifications.png)

سيتم أيضًا عرض الواجهات البرمجية المارقة في قسم **اكتشاف الواجهة البرمجية**. استخدم مرشح **الواجهات البرمجية المارقة** لرؤية الواجهات البرمجية المظلية و / أو اليتيمة و / أو الزومبي فقط المتعلقة بالمقارنات المحددة وتصفية النقاط النهائية المتبقية.

![API Discovery - highlighting and filtering rogue API](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

في تفاصيل هذه النقاط النهائية ، في قسم **التعارضات المواصفات** ، سيتم الإشارة إلى المواصفات التي تم بمساعدتها كشف الواجهة المظلية / الزومبي / اليتيمة.

تتم أيضًا عرض الواجهات البرمجية المظلية بين النقاط النهائية الأكثر خطورة في [لوحة اكتشاف الواجهة البرمجية](dashboard.md).

## العثور على الواجهات البرمجية المارقة من خلال المقارنة مرة واحدة

يمكنك تحميل مواصفاتك لإجراء مقارنة فورية مرة واحدة لمحتواها مع النقاط النهائية التي تم كشفها بواسطة اكتشاف الواجهة البرمجية حتى اللحظة. للقيام بذلك ، في إعدادات المقارنة ، حدد للتحميل من الجهاز المحلي أو قم بإلغاء تحديد خيار **تنفيذ المقارنة بانتظام** للمواصفات المُرسلة من URL.

ضع في اعتبارك الآتي:

* يمكنك إعادة بدء المقارنة في أي وقت عبر قائمة المواصفات → **إعادة بدء المقارنة**.
* بإمكانك تنزيل المواصفات التي تم تحميلها سابقًا عبر **مواصفات الواجهة البرمجية** → نافذة تفاصيل المواصفات → **تنزيل المواصفات**.

## الإصدارات المواصفات والواجهات البرمجية الزومبي

بخلاف الواجهات البرمجية المظلية واليتيمة ، تتطلب الواجهات البرمجية الزومبية مقارنة الإصدارات المواصفات المختلفة:

* في حالة [المقارنة التلقائية كل ساعة](#monitor-rogue-apis-on-hourly-basis) ، فقط ضع الإصدار الجديد في URL حيث تستضيف مواصفاتك - ستتم معالجتها حسب الجدول الزمني الساعي أو فورا إذا اخترت **إعادة بدء المقارنة** من قائمة المواصفات.
* في الحالة عندما لا يتم استخدام المقارنة العادية:

    * إذا كان التحميل من URL ، قم بتغيير هذا URL إلى واحد جديد أو وضع محتوى جديد على نفس URL.
    * إذا كنت تقوم بالتحميل من الجهاز المحلي ، افتح مربع حوار المواصفات في واجهة المستخدم لـ Wallarm ، ثم قم بتحميل ملف جديد أو نفس الملف بمحتوى جديد.

    ثم احفظ المواصفات ، ومن قائمتها ، اختر **إعادة بدء المقارنة**.

## العمل مع مواصفات متعددة

في حالة استخدامك عدة مواصفات منفصلة لوصف جوانب مختلفة من الواجهة البرمجية الخاصة بك ، يمكنك تحميل عدة مواصفات أو جميعها إلى Wallarm.

في قسم **اكتشاف الواجهة البرمجية** ، استخدم مرشح **المقارنة مع...** لتحديد مقارنات المواصفات - فقط لهم ستتم تمييز الواجهات البرمجية المارقة بواسطة العلامات الخاصة في العمود **القضايا**.

![API Discovery - highlighting and filtering rogue API](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

## الحصول على الإخطارات

للحصول على إشعارات فورية حول الواجهات البرمجية المارقة التي تم اكتشافها حديثًا في [SIEM, SOAR, نظام إدارة السجلات أو المراسل](../user-guides/settings/integrations/integrations-intro.md) الخاص بك ، في قسم **المشغلات** من واجهة Wallarm ، قم بتكوين أحد المشغلات أو أكثر منها بشرط **تم اكتشاف واجهة برمجية مارقة**.

يمكنك الحصول على رسائل حول الواجهات البرمجية المظلية أو اليتيمة أو الزومبي المكتشفة حديثًا أو حول كل منها. يمكنك أيضا تضييق الإشعارات بواسطة التطبيق أو المضيف الذي ترغب في مراقبته وحسب المواصفات المستخدمة لاكتشافها.

**كيف تأتي الإشعارات**

* كل واجهة برمجية مارقة جديدة تكتشف تسبب 1 رسالة إخطار
* إذا كنت قد حصلت بالفعل على إشعار حول بعض الواجهات البرمجية المارقة ، فلا يتم إرسالها مرة أخرى ، مهما كان عدد مرات تشغيل المقارنة
* إذا قمت بتحديث إعدادات المواصفات المرسلة ، ستتم إعادة إرسال الإشعارات حول جميع الواجهات البرمجية **اليتيمة** (لا ينطبق هذا على الواجهات البرمجية الظلية أو الزومبي)

**مثال على مشغل: إشعار حول النقاط النهائية المظلية المكتشفة حديثًا في Slack**

في هذا المثال ، إذا وجدت وحدة اكتشاف الواجهة البرمجية نقاط نهاية جديدة غير مدرجة في `Specification-01` (الواجهات البرمجية المظلية) ، يتم إرسال الإشعار حول هذا إلى قناة Slack المكونة.

![Rogue API detected trigger](../images/user-guides/triggers/trigger-example-rogue-api.png)

**لاختبار المشغل:**

1. اذهب إلى واجهة المستخدم لـ Wallarm → **التكاملات** في [الغيمة الأمريكية](https://us1.my.wallarm.com/integrations/) أو [الغيمة الأوروبية](https://my.wallarm.com/integrations/) ، وقم بتكوين [التكامل مع Slack](../user-guides/settings/integrations/slack.md).
1. في قسم **اكتشاف الواجهة البرمجية** ، قم بتصفية النقاط النهائية بواسطة مضيف الواجهة البرمجية الخاص بك ، ثم قم بتنزيل النتائج كمواصفات واسمها `Specification-01`.
1. في قسم **مواصفات الواجهة البرمجية** ، قم بتحميل `Specification-01` للمقارنة.
1. في قسم **المشغلات** ، قم بإنشاء مشغل كما هو موضح أعلاه.
1. قم بحذف بعض النقاط النهائية من ملف `Specification-01` المحلي.
1. في **مواصفات الواجهة البرمجية** ، قم بإعادة تحميل `Specification-01` الخاص بك للمقارنة.
1. تحقق من علامة الواجهة البرمجية المظلية في العمود **القضايا**.
1. تحقق من الرسائل في قناة Slack الخاصة بك مثل:

    ```
    [wallarm] تم اكتشاف نقطة نهاية ظلية جديدة في الواجهة البرمجية الخاصة بك

    نوع الإشعار: نتيجة مقارنة الواجهة البرمجية

    تم اكتشاف نقطة النهاية الظلية الجديدة GET example.com/users في الواجهة البرمجية الخاصة بك.

        العميل: Client-01
        الغيمة: الأمريكية

        التفاصيل:

          التطبيق: Application-01
          مضيف الواجهة البرمجية: example.com
          المسار النهائي: /users
          طريقة http: GET
          نوع النقطة النهائية: ظلية
          الرابط: https://my.wallarm.com/api-discovery?instance=1802&method=GET&q=example.com%2Fusers
          اسم المواصفات: Specification-01
    ```

## أنواع الواجهات البرمجية المارقة والمخاطر

### الواجهة البرمجية المظلية

تشير **الواجهة البرمجية المظلية** إلى الواجهة البرمجية غير المُدونة التي توجد ضمن بنية المنظمة بدون الترخيص أو الإشراف الصحيح.

تعرض الواجهات البرمجية المظلية الأعمال للخطر، حيث يمكن للمهاجمين استغلالها للوصول إلى الأنظمة الحيوية، أو سرقة البيانات القيمة، أو تعطيل العمليات، مع تعقيد مزيد من حقيقة أن الواجهات البرمجية غالبًا ما تعمل كحُماة للبيانات الحساسة وأنه يمكن استغلال مجموعة من ثغرات OWASP API لتجاوز أمن الواجهة البرمجية.

من حيث المواصفات البرمجية الخاصة بك التي تم [تحميلها](#upload-specifications-and-set-comparison-parameters) ، الواجهة البرمجية الظلية هي النقطة النهائية المُقدمة في حركة المرور الفعلية (التي اكتشفتها وحدة اكتشاف الواجهة البرمجية) وليست مُقدمة في مواصفاتك.

عندما تجد الواجهات البرمجية المظلية مع Wallarm ، يمكنك تحديث المواصفات لتتضمن النقاط النهائية المفقودة ومن ثم تنفيذ أنشطة الرصد والأمان نحو فهرس الواجهة البرمجية في صورته الكاملة.

### الواجهة البرمجية اليتيمة

تشير **الواجهة البرمجية اليتيمة** إلى الواجهة البرمجية المُدونة التي لا تتلقى حركة مرور.

وجود الواجهات البرمجية اليتيمة يمكن أن يكون سببًا لعملية التحقق التي تتضمن:

* فحص إعدادات التحقق من حركة المرور لـ Wallarm لفهم ما إذا كانت الحركة لا تتلقى حقًا ، أو إذا كانت ببساطة غير مرئية لوحدات Wallarm لأنه تم نشرها بطريقة لا تمر جميع حركة المرور من خلالها (قد يكون هذا التوجيه غير الصحيح لحركة المرور ، أو أنه يتم تقديم بوابة ويب أخرى ونسيت وضع الوحدة عليها ، وهلم جرا).
* تحديد ما إذا كان ينبغي لبعض التطبيقات عدم تلقي أي حركة مرور على هذه النقاط النهائية المحددة أم أنه نوع من سوء التهيئة.
* اتخاذ قرار حول النقاط النهائية القديمة: المستخدمة في الإصدارات السابقة للتطبيق وليست مستخدمة في الحالي - هل يجب حذفها من المواصفات لتقليل جهد التحقق من الأمان.

### الواجهة البرمجية الزومبي

تشير **الواجهة البرمجية الزومبي** إلى الواجهات البرمجية التي تم التخلي عنها والتي يعتقد الجميع أنها تم تعطيلها ولكنها تستخدم في الواقع.

مخاطر الواجهة البرمجية الزومبي مشابهة لبقية الواجهة البرمجية غير المُدونة (الظلية) ولكن قد تكون أسوأ حيث أن السبب في التعطيل غالبًا ما يكون التصميمات غير الآمنة التي يسهل اختراقها.

من حيث المواصفات البرمجية الخاصة بك التي تم [تحميلها](#upload-specifications-and-set-comparison-parameters) ، الواجهة البرمجية الزومبي هي النقطة النهائية المُقدمة في الإصدار السابق من مواصفاتك ، غير المُقدمة في الإصدار الحالي (أي أنه كان هناك نية حذف هذه النقطة النهائية) ولكنها لا تزال مُقدمة في حركة المرور الفعلية (التي اكتشفتها وحدة اكتشاف الواجهة البرمجية).

العثور على الواجهة البرمجية الزومبي مع Wallarm قد يكون السبب في إعادة التحقق من برمجة الواجهة البرمجية للتطبيقات لتعطيل مثل هذه النقاط النهائية في الواقع.
