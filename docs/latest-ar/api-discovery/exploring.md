# استكشاف جرد واجهة برمجة التطبيقات <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

فور انشاء وحدة [اكتشاف واجهة برمجة التطبيقات](overview.md) لفهرس نهاياتك (جرد واجهة برمجة التطبيقات الخاص بك)، يُمكنك استكشافه في قسم **اكتشاف واجهة برمجة التطبيقات** في وحدة التحكم في Wallarm. تعلم من هذا المقال كيفية التنقيب عن البيانات المكتشفة.

## النهايات

استكشف جرد واجهة برمجة التطبيقات الذي تم اكتشافه باستخدام قسم **اكتشاف واجهة برمجة التطبيقات** في السحابة [الأمريكية](https://us1.my.wallarm.com/api-discovery) أو [الأوروبية](https://my.wallarm.com/api-discovery).

![النهايات المكشوفة بواسطة اكتشاف واجهة برمجة التطبيقات](../images/about-wallarm-waf/api-discovery/discovered-api-endpoints.png)

في كل مرة تفتح فيها قسم **اكتشاف واجهة برمجة التطبيقات**، ترى جميع النُهايات المكتشَفة و[التغييرات](track-changes.md) الخاصة بها للأسبوع الماضي. مع فلتر **التغييرات منذ**، يمكنك تغيير `الأسبوع الماضي` إلى أي فترة أخرى.

بشكل افتراضي، تُرتب النهايات حسب أسماء المضيف/النهاية (ومجمعة حسب المضيفين). إذا قمت بالترتيب حسب **الضربات** أو **الخطورة**، تزول المجموعة - للعودة إلى الافتراضي، انقر مرة أخرى على عمود المضيف/النهاية.

### خارجي مقابل داخلي

النهايات المتاحة من الشبكة الخارجية هي الاتجاهات الرئيسية للهجمات. وبالتالي، من المهم رؤية ما هو متاح من الخارج وإيلاء أهمية أولية لهذه النهايات.

تقوم Wallarm تلقائيًا بتقسيم واجهات برمجة التطبيقات المكتشفة إلى خارجية وداخلية. يُعتبر المضيف بجميع نهاياته داخليًا إذا كان موجودًا على:

* عنوان IP خاص أو عنوان IP محلي
* نطاق عام على أعلى مستوى (على سبيل المثال: localhost، dashboard، إلخ.)

في الحالات المتبقية، يُعتبر المضيفون خارجيون.

بشكل افتراضي، يتم عرض قائمة بجميع مضيفي واجهة برمجة التطبيقات (الخارجية والداخلية). في جرد واجهة برمجة التطبيقات المُنشأ، يمكنك عرض واجهات برمجة التطبيقات الداخلية والخارجية بشكل منفصل. للقيام بذلك، انقر **خارجي** أو **داخلي**.

### التصفية

من بين مجموعة واسعة من فلاتر نهايات واجهة برمجة التطبيقات، يمكنك اختيار الفلاتر التي تتوافق مع غرض تحليلك، على سبيل المثال:

* النهايات التي تعرضت للهجوم فقط التي يمكنك ترتيبها حسب عدد الضربات.
* العثور على النهايات الأكثر ضعفًا التي تتميز بمعالجة البيانات الحساسة والثغرات النشطة ذات [مستوى الخطورة](risk-score.md) العالي. يسمح استغلال الثغرات ذات مستوى الخطورة العالي للمهاجمين بأداء العديد من الأفعال الخبيثة مع النظام بما في ذلك سرقة البيانات الحساسة التي تعالجها/تخزنها النهاية.
* العثور على [النهايات الشريدة](rogue-api.md): الخفية، اليتيمة والزومبي.
* العثور على النهايات التي تغيرت أو تم اكتشافها حديثًا في الأسبوع الماضي والتي تعالج بيانات PII. يمكن أن يساعد هذا النوع من الطلبات في البقاء على اطلاع بالتغييرات الحرجة في واجهات برمجة التطبيقات الخاصة بك.
* العثور على النهايات المستخدمة لتحميل البيانات إلى مخدمك بواسطة مكالمات PUT أو POST. نظرًا لأن هذه النهايات تعد هدفًا متكررًا للهجمات، فيجب أن تكون مؤمنة جيدًا. باستخدام هذا النوع من الطلبات يمكنك التحقق من أن النهايات معروفة للفريق ومُؤمَنة جيدًا ضد الهجمات.
* العثور على النهايات التي تعالج بيانات بطاقة البنك للعملاء. بهذا الطلب، يُمكنك التحقق من أن البيانات الحساسة تُعالج بواسطة نهايات محمية فقط.
* العثور على النهايات لنسخة واجهة برمجة التطبيقات المستهلكة (على سبيل المثال بالبحث عن `/v1`) والتأكد من عدم استخدامها من قبل العملاء.

يُمكن تصدير جميع البيانات المفلترة في OpenAPI v3 لتحليل إضافي.

## تفاصيل النهاية

<a name="params"></a>بالنقر على النهاية، يُمكنك أيضًا العثور على تفاصيل النهاية، بما في ذلك إحصائيات الطلب، الرؤوس، البارامترات المطلوبة والاختيارية مع أنواع البيانات ذات الصلة:

![بارامترات الطلب المكتشفة بواسطة اكتشاف واجهة برمجة التطبيقات](../images/about-wallarm-waf/api-discovery/discovered-request-params.png)

تشمل كل معلومة بارامتر على:

* اسم البارامتر وجزء الطلب الذي ينتمي إليه هذا البارامتر
* معلومات حول التغييرات في البارامتر (جديد، غير مستخدم)
* وجود ونوع البيانات الحساسة التي يتم نقلها بهذا البارامتر، بما في ذلك:

    * بيانات فنية مثل عناوين IP وعناوين MAC
    * بيانات اعتماد تسجيل الدخول مثل المفاتيح السرية وكلمات المرور
    * بيانات مالية مثل أرقام بطاقات البنك
    * بيانات طبية مثل رقم الترخيص الطبي
    * معلومات تعريف شخصية (PII) مثل الاسم الكامل، رقم الجواز أو SSN

* [النوع/التنسيق](#parameter-format-and-data-type) للبيانات المُرسلة في هذا البارامتر
* التاريخ والوقت الذي تم فيه تحديث معلومات البارامتر آخر مرة

### التنسيق ونوع البيانات

في عمود **النوع**، تُشير Wallarm إلى تنسيق البيانات المُحدد من خلال تحليل الحركة أو، إذا لم يكن محددًا، نوع بيانات عام.

تحاول Wallarm اكتشاف تنسيقات بيانات متنوعة مثل `Int32`, `Int64`, `Float`, `Double`, `Datetime`, `IPv4`/`IPv6`، من بين أخرى. إذا لم تتوافق قيمة مع أي تنسيق بيانات معروف، تُصنف Wallarm القيمة تحت نوع بيانات عام، مثل `Integer`, `Number`, `String`, أو `Boolean`.

تتيح هذه البيانات التحقق من أن القيم بالتنسيق المتوقع مُرسلة في كل بارامتر. يمكن أن تكون عدم التوافقات نتيجة لهجوم أو مسح لواجهة برمجة التطبيقات، على سبيل المثال:

* يتم تمرير القيم ​​`String` إلى الحقل مع `IP`
* يتم تمرير القيم `Double` إلى الحقل حيث ينبغي أن يكون هناك قيمة لا تزيد عن `Int32`

### التباين

يمكن أن تشمل عناوين URL عناصر متنوعة، مثل هوية المستخدم، مثل:

* `/api/articles/author/author-a-0001`
* `/api/articles/author/author-a-1401`
* `/api/articles/author/author-b-1401`

تُوحد وحدة **اكتشاف واجهة برمجة التطبيقات** هذه العناصر في تنسيق `{parameter_X}` في مسارات النهايات، لذلك بالمثال أعلاه لن يكون لديك 3 نهايات، ولكن بدلاً من ذلك سيكون هناك واحدة:

* `/api/articles/author/{parameter_1}`

انقر على النهاية لتوسيع بارامتراتها وعرض النوع الذي تم اكتشافه تلقائيًا للبارامتر المتنوع.

![اكتشاف واجهة برمجة التطبيقات - التباين في المسار](../images/about-wallarm-waf/api-discovery/api-discovery-variability-in-path.png)

لاحظ أن الخوارزمية تحلل الحركة الجديدة. إذا في لحظة ما رأيت عناوين، يجب أن تُوحد لكن هذا لم يحدث بعد، امنحها وقتًا. بمجرد وصول المزيد من البيانات، ستُوحد النظام للنهايات التي تطابق النمط المكتشف حديثًا مع الكمية المناسبة من العناوين المطابقة.

## مراقبة الهجمات على نهايات واجهة برمجة التطبيقات

يتم عرض عدد الهجمات على نهايات واجهة برمجة التطبيقات لآخر 7 أيام في عمود **الضربات**. يمكنك طلب عرض النهايات المهاجمة فقط بتحديد في الفلاتر: **الآخرين** → **النهايات المهاجمة**.

لرؤية الهجمات على بعض النهايات، انقر على الرقم في عمود **الضربات**:

![نهاية واجهة برمجة التطبيقات - فتح الأحداث](../images/about-wallarm-waf/api-discovery/endpoint-open-events.png)

سيتم عرض قسم **الهجمات** مع [تطبيق الفلتر](../user-guides/search-and-filters/use-search.md):

```
attacks last 7 days endpoint_id:<YOUR_ENDPOINT_ID>
```

يُمكنك أيضًا نسخ رابط URL لبعض النهايات إلى الحافظة واستخدامه للبحث عن الأحداث. للقيام بذلك، في قائمة هذه النهاية حدد **نسخ URL**.

## إنشاء قواعد لنهايات واجهة برمجة التطبيقات

يُمكنك بسرعة إنشاء [قاعدة مخصصة جديدة](../user-guides/rules/rules.md) من أي نهاية من جرد واجهة برمجة التطبيقات:

1. في قائمة هذه النهاية حدد **إنش