# منع إساءة استخدام واجهة برمجة التطبيقات <a href="../subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

يقدم **وحدة منع إساءة استخدام واجهة برمجة التطبيقات** في منصة والارم كشفًا وتخفيفًا للبوتات التي تقوم بإساءة استخدام واجهة برمجة التطبيقات مثل استخدام بيانات الاعتماد بشكل مكرر، إنشاء حسابات زائفة، استخراج المحتوى وأفعال ضارة أخرى تستهدف واجهات برمجة التطبيقات الخاصة بك.

## التهديدات الآلية التي يمنعها منع إساءة استخدام واجهة برمجة التطبيقات

تكتشف **وحدة منع إساءة استخدام واجهة برمجة التطبيقات** الأنواع التالية من البوتات بشكل افتراضي:

* [إساءة استخدام واجهة برمجة التطبيقات](../attacks-vulns-list.md#api-abuse)
* [استيلاء الحسابات](../attacks-vulns-list.md#api-abuse-account-takeover)
* [زحف الأمان](../attacks-vulns-list.md#api-abuse-security-crawlers)
* [الاستخراج](../attacks-vulns-list.md#api-abuse-scraping)

خلال [إعداد ملف تعريف إساءة استخدام واجهة برمجة التطبيقات](../user-guides/api-abuse-prevention.md#creating-api-abuse-profile)، يمكنك تكوين **وحدة منع إساءة استخدام واجهة برمجة التطبيقات** للحماية من جميع أنواع البوتات أو تحديد الحماية لتهديدات معينة فقط.

## كيف يعمل منع إساءة استخدام واجهة برمجة التطبيقات؟

تستخدم **وحدة منع إساءة استخدام واجهة برمجة التطبيقات** نموذج كشف البوتات المعقد الذي يشمل طرق مبنية على الذكاء الاصطناعي بالإضافة إلى طرق البحث الإحصائية والرياضية للتشوهات وحالات الإساءة المباشرة. تتعلم الوحدة تلقائيًا ملف تعريف الحركة الطبيعية وتحدد السلوك الشديد التمايز كتشوهات.

تستخدم منع إساءة استخدام واجهة برمجة التطبيقات مجموعة متعددة من الكواشف لتحديد البوتات الضارة. توفر الوحدة إحصائيات حول الكواشف المعنية في تمييزها.

قد تكون الكواشف التالية معنية:

* **فترة الطلب** تحليل الفترات الزمنية بين الطلبات المتتالية للعثور على عدم العشوائية الذي هو علامة على سلوك البوت.
* **تفرد الطلب** تحليل عدد النقاط النهائية الفريدة التي تمت زيارتها خلال جلسة. إذا زار عميل بنسبة منخفضة باستمرار من النقاط النهائية الفريدة، مثل 10% أو أقل، فمن المحتمل أن يكون بوتًا بدلاً من مستخدم بشري.
* **معدل الطلب** تحليل عدد الطلبات المقدمة في فترة زمنية محددة. إذا قدم عميل واجهة برمجة التطبيقات نسبة عالية باستمرار من الطلبات فوق عتبة معينة، فمن المحتمل أن يكون بوتًا بدلاً من مستخدم بشري.
* **وكيل مستخدم سيء** تحليل رؤوس `User-Agent` المدرجة في الطلبات. يتحقق هذا الكاشف من التوقيعات المحددة، بما في ذلك تلك التي تخص الزواحف وأدوات الاستخراج والفحوصات الأمنية.
* **متصفح قديم** تحليل المتصفح والمنصة المستخدمة في الطلبات. إذا كان عميل يستخدم متصفحًا أو منصة غير مدعومة أو قديمة، فمن المحتمل أن يكون بوتًا بدلاً من مستخدم بشري.
* **درجة السلوك المشبوه** تحليل الطلبات المعتادة وغير المعتادة على منطق العمل لواجهة برمجة التطبيقات التي تم أخذها خلال جلسة. 
* **درجة منطق العمل** تحليل استخدام نقاط النهاية الحرجة أو الحساسة لواجهة برمجة التطبيقات ضمن سياق سلوك تطبيقك.
* **نطاق واسع** تحليل اتساع نشاط IP لتحديد البوتات التي تشبه الزواحف سلوكيًا.

!!! info "الثقة"
    نتيجة لعمل الكواشف، يحصل كل [بوت تم اكتشافه](../user-guides/api-abuse-prevention.md#exploring-blocked-malicious-bots-and-their-attacks) على **نسبة ثقة**: كم نحن متأكدون من أن هذا بوت. في كل نوع من أنواع البوتات، للكواشف أهمية نسبية / عدد من الأصوات مختلف. وبالتالي، نسبة الثقة هي الأصوات التي حصل عليها من جميع الأصوات الممكنة في هذا النوع من البوتات (التي وفرتها الكواشف التي عملت).

![إحصائيات منع إساءة استخدام واجهة برمجة التطبيقات](../images/about-wallarm-waf/abi-abuse-prevention/api-abuse-prevention-statistics.png)

إذا أشار كاشف واحد أو أكثر إلى [علامات هجوم البوت](#automated-threats-blocked-by-api-abuse-prevention)، فإن الوحدة [تضع في القائمة السوداء أو القائمة الرمادية](#reaction-to-malicious-bots) مصدر حركة المرور المتشوهة لمدة ساعة واحدة. تعد والارم عدد الـ IP للبوتات التي وضعت في القائمة السوداء والرمادية خلال 30 يومًا وتعرض كم نسبة هذه الكميات زادت أو نقصت مقارنة بالفترة السابقة من 30 يومًا.

الحل يراقب عن كثب التشوهات في حركة المرور قبل نسبها كأفعال ضارة من البوتات ومنع مصادرها. بما أن جمع البيانات وتحليلها يستغرق بعض الوقت، الوحدة لا تمنع البوتات الضارة في الوقت الفعلي بمجرد أن أصل الطلب الضار الأول، ولكنها تقلل بشكل كبير النشاط غير الطبيعي بمتوسط.

## تفعيل منع إساءة استخدام واجهة برمجة التطبيقات

**وحدة منع إساءة استخدام واجهة برمجة التطبيقات** في حالة معطلة تأتي مع [جميع أشكال عقدة والارم 4.2 وما فوق](../installation/supported-deployment-options.md) بما في ذلك عقدة CDN.

لتفعيل منع إساءة استخدام واجهة برمجة التطبيقات:

1. تأكد من أن حركة المرور الخاصة بك يتم تصفيتها بواسطة عقدة والارم 4.2 أو أحدث.
1. تأكد من أن [خطة الاشتراك](subscription-plans.md#subscription-plans) تتضمن **منع إساءة استخدام واجهة برمجة التطبيقات**. لتغيير خطة الاشتراك، يرجى إرسال طلب إلى [sales@wallarm.com](mailto:sales@wallarm.com).
1. في واجهة والارم → **منع إساءة استخدام واجهة برمجة التطبيقات**، قم بإنشاء ملف تعريف أو تمكين واحد على الأقل [ملف تعريف إساءة استخدام واجهة برمجة التطبيقات](../user-guides/api-abuse-prevention.md).

    !!! info "الوصول إلى إعدادات منع إساءة استخدام واجهة برمجة التطبيقات"
        يمكن فقط ل[المدراء](../user-guides/settings/users.md#user-roles) حساب شركتك في والارم الوصول إلى قسم **منع إساءة استخدام واجهة برمجة التطبيقات**. اتصل بمديرك إذا لم يكن لديك هذا الوصول.

    ![ملف تعريف منع إساءة استخدام واجهة برمجة التطبيقات](../images/about-wallarm-waf/abi-abuse-prevention/create-api-abuse-prevention.png)

## التسامح

يمكنك تكوين مدى صرامة مراقبة علامات البوت الضار وبذلك تتحكم في عدد الكشف الإيجابي الخاطئ. يتم ضبط ذلك مع معامل **التسامح** ضمن [ملفات تعريف إساءة استخدام واجهة برمجة التطبيقات](../user-guides/api-abuse-prevention.md#creating-api-abuse-profile).

تتوفر ثلاثة مستويات:

* **تسامح منخفض** مع البوتات يعني وصول أقل للبوتات إلى تطبيقاتك، ولكن قد يتم حظر بعض الطلبات المشروعة بسبب الكشف الإيجابي الخاطئ.
* **تسامح طبيعي** يستخدم قواعد مثالية لتجنب العديد من الكشف الإيجابي الخاطئ ويمنع معظم طلبات البوتات الضارة من الوصول إلى واجهات برمجة التطبيقات.
* **تسامح عالي** مع البوتات يعني وصول أكثر للبوتات إلى تطبيقاتك، ولكن لن يتم إسقاط أي طلبات مشروعة.

## رد فعل على البوتات الضارة

يمكنك تكوين منع إساءة استخدام واجهة برمجة التطبيقات للرد على البوتات الضارة بإحدى الطرق التالية:

* **إضافة إلى القائمة السوداء**: ستضع والارم IP للبوتات في [القائمة السوداء](../user-guides/ip-lists/overview.md) للفترة المحددة (القيمة الافتراضية هي `إضافة ليوم` - 24 ساعة) وتحظر كل حركة المرور التي تنتجها هذه الـ IP.
* **إضافة إلى القائمة الرمادية**: ستضع والارم IP للبوتات في [القائمة الرمادية](../user-guides/ip-lists/overview.md) للفترة المحددة (القيمة الافتراضية هي `إضافة ليوم` - 24 ساعة) وتحظر فقط الطلبات الصادرة من هذه IP والتي تحتوي على علامات الهجمات التالية:

    * [هجمات التحقق من الصحة](../about-wallarm/protecting-against-attacks.md#input-validation-attacks)
    * [هجمات من نوع vpatch](../user-guides/rules/vpatch-rule.md)
    * [الهجمات التي تم اكتشافها بناءً على التعبيرات النظامية](../user-guides/rules/regex-rule.md)

* **مراقبة فقط**: ستعرض والارم نشاط البوت المكتشف في قسم [**اله