# توصيات لعملية تحديث العقدة بأمان

يصف هذا المستند التوصيات والمخاطر المرتبطة بتحديث عقدة فلترة Wallarm بأمان إلى الإصدار 4.10.

## التوصيات العامة

* قم بالتخطيط بعناية ومراقبة عملية تحديث عقدة الفلترة. تُنشر تواريخ الإصدار المتوقعة لإصدارات جديدة من عقد Wallarm في [سياسة ترقيم إصدارات عقد Wallarm](versioning-policy.md).
* إذا كانت بنيتك التحتية تحتوي على عدة عقد Wallarm مثبتة، قم بتحديثها تدريجيًا. بعد تحديث العقدة الأولى، راقب عمل وحدات العقدة طوال يوم واحد وقم بتحديث العقد الأخرى تدريجياً إذا عملت العقدة الأولى بشكل صحيح.
* لنموذج مع بيئات تطوير وإنتاج منفصلة، قم بتحديث عقدة الفلترة تدريجياً. أولاً، طبق واختبر النسخة الجديدة في بيئات غير الإنتاج، ثم في بيئات الإنتاج. الوصف التفصيلي للتوصيات موجود في [التعليمات لتكوين عقد Wallarm للبيئات المنفصلة](../admin-en/configuration-guides/wallarm-in-separated-environments/configure-wallarm-in-separated-environments.md#gradual-rollout-of-new-wallarm-node-changes).
* قبل تحديث عقدة الفلترة، قم بتعطيل توجيه المرور عبر العقدة باستخدام أي طريقة متاحة لك (مثلاً، بضبط [وضع ترشيح المرور](../admin-en/configure-wallarm-mode.md) على `off`).
* بمجرد تحديث وحدة عقدة الفلترة، اضبط وضع الترشيح للعقدة على `monitoring`. إذا عملت كافة الوحدات بشكل صحيح ولم يكن هناك عدد غير طبيعي من الإيجابيات الكاذبة الجديدة في وضع `monitoring` طوال يوم، ثم قم بتشغيل عقدة الفلترة في وضع `block`.
* قم بتحديث NGINX إلى أحدث إصدار متاح قبل تطبيق تحديثات عقدة Wallarm. إذا احتاجت بنيتك التحتية إلى استخدام إصدار معين من NGINX، يرجى التواصل مع [دعم فني Wallarm](mailto:support@wallarm.com) لبناء وحدة Wallarm لإصدار مخصص من NGINX.

## المخاطر المحتملة

فيما يلي المخاطر التي قد تحدث عند تحديث عقدة الفلترة. لتقليل تأثير المخاطر، يُرجى اتباع الإرشادات المناسبة عند التحديث.

### تغيير الوظائف

* [ما الجديد في عقدة Wallarm 4.10](what-is-new.md)
* [ما الجديد إذا كنت تقوم بتحديث عقدة EOL (3.6 أو أقل)](older-versions/what-is-new.md)

### الإيجابيات الكاذبة الجديدة

نحن نحسن تحليل المرور مع كل إصدار جديد من عقدة الفلترة. هذا يعني أن عدد الإيجابيات الكاذبة يقل مع كل نسخة جديدة. ومع ذلك، كل تطبيق محمي له خصائصه الخاصة، لذا نوصي بتحليل عمل النسخة الجديدة من عقدة الفلترة في وضع `monitoring` قبل تمكين وضع الحظر (`block`).

لتحليل عدد الإيجابيات الكاذبة الجديدة بعد التحديث:

1. قم بنشر النسخة الجديدة من عقدة الفلترة في وضع `monitoring` [mode](../admin-en/configure-wallarm-mode.md) وأرسل المرور إلى عقدة الفلترة.
2. بعد بعض الوقت، افتح واجهة تحكم Wallarm → قسم **الهجمات** وحلل عدد الطلبات التي تم التعرف عليها بالخطأ على أنها هجمات.
3. إذا وجدت زيادة غير طبيعية في عدد الإيجابيات الكاذبة، من فضلك اتصل ب[الدعم الفني لـ Wallarm](mailto:support@wallarm.com).

### زيادة كمية الموارد المستخدمة

استخدام بعض الميزات الجديدة لعقدة الفلترة قد يؤدي إلى تغييرات في كمية الموارد المستخدمة. المعلومات حول التغييرات في كمية الموارد المستخدمة موضحة في قسم [ما الجديد](what-is-new.md).

كما يُوصى بمراقبة عمل عقدة الفلترة: إذا وجدت اختلافات كبيرة في كمية الموارد المستخدمة الفعلية وفي الكمية المحددة في الوثائق، يُرجى الاتصال ب[دعم فني Wallarm](mailto:support@wallarm.com).

## عملية التحديث

تعتمد عملية تحديث عقدة Wallarm على المنصة وأشكال التثبيت. الرجاء اختيار شكل التثبيت واتباع التعليمات المناسبة:

* [وحدات لـ NGINX، NGINX Plus](nginx-modules.md)
* [حاوية Docker مع الوحدات لـ NGINX أو Envoy](docker-container.md)
* [NGINX Ingress controller مع وحدات Wallarm المدمجة](ingress-controller.md)
* [Kong Ingress controller مع وحدات Wallarm المدمجة](kong-ingress-controller.md)
* [Sidecar](sidecar-proxy.md)
* [صورة العقدة السحابية](cloud-image.md)
* [عقدة متعددة المستأجرين](multi-tenant.md)
* [عقدة CDN](cdn-node.md)
* [ترحيل القوائم البيضاء والسوداء من عقدة Wallarm 2.18 وأقل إلى 4.8](migrate-ip-lists-to-node-3.md)