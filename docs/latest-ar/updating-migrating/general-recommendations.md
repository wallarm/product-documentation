# توصيات لعملية تحديث العقدة بأمان

تشرح هذه الوثيقة التوصيات والمخاطر المرتبطة بتحديث عقدة تصفية Wallarm بأمان حتى الإصدار 4.10.

## التوصيات العامة

* يرجى التخطيط ومتابعة عملية تحديث العقدة بعناية. يتم نشر التواريخ المتوقعة لإصدار الإصدارات الجديدة من عقد Wallarm في [سياسة نسخ عقد Wallarm](versioning-policy.md).
* إذا كانت البنية التحتية لديك تحتوي على عدة عقد Wallarm مثبتة، يرجى تحديثها بالتدريج. بعد تحديث العقدة الأولى، قم بمراقبة تشغيل وحدات العقدة خلال يوم واحد وقم بتحديث العقد Wallarm الأخرى بالتدريج إذا كانت العقدة الأولى تعمل بشكل صحيح.
* بالنسبة للنموذج مع بيئات التطوير والإنتاج المفصولة، قم بتحديث العقدة بالتدريج. أولاً، طبق واختبر النسخة الجديدة في البيئات غير الإنتاجية، ثم في البيئات الإنتاجية. توجد التوصيات المفصلة في [التعليمات لتكوين عقد Wallarm للبيئات المفصولة](../admin-en/configuration-guides/wallarm-in-separated-environments/configure-wallarm-in-separated-environments.md#gradual-rollout-of-new-wallarm-node-changes).
* قبل تحديث العقدة، قم بتعطيل توجيه الحركة عبر العقدة باستخدام أي طريقة متاحة لك (على سبيل المثال، بضبط [وضع تصفية الحركة](../admin-en/configure-wallarm-mode.md) إلى `off`).
* بمجرد تحديث وحدة عقدة التصفية، ضع وضع تصفية العقدة على `monitoring`. إذا كانت جميع الوحدات تعمل بشكل صحيح ولم يكن هناك عدد غير طبيعي من الإيجابيات الكاذبة الجديدة في وضع `monitoring` ليوم واحد، ثم ضع العقدة في وضع `block`.
* قم بتحديث NGINX إلى أحدث نسخة متاحة قبل تطبيق تحديثات عقدة Wallarm. إذا احتاجت البنية التحتية لديك إلى استخدام نسخة محددة من NGINX، يرجى الاتصال بـ[دعم فني Wallarm](mailto:support@wallarm.com) لبناء وحدة Wallarm لنسخة مخصصة من NGINX.

## المخاطر المحتملة

فيما يلي المخاطر التي قد تحدث عند تحديث العقدة. للحد من تأثير المخاطر، يرجى اتباع الإرشادات المناسبة عند التحديث.

### تغيير الوظائف

* [الجديد في عقدة Wallarm 4.10](what-is-new.md)
* [الجديد عند تحديث العقدة EOL (3.6 أو أقل)](older-versions/what-is-new.md)

### إيجابيات كاذبة جديدة

نحن نحسن تحليل الحركة مع كل نسخة جديدة من عقدة التصفية. هذا يعني أن عدد الإيجابيات الكاذبة ينخفض مع كل نسخة جديدة. ومع ذلك، كل تطبيق محمي له خصوصياته الخاصة، لذلك نوصي بتحليل عمل النسخة الجديدة من العقدة في وضع `monitoring` قبل تفعيل وضع الحظر (`block`).

لتحليل عدد الإيجابيات الكاذبة الجديدة بعد التحديث:

1. نشر النسخة الجديدة من العقدة في وضع `monitoring` [mode](../admin-en/configure-wallarm-mode.md) وإرسال الحركة إلى العقدة.
2. بعد بعض الوقت، افتح Wallarm Console → قسم **Attacks** وحلل عدد الطلبات التي تم التعرف عليها بشكل خاطئ كهجمات.
3. إذا وجدت نموا غير طبيعي في عدد الإيجابيات الكاذبة, يرجى الاتصال بـ[الدعم الفني Wallarm](mailto:support@wallarm.com).

### زيادة كمية الموارد المستخدمة

قد يتسبب استخدام بعض الميزات الجديدة لعقدة التصفية في تغييرات في كمية الموارد المستخدمة. يتم تسليط الضوء على المعلومات حول التغييرات في كمية الموارد المستخدمة في قسم [الجديد](what-is-new.md).

كما يوصى بمراقبة تشغيل العقدة: إذا وجدت اختلافات كبيرة في كمية الموارد المستخدمة الفعلية وفي الكمية المحددة في الوثائق، يرجى الاتصال بـ[دعم فني Wallarm](mailto:support@wallarm.com).

## عملية التحديث

تعتمد عملية تحديث عقدة Wallarm على النظام الأساسي وأشكال التثبيت. يرجى اختيار شكل التثبيت واتباع الإرشادات المناسبة:

* [وحدات لـ NGINX، NGINX Plus](nginx-modules.md)
* [حاوية Docker مع وحدات لـ NGINX أو Envoy](docker-container.md)
* [متحكم إدخال NGINX مع وحدات Wallarm المدمجة](ingress-controller.md)
* [متحكم إدخال Kong مع وحدات Wallarm المدمجة](kong-ingress-controller.md)
* [جانبي](sidecar-proxy.md)
* [صورة العقدة السحابية](cloud-image.md)
* [عقدة متعددة المستأجرين](multi-tenant.md)
* [عقدة CDN](cdn-node.md)
* [ترحيل القوائم البيضاء والسوداء من عقدة Wallarm 2.18 وأقل إلى 4.8](migrate-ip-lists-to-node-3.md)