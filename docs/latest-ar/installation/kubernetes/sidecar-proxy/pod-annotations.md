# التعليقات التوضيحية للـPod المدعومة من Wallarm Sidecar

يمكن تكوين [حل Wallarm Sidecar](deployment.md) عبر التعليقات التوضيحية على أساس كل Pod. القائمة التالية تصف التعليقات التوضيحية المدعومة في هذا الحل.

!!! معلومة "أولويات الإعدادات العالمية ولكـPod"
    التعليقات التوضيحية Per-pod [تأخذ الأفضلية](customization.md#configuration-area) على قيم الرسم البياني Helm.

## قائمة التعليقات التوضيحية

| التعليقات التوضيحية وقيمة الرسم البياني المناسبة                          | الوصف                                                      | 
|-------------------------------------|------------------------------------------------------------------|
| **التعليق التوضيحي:** `sidecar.wallarm.io/sidecar-injection-schema`<br><br>`config.injectionStrategy.schema` | [نمط توزيع حاوية Wallarm](customization.md#single-and-split-deployment-of-containers): `single` (الافتراضي) أو `split`.                                                                                                                                                                                                                                                                     |
| **التعليق التوضيحي:** `sidecar.wallarm.io/sidecar-injection-iptables-enable`<br><br>`config.injectionStrategy.iptablesEnable` | [إذا كان يجب بدء حاوية `iptables` init](customization.md#incoming-traffic-interception-port-forwarding): `true` (الافتراضي) أو `false`.                                                                                                                                                                                                                                |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-application`<br><br>لا توجد قيمة في الرسم البياني     | [ID الخاص بتطبيق Wallarm][applications-docs].                                                                                                                                                                                                                                                                           |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-block-page`<br><br>لا توجد قيمة في الرسم البياني | [صفحة الحظر ورمز الخطأ][custom-blocking-page-docs] تعود إلى عمليات الطلب المحظورة.                                                                                                                                                        |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-enable-libdetection`<br><br>`config.wallarm.enableLibDetection`                         | ما إذا كان يجب التحقق بشكل إضافي من هجمات الـ SQL Injection باستخدام مكتبة [libdetection][libdetection-docs]: `on` (الافتراضي) أو `off`.                                                                                                                                                                                                             |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-fallback`<br><br>`config.wallarm.fallback`                                          | [وضع النسخ الاحتياطي Wallarm][fallback-mode-docs]: `on` (الافتراضي) أو  `off`. |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-mode`<br><br>`config.wallarm.mode`                                              | [وضع تصفية الحركة][wallarm-modes-docs]: `monitoring` (default), `safe_blocking`, `block` or `off`.                                                                                                                                                                                                                                                                       |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-mode-allow-override`<br><br>`config.wallarm.modeAllowOverride`                                 | يدير [القدرة على تجاوز قيم `wallarm_mode` عبر إعدادات الـ Clou](filtration-mode-priorities-docs): `on` (الافتراضي), `off` أو `strict`.                                                                                                                                                                                       |
| <a name="wallarm-node-group"></a>**التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-node-group`<br><br>`config.wallarm.api.nodeGroup`                                 | يحدد اسم المجموعة من العقد التصفية التي ترغب في إضافة العقد المنشورة حديثًا إلى. تجميع العقد بهذه الطريقة متاح فقط عندما تنشئ وتربط العقد بالسحابة باستخدام رمز الواجهة البرمجية الذي به دور **Deploy** (يتم تمرير قيمته في معلمة `config.wallarm.api.token`).<br> هذه القيمة لا تأخذ العزم على الـ Tarantool pods، العقد لها دائمًا مرتبطة بمجموعة العقد المحددة في قيمة الرسم البياني `config.wallarm.api.nodeGroup`.                                                                                                                                                                                      |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-parser-disable`<br><br>لا توجد قيمة في الرسم البياني                                                               | يسمح بتعطيل [المحللين][parsers-docs]. تقابل قيم التوجيه اسم المحلل المطلوب تعطيله، مثل `json`. يمكن تحديد محللات متعددة، وتقسيمها بمنقطة فاصلة، مثل `json;base64`.                                                                                                                     |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-parse-response`<br><br>`config.wallarm.parseResponse`                                     | ما إذا كان يجب تحليل الردود الخاصة بالتطبيق للهجمات: `on` (الافتراضي) أو `off`. التحليل الاستجابة مطلوب للكشف عن الضعف خلال [الكشف السلبي][passive-detection-docs] و [التحقق من التهديد القوي][active-threat-verification-docs].                                                                                                                                                                                                                                            |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-acl-export-enable`<br><br>`config.wallarm.aclExportEnable`                                     | يمكن `on` / يعطل `off` إرسال إحصائيات حول الطلبات من [أي بي المدرجة في القائمة السوداء][denylist-docs] من العقدة إلى السحابة.<ul><li>مع قيمة `"on"` (الافتراضية) سيتم عرض الإحصائيات حول الطلبات من أي بي المدرجة في القائمة السوداء [يتم عرضها][denylist-view-events-docs] في قسم **الهجمات**.</li><li>مع قيمة `"off"` لن يتم عرض الإحصائيات حول الطلبات من أي بي المدرجة في القائمة السوداء.</li></ul>                                                                                                                                |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-parse-websocket`<br><br>`config.wallarm.parseWebsocket`                                    | لدى Wallarm دعم كامل لـ Websockets. بشكل افتراضي، لا تتم تحليل رسائل Websockets للهجمات. لفرض الميزة، قم بتنشيط خطة الاشتراك في الأمان API [خطة الاشتراك][subscriptions-docs] واستخدم هذا التعليق التوضيحي: `on` أو `off` (الافتراضي).                                                                                                                                                                                                                                                 |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-unpack-response`<br><br>`config.wallarm.unpackResponse`                                    | ما إذا كان يجب فك ضغط البيانات المضغوطة التي تمت إعادتها في استجابة التطبيق: `on` (الافتراضي) أو `off`.                                                                                                                                                                                                                          |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-upstream-connect-attempts`<br><br>`config.wallarm.upstream.connectAttempts`                          | تحدد عدد إعادات الاتصال الفورية إلى Tarantool أو Wallarm API.                                                                                                                                                                                                                                         |
| **التعليق التوضيحي:** `sidecar.wallarm.io/wallarm-upstream-reconnect-interval`<br><br>`config.wallarm.upstream.reconnectInterval`                        | يحدد الفترة بين محاولات إعادة الاتصال بـ Tarantool أو Wallarm API بعد أن يتجاوز عدد المحاولات الفاشلة العتبة لعدد إعادات الاتصال الفورية.                                                                                                                                                                                                                                |
| **التعليق التوضيحي:** `sidecar.wallarm.io/application-port`<br><br>`config.nginx.applicationPort`                                     | ينتظر حاوية Wallarm لوصول الطلبات الواردة إلى هذا المنفذ إذا [لم يتم العثور على منافذ البود التطبيقية المعرَضة](customization.md#application-container-port-auto-discovery).                                                                                             |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-listen-port`<br><br>`config.nginx.listenPort`                                          | المنفذ الذي يستمع إليه حاوية Wallarm. هذا المنفذ محجوز لاستخدامه بواسطة حل Wallarm sidecar، لا يمكن أن يكون نفس `منفذ التطبيق`.                                                                                                                                                                 |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-http-include`<br><br>لا توجد قيمة في الرسم البياني                                                               | مصفوفة مسارات إلى ملفات التكوين NGINX التي يجب أن [تتضمن على مستوى `http` من التكوين NGINX](customization.md#using-custom-nginx-configuration). يجب تثبيت الملف على الحاوية ويجب أن يشير هذا المسار إلى الملف في الحاوية.                                                                                                            |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-http-snippet`<br><br>لا توجد قيمة في الرسم البياني                                                               | [تكوين داخلي إضافي](customization.md#using-custom-nginx-configuration) يجب أن يتضمّن على مستوى `http` من تكوين NGINX.                                                                                                                                      |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-server-include`<br><br>لا توجد قيمة في الرسم البياني                                                               | مصفوفة مسارات إلى ملفات التكوين NGINX التي يجب أن [تتضمن على مستوى `server` من التكوين NGINX](customization.md#using-custom-nginx-configuration). يجب تثبيت الملف على الحاوية ويجب أن يشير هذا المسار إلى الملف في الحاوية.                                                                                                            |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-server-snippet`<br><br>لا توجد قيمة في الرسم البياني                                                               | [تكوين داخلي إضافي](customization.md#using-custom-nginx-configuration) يجب أن يتضمّن على مستوى `server` من تكوين NGINX.                                                                                                                                      |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-location-include`<br><br>لا توجد قيمة في الرسم البياني                                                               | مصفوفة مسارات إلى ملفات التكوين NGINX التي يجب أن [تتضمن على مستوى `location` من التكوين NGINX](customization.md#using-custom-nginx-configuration). يجب تثبيت الملف على الحاوية ويجب أن يشير هذا المسار إلى الملف في الحاوية.                                                                                                            |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-location-snippet`<br><br>لا توجد قيمة في الرسم البياني                                                               | [تكوين داخلي إضافي](customization.md#using-custom-nginx-configuration) يجب أن يتضمّن على مستوى `location` من تكوين NGINX.                                                                                                                                      |
| **التعليق التوضيحي:** `sidecar.wallarm.io/nginx-extra-modules`<br><br>لا توجد قيمة في الرسم البياني                                                               | مصفوفة [وحدات NGINX الإضافية](customization.md#enabling-additional-nginx-modules) لتكون ممكنة.                                                                                                                                                                                                                  |
| **التعليق التوضيحي:** `sidecar.wallarm.io/proxy-extra-volumes`<br><br>لا توجد قيمة في الرسم البياني                                                               | [أحجام مخصصة](customization.md#include) لإضافتها إلى الـ Pod (array). يجب أن تكون قيمة التعليق التوضيحي محاطة بعلامات اقتباس مفردة `''`.                                                                                                                                                                                  |
| **التعليق التوضيحي:** `sidecar.wallarm.io/proxy-extra-volume-mounts`<br><br>لا توجد قيمة في الرسم البياني                                                               | [تحميل الأحجام المخصصة](customization.md#include) لإضافتها إلى حاوية `sidecar-proxy` (JSON object). يجب أن تكون قيمة التعليق التوضيحي محاطة بعلامات اقتباس مفردة `''`.                                                                                                                                                                              |
| **التعليق التوضيحي:** `sidecar.wallarm.io/proxy-cpu`<br><br>`config.sidecar.containers.proxy.resources.requests.cpu`           | [CPU المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                                |
| **التعليق التوضيحي:** `sidecar.wallarm.io/proxy-memory`<br><br>`config.sidecar.containers.proxy.resources.requests.memory`        | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                             |
| **التعليق التوضيحي:** `sidecar.wallarm.io/proxy-cpu-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.cpu`             | [حد الـ CPU](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                                    |
| **التعليق التوضيحي:** `sidecar.wallarm.io/proxy-memory-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.memory`          | [حد الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                                 |
| **التعليق التوضيحي:** `sidecar.wallarm.io/helper-cpu`<br><br>`config.sidecar.containers.helper.resources.requests.cpu`          | [CPU المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                               |
| **التعليق التوضيحي:** `sidecar.wallarm.io/helper-memory`<br><br>`config.sidecar.containers.helper.resources.requests.memory`       | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                            |
| **التعليق التوضيحي:** `sidecar.wallarm.io/helper-cpu-limit`<br><br>`config.sidecar.containers.helper.resources.limits.cpu`            | [حد الـ CPU](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                                  |
| **التعليق التوضيحي:** `sidecar.wallarm.io/helper-memory-limit`<br><br>`config.sidecar.containers.helper.resources.limits.memory`         | [حد الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                                |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-iptables-cpu`<br><br>`config.sidecar.initContainers.iptables.resources.requests.cpu`    | [CPU المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                        |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-iptables-memory`<br><br>`config.sidecar.initContainers.iptables.resources.requests.memory` | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                     |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-iptables-cpu-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.cpu`      | [حد الـ CPU](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                            |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-iptables-memory-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.memory`   | [حد الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                         |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-helper-cpu`<br><br>`config.sidecar.initContainers.helper.resources.requests.cpu`      | [CPU المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                          |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-helper-memory`<br><br>`config.sidecar.initContainers.helper.resources.requests.memory`   | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                       |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-helper-cpu-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.cpu`        | [حد الـ CPU](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                              |
| **التعليق التوضيحي:** `sidecar.wallarm.io/init-helper-memory-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.memory`     | [حد الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                           |
| **التعليق التوضيحي:** `sidecar.wallarm.io/profile`<br><br>لا توجد قيمة في الرسم البياني | يتم استخدام التعليق التوضيحي لتعيين ملف تعريف TLS محدد لبود التطبيق لـ [إنهاء TLS/SSL](customization.md#ssltls-termination).<br><br>هذا التعليق التوضيحي وإنهاء TLS/SSL مدعومة بدءًا من الرسم البياني Helm 4.6.1.                                                                                                                                                                                                                                                                           |

هناك المزيد [من التوجيهات NGINX المدعومة بواسطة Wallarm][nginx-directives-docs] التي لم يتم تغطيتها بتعليقات توضيحية مباشرة. ومع ذلك، يمكنك تكوينها أيضًا باستخدام التعليقات التوضيحية [`nginx-*-snippet` و `nginx-*-include`](customization.md#using-custom-nginx-configuration).

## كيفية استخدام التعليقات التوضيحية

لتطبيق التعليق التوضيحي على بود، حدده في إعدادات الكائن `Deployment` لتكوين التطبيق المناسب، مثل:

```bash
kubectl edit deployment -n <APPLICATION_NAMESPACE> <APP_LABEL_VALUE>
```

```yaml hl_lines="17"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
        wallarm-sidecar: enabled
      annotations:
        sidecar.wallarm.io/wallarm-mode: block
    spec:
      containers:
        - name: application
          image: kennethreitz/httpbin
          ports:
            - name: http
              containerPort: 80
```