# البيانات المدعومة بواسطة Wallarm Sidecar

يمكن تكوين حل [Wallarm Sidecar](deployment.md) عبر البيانات لكل قاعدة حاوية. ويتم وصف البيانات المدعومة في هذا الحل في هذا المستند.

!!! معلومات "أولويات الإعدادات العالمية ولكل قاعدة حاوية"
    البيانات لكل قاعدة حاوية تأخذ الأفضلية [تأخذ الأفضلية](customization.md#configuration-area) على قيم مخطط الـ Helm.

## قائمة البيانات

| البيان والقيمة المرتبطة بالمخطط                          | الوصف                                                       | 
|-------------------------------------|------------------------------------------------------------------|
| **البيان:** `sidecar.wallarm.io/sidecar-injection-schema`<br><br>`config.injectionStrategy.schema` | [نمط توزيع حاوية Wallarm](customization.md#single-and-split-deployment-of-containers): `single` (الافتراضي) أو `split`.                                                                                                                                                                                                                                                                     |
| **البيان:** `sidecar.wallarm.io/sidecar-injection-iptables-enable`<br><br>`config.injectionStrategy.iptablesEnable` | [ما إذا كان يجب بدء حاوية `iptables` الأولية](customization.md#incoming-traffic-interception-port-forwarding): `true` (الافتراضي) أو `false`.                                                                                                                                                                                                                                |
| **البيان:** `sidecar.wallarm.io/wallarm-application`<br><br>No chart value      | [ID التطبيق Wallarm][applications-docs].                                                                                                                                                                                                                                                                           |
| **البيان:** `sidecar.wallarm.io/wallarm-block-page`<br><br>No chart value | [صفحة الحجب ورمز الخطأ][custom-blocking-page-docs] لإرجاعها إلى الطلبات المحجوبة.                                                                                                                                                        |
| **البيان:** `sidecar.wallarm.io/wallarm-enable-libdetection`<br><br>`config.wallarm.enableLibDetection`                         | ما إذا كان يجب التحقق بشكل إضافي من هجمات التسلل SQL باستخدام مكتبة [libdetection][libdetection-docs]: `on` (الافتراضي) أو `off`.                                                                                                                                                                                                             |
| **البيان:** `sidecar.wallarm.io/wallarm-fallback`<br><br>`config.wallarm.fallback`                                          | [نمط الاحتياطي Wallarm][fallback-mode-docs]: `on` (الافتراضي) or  `off`. |
| **البيان:** `sidecar.wallarm.io/wallarm-mode`<br><br>`config.wallarm.mode`                                              | ما هو[ نمط ترشيح المرور][wallarm-modes-docs]: `monitoring` (الافتراضي), `safe_blocking`, `block` أو `off`.                                                                                                                                                                                                                                                                       |
| **البيان:** `sidecar.wallarm.io/wallarm-mode-allow-override`<br><br>`config.wallarm.modeAllowOverride`                                 | يدير[ القدرة على تعطيل قيم `wallarm_mode` عبر الإعدادات في السحابة][filtration-mode-priorities-docs]: `on` (الافتراضي), `off` أو `strict`.                                                                                                                                                                                       |
| <a name="wallarm-node-group"></a>**البيان:** `sidecar.wallarm.io/wallarm-node-group`<br><br>`config.wallarm.api.nodeGroup`                                 | يحدد اسم مجموعة العقد المرشحة التي ترغب في إضافة العقد الجديدة المنتشرة إليها. التجميع بهذه الطريقة متاح فقط عند إنشائك و الربط بالسحابة باستخدام الرمز token API مع الدور **التوزيع** (يتم تمرير قيمته في معلمة `config.wallarm.api.token`).<br>هذه القيمة لا تؤثر على pods الـTarantool, العقد يتم ربطهم دوماً بمجموعة العقد المحددة في قيمة المخطط `config.wallarm.api.nodeGroup` الخاص بـ Helm.                                                                                                                                                                                      |
| **البيان:** `sidecar.wallarm.io/wallarm-parser-disable`<br><br>No chart value                                                               | يسمح بتعطيل [المحللين][parsers-docs]. قيم التوجيه تتوافق مع اسم المحلل الذي يجب تعطيله، مثل `json`. يمكن تحديد محللات متعددة، عن طريق القسمة بالفاصلة منقوطة، مثل `json;base64`.                                                                                                                     |
| **البيان:** `sidecar.wallarm.io/wallarm-parse-response`<br><br>`config.wallarm.parseResponse`                                     | ما إذا كان يجب تحليل استجابات التطبيق للهجمات: `on` (الافتراضي) أو `off`. يتطلب تحليل الرد لاكتشاف الثغرات الأمنية خلال [الكشف السلبي][passive-detection-docs] و [التحقق النشط من التهديدات][active-threat-verification-docs].                                                                                                                                                                                                                                            |
| **البيان:** `sidecar.wallarm.io/wallarm-acl-export-enable`<br><br>`config.wallarm.aclExportEnable`                                     | يتيح `on` / يعطل `off` إرسال الإحصاءات حول الطلبات من [ال IPs المرفوضة][denylist-docs] من العقدة للسحابة.<ul><li>مع قيمة `"on"` (الافتراضي) ستظهر الإحصاءات حول الطلبات من ال IPs المرفوضة [تظهر][denylist-view-events-docs] في القسم **الهجمات**.</li><li>مع القيمة `"off"` لن تظهر الإحصاءات حول الطلبات من ال IPs المرفوضة</li></ul>                                                                                                                                |
| **البيان:** `sidecar.wallarm.io/wallarm-parse-websocket`<br><br>`config.wallarm.parseWebsocket`                                    | تحتوي Wallarm على الدعم الكامل لبروتوكول الإتصال الثنائي المرفق WebSockets. بشكل افتراضي ، لا يتم تحليل رسائل WebSockets الخاصة بك للهجمات. لإجبار الميزة ، قم بتفعيل خطة الاشتراك في الأمان API [subscription plan][subscriptions-docs] واستخدم هذا البيان: `on` أو `off` (الافتراضي).                                                                                                                                                                                                                                                 |
| **البيان:** `sidecar.wallarm.io/wallarm-unpack-response`<br><br>`config.wallarm.unpackResponse`                                    | ما إذا كان يجب فك ضغط البيانات المضغوطة التي تمت إعادتها في الرد على التطبيق: `on` (الافتراضي) أو `off`.                                                                                                                                                                                                                          |
| **البيان:** `sidecar.wallarm.io/wallarm-upstream-connect-attempts`<br><br>`config.wallarm.upstream.connectAttempts`                          | يحدد عدد إعادة الاتصالات الفورية لـ Tarantool أو Wallarm API.                                                                                                                                                                                                                                         |
| **البيان:** `sidecar.wallarm.io/wallarm-upstream-reconnect-interval`<br><br>`config.wallarm.upstream.reconnectInterval`                        | يحدد الفاصل الزمني بين محاولات إعادة الاتصال بـ Tarantool أو Wallarm API بعد أن تجاوز عدد المحاولات الغير ناجحة عتبة الاتصالات الفورية.                                                                                                                                                                                                                                |
| **البيان:** `sidecar.wallarm.io/application-port`<br><br>`config.nginx.applicationPort`                                     | تحتفظ حاوية Wallarm بالطلبات الواردة لتذهب إلى هذا المنفذ إذا لم يتم العثور [على أي منافذ حاوية التطبيق المكشوفة](customization.md#application-container-port-auto-discovery).                                                                                             |
| **البيان:** `sidecar.wallarm.io/nginx-listen-port`<br><br>`config.nginx.listenPort`                                          | المنفذ الذي تستمع إليه حاوية Wallarm. يتم حجز هذا المنفذ للاستخدام من قبل حل Wallarm sidecar, ولا يمكن أن يكون نفس المنفذ `application-port`.                                                                                                                                                                 |
| **البيان:** `sidecar.wallarm.io/nginx-http-include`<br><br>No chart value                                                               | مصفوفة مسارات إلى ملفات تكوين NGINX التي يجب أن تتم [إضافتها على مستوى `http` من تكوين NGINX](customization.md#using-custom-nginx-configuration). يجب توصيل الملف بالحاوية ويجب أن يشير هذا المسار إلى الملف في الحاوية.                                                                                                            |
| **البيان:** `sidecar.wallarm.io/nginx-http-snippet`<br><br>No chart value                                                               | [تكوين مضمن إضافي](customization.md#using-custom-nginx-configuration) يجب أن يتم توظيفه على مستوى `http` من تكوين NGINX.                                                                                                                                      |
| **البيان:** `sidecar.wallarm.io/nginx-server-include`<br><br>No chart value                                                               | مصفوفة مسارات إلى ملفات تكوين NGINX التي يجب أن تتم [إضافتها على مستوى `sever` من تكوين NGINX](customization.md#using-custom-nginx-configuration). يجب توصيل الملف بالحاوية ويجب أن يشير هذا المسار إلى الملف في الحاوية.                                                                                                            |
| **البيان:** `sidecar.wallarm.io/nginx-server-snippet`<br><br>No chart value                                                               | [تكوين مضمن إضافي](customization.md#using-custom-nginx-configuration) يجب أن يتم توظيفه على مستوى `sever` من تكوين NGINX.                                                                                                                                      |
| **البيان:** `sidecar.wallarm.io/nginx-location-include`<br><br>No chart value                                                               | مصفوفة مسارات إلى ملفات تكوين NGINX التي يجب أن تتم [إضافتها على مستوى `location` من تكوين NGINX](customization.md#using-custom-nginx-configuration). يجب توصيل الملف بالحاوية ويجب أن يشير هذا المسار إلى الملف في الحاوية.                                                                                                            |
| **البيان:** `sidecar.wallarm.io/nginx-location-snippet`<br><br>No chart value                                                               | [تكوين مضمن إضافي](customization.md#using-custom-nginx-configuration) يجب أن يتم توظيفه على مستوى `location` من تكوين NGINX.                                                                                                                                      |
| **البيان:** `sidecar.wallarm.io/nginx-extra-modules`<br><br>No chart value                                                               | مصفوفة [وحدات NGINX الإضافية](customization.md#enabling-additional-nginx-modules) التي يجب تمكينها.                                                                                                                                                                                                                  |
| **البيان:** `sidecar.wallarm.io/proxy-extra-volumes`<br><br>No chart value                                                               | [أحجام مخصصة](customization.md#include) يجب إضافتها إلى الحاوية Pod (مصفوفة).يجب أن تكون قيمة البيان ملفوفة بعلامتي اقتباس مفردتين `''`.                                                                                                                                                                                  |
| **البيان:** `sidecar.wallarm.io/proxy-extra-volume-mounts`<br><br>No chart value                                                               | [إضافات حاوية مخصصة](customization.md#include) التي يجب إضافتها إلى حاوية `sidecar-proxy` (كائن JSON).يجب أن تكون قيمة البيان ملفوفة بعلامتي اقتباس مفردتين `''`.                                                                                                                                                                              |
| **البيان:** `sidecar.wallarm.io/proxy-cpu`<br><br>`config.sidecar.containers.proxy.resources.requests.cpu`           | [المعالج المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                                |
| **البيان:** `sidecar.wallarm.io/proxy-memory`<br><br>`config.sidecar.containers.proxy.resources.requests.memory`        | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                             |
| **البيان:** `sidecar.wallarm.io/proxy-cpu-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.cpu`             | [حدود المعالج](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                                    |
| **البيان:** `sidecar.wallarm.io/proxy-memory-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.memory`          | [حدود الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) لحاوية `sidecar-proxy`.                                                                                                                                                                                                                                                                                 |
| **البيان:** `sidecar.wallarm.io/helper-cpu`<br><br>`config.sidecar.containers.helper.resources.requests.cpu`          | [المعالج المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                               |
| **البيان:** `sidecar.wallarm.io/helper-memory`<br><br>`config.sidecar.containers.helper.resources.requests.memory`       | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                            |
| **البيان:** `sidecar.wallarm.io/helper-cpu-limit`<br><br>`config.sidecar.containers.helper.resources.limits.cpu`            | [حدود المعالج](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                                  |
| **البيان:** `sidecar.wallarm.io/helper-memory-limit`<br><br>`config.sidecar.containers.helper.resources.limits.memory`         | [حدود الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-helper`.                                                                                                                                                                                                                                                                                |
| **البيان:** `sidecar.wallarm.io/init-iptables-cpu`<br><br>`config.sidecar.initContainers.iptables.resources.requests.cpu`    | [المعالج المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                        |
| **البيان:** `sidecar.wallarm.io/init-iptables-memory`<br><br>`config.sidecar.initContainers.iptables.resources.requests.memory` | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                     |
| **البيان:** `sidecar.wallarm.io/init-iptables-cpu-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.cpu`      | [حدود المعالج](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                            |
| **البيان:** `sidecar.wallarm.io/init-iptables-memory-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.memory`   | [حدود الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-iptables`.                                                                                                                                                                                                                                                                         |
| **البيان:** `sidecar.wallarm.io/init-helper-cpu`<br><br>`config.sidecar.initContainers.helper.resources.requests.cpu`      | [المعالج المطلوب](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                          |
| **البيان:** `sidecar.wallarm.io/init-helper-memory`<br><br>`config.sidecar.initContainers.helper.resources.requests.memory`   | [الذاكرة المطلوبة](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                       |
| **البيان:** `sidecar.wallarm.io/init-helper-cpu-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.cpu`        | [حدود المعالج](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                              |
| **البيان:** `sidecar.wallarm.io/init-helper-memory-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.memory`     | [حدود الذاكرة](customization.md#per-pod-basis-allocation-via-pods-annotations) للحاوية `sidecar-init-helper`.                                                                                                                                                                                                                                                                           |
| **البيان:** `sidecar.wallarm.io/profile`<br><br>No chart value | يتم استخدام البيان لتعيين ملف TLS معين لقاعدة حاوية التطبيق لـ [إنهاء TLS/SSL](customization.md#ssltls-termination).<br><br>هذا البيان وإنهاء الـ TLS/SSL مدعومين بدءًا من المخطط Helm الإصدار 4.6.1.                                                                                                                                                                                                                                                                           |

هناك المزيد [من التوجيهات NGINX التي تدعمها Wallarm][nginx-directives-docs] التي لم تغطها البيانات المباشرة. ومع ذلك، يمكنك أيضاً تكوينها باستخدام البيانات [`nginx-*-snippet` and `nginx-*-include`](customization.md#using-custom-nginx-configuration).

## كيفية استخدام البيانات

لتطبيق البيان على قاعدة حاوية، حدده في إعدادات كائن `Deployment` ضمن تهيئة التطبيق المناسبة، مثلاً:


```bash
kubectl edit deployment -n <APPLICATION_NAMESPACE> <APP_LABEL_VALUE>
```

```yaml hl_lines="17"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
        wallarm-sidecar: enabled
      annotations:
        sidecar.wallarm.io/wallarm-mode: block
    spec:
      containers:
        - name: application
          image: kennethreitz/httpbin
          ports:
            - name: http
              containerPort: 80
```