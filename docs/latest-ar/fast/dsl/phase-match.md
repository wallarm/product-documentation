[link-points]:          points/intro.md
[link-ruby-regexp]:     http://ruby-doc.org/core-2.6.1/doc/regexp_rdoc.html
[link-ext-logic]:       logic.md

# مرحلة المقابلة

!!! info "نطاق المرحلة"  
    تُستخدم هذه المرحلة في امتداد يُجري تعديلًا وهي اختيارية لتشغيله (قسم `match` قد يكون غائبًا أو موجودًا في ملف YAML).

    يجب أن يكون هذا القسم غائبًا من ملف YAML الخاص بالامتداد غير المُعدل.
    
    اقرأ عن أنواع الامتدادات بالتفصيل [هنا][link-ext-logic].

!!! info "بناء جملة وصف عناصر الطلب"
     عند إنشاء امتداد FAST، تحتاج إلى فهم بنية الطلب HTTP المُرسَل إلى التطبيق وبنية الاستجابة HTTP الواردة من التطبيق لكي تتمكن من وصف عناصر الطلب التي تحتاج إلى العمل معها بشكل صحيح، باستخدام النقاط. 
    
    لرؤية معلومات مفصلة، انتقل إلى هذا [الرابط][link-points].
 
 تتحقق هذه المرحلة من ما إذا كان الطلب الأساسي الوارد يطابق المعايير المحددة.

يحتوي قسم `match` في ملف YAML الخاص بالامتداد على مجموعة من أزواج `<key: value>`. يصف كل زوج عنصرًا معينًا من الطلب (المفتاح) وبيانات هذا العنصر (القيمة). قد يحتوي المفتاح والقيمة على تعبيرات نظامية في [صيغة التعبيرات النظامية للغة Ruby][link-ruby-regexp].

تبحث مرحلة المقابلة عن تطابقات لجميع أزواج `<key: value>` المعطاة في الطلب الأساسي.
* يتم التحقق من الطلب بحثًا عن عناصر مطلوبة (مثل قيمة المسار في الرابط، معامل GET، أو الرأس HTTP) مع البيانات المطلوبة.
    
    ??? info "مثال 1"
        `'GET_a_value': '^\d+$'` — يجب أن يحتوي معامل GET الذي يُسمى `a` على قيمة تتكون من أرقام فقط في الطلب.
    
    ??? info "مثال 2"
        `'GET_b*_value': '.*'` — يجب أن يوجد في الطلب معامل GET بالاسم يبدأ بـ `b`، مع أي قيمة (بما في ذلك القيمة الفارغة).
    
* إذا تم تعيين قيمة `null` لمفتاح معين، يتم بعد ذلك التحقق من غياب العنصر المقابل في الطلب.
    
    ??? info "مثال"
        `'GET_a': null` — يجب أن يغيب معامل GET الذي يُسمى `a` عن الطلب.

لكي يعبر الطلب الأساسي مرحلة المقابلة، من الضروري أن يلبي الطلب كل أزواج `<key: value>` الموجودة في قسم `match`. إذا لم يتم العثور على مطابقة لأي من أزواج `<key: value>` الموصوفة في قسم `match` في الطلب الأساسي، فسيتم استبعاد الطلب.

??? info "مثال"
    يحتوي قسم `match` الموضح أدناه على قائمة من أزواج `<key: values>`. لكي يعبر الطلب الأساسي مرحلة المقابلة، يجب أن يلبي كل هذه الأزواج.

    ```
    match:
    - 'HEADER_HOST_value': 'example.com'
    - 'GET_password_value': '^\d+$'
    - 'HEADER_CONTENT-TYPE_value': null
    ```

    1. يجب أن يحتوي الطلب الأساسي على رأس HTTP يُسمى `Header`، مع قيمة تحتوي `example.com` كجزء فرعي.
    2. يجب أن تحتوي قيمة معامل GET `password` على أرقام فقط.
    3. يجب أن يغيب رأس `Content-Type`.