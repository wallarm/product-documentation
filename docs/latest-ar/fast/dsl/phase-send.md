# مرحلة الإرسال

!!! info "نطاق المرحلة"
    هذه المرحلة إلزامية لكي تعمل الإضافة غير المعدلة (يجب أن يحتوي ملف YAML على قسم `send`).
    
    من المهم ملاحظة أن هذه المرحلة غير موجودة في الإضافة المعدلة لأن مرحلة الإرسال ستجعل المراحل الأخرى غير قابلة للاستخدام (باستثناء مرحلة الكشف ومرحلة الجمع الضمنية) إذا تم دمجها معها.
    
    اقرأ عن أنواع الإضافات بالتفصيل [هنا][link-ext-logic].

ترسل هذه المرحلة الطلبات الاختبارية المحددة مسبقًا لاختبار تطبيق الهدف من أجل الثغرات الأمنية. يحدد الهوست الذي يجب إرسال الطلبات الاختبارية إليه بواسطة قيمة رأس `Host` في الطلبات الأساسية الواردة.

يحتوي قسم `send` على الهيكل التالي:

```
send:
  - method: <HTTP method>
    url: <URI>
    headers:
    - header 1: value
    ...
    - header N: value
    body: <the request body>
  ...
  - method: <HTTP method>
    ...
```

يحتوي قسم `send` في ملف YAML للإضافة على مجموعة واحدة أو أكثر من المعايير. يتم تحديد كل معيار كزوج `<key: value>`. تصف مجموعة المعايير الواحدة طلب HTTP واحد ليتم إرساله كطلب اختبار. العناصر التالية هي جزء من المجموعة:

* `method`: طريقة HTTP التي سيتم استخدامها بواسطة الطلب.

    هذا المعيار مطلوب: يجب أن يكون موجودًا في أي مجموعة من المعايير.
    
    ??? info "قائمة قيم المعيار المسموح بها"

        * `GET`
        * `POST`
        * `PUT`
        * `HEAD`
        * `OPTIONS`
        * `PATCH`
        * `COPY`
        * `DELETE`
        * `LOCK`
        * `UNLOCK`
        * `MOVE`
        * `TRACE`

    ??? info "مثال"
        `method: 'POST'`

* `url`: سلسلة URL. سيتم استهداف الطلب إلى هذا URI.

    هذا المعيار مطلوب: يجب أن يكون موجودًا في أي مجموعة من المعايير.
    
    ??? info "مثال"
        `url: '/en/login.php'`

* `headers`: مصفوفة تحتوي على واحد أو أكثر من رؤوس HTTP بتنسيق `اسم الرأس: قيمة الرأس`.

    إذا لم يستخدم الطلب HTTP المُنشأ أي رأس، فيمكن حذف هذا المعيار.
    
    تقوم FAST بإضافة الرؤوس المطلوبة ليكون الطلب HTTP الناتج صحيحًا (حتى لو كانت مفقودة في مصفوفة `headers`)؛ على سبيل المثال، `Host` و`Content-Length`.
    
    ??? info "مثال"
        ```
        headers:
        - 'Accept-Language': 'en-US,en;q=0.9'
        - 'Content-Type': 'application/xml'
        ```
      
    !!! info "التعامل مع رأس `Host`"
        يمكنك إضافة رأس `Host` إلى طلب اختبار يختلف عن ذاك المستخرج من طلب أساسي، إذا لزم الأمر. 
        
        على سبيل المثال، من الممكن إضافة رأس `Host: demo.com` إلى طلب اختبار في قسم الإرسال.
    
        إذا كانت الإضافة المناسبة تعمل واستقبلت عقدة FAST طلبًا أساسيًا برأس `Host: example.com`، فسيتم إرسال طلب الاختبار برأس `Host: demo.com` إلى الهوست `example.com`. يكون الطلب الناتج مشابهًا لهذا:

        ```
        curl -k -g -X POST -L -H "Host: demo.com" -H "Content-Type: application/json" "http://example.com/app" --data "{"field":"value"}"
        ```
    
* `body`: سلسلة تحتوي على جسم الطلب. يمكنك تحديد أي جسم طلب مطلوب، طالما قمت بتجنب الأحرف الخاصة، إذا وجدت، في السلسلة الناتجة.

    هذا المعيار مطلوب: يجب أن يكون موجودًا في أي مجموعة من المعايير.
    
    ??? info "مثال"
        `body: 'field1=value1&field2=value2`

إذا كان قسم `send` يحتوي على `N` مجموعات من المعايير تصف `N` طلبات HTTP، فلطلب أساسي وارد واحد، سترسل عقدة FAST `N` طلبات اختبار إلى التطبيق الهدف الذي يقع على هوست محدد في رأس `Host` للطلب الأساسي.