[link-ext-logic]:       logic.md

# مرحلة الإرسال

!!! info "نطاق المرحلة"
    هذه المرحلة إلزامية للعمل بالامتداد غير المعدل (يجب أن يحتوي ملف YAML على قسم `send`).
    
    لاحظ أن هذه المرحلة غير موجودة في الامتداد المعدل لأن مرحلة الإرسال ستجعل المراحل الأخرى غير قابلة للاستخدام (عدا مرحلة الكشف ومرحلة الجمع الضمنية) إذا تم دمجها معهم.
    
    اقرأ عن أنواع الامتدادات بالتفصيل [هنا][link-ext-logic].

تقوم هذه المرحلة بإرسال طلبات الاختبار المحددة مسبقًا لاختبار تطبيق الهدف بحثًا عن الثغرات الأمنية. يتحدد الجانب الذي يجب إرسال طلبات الاختبار إليه بواسطة قيمة رأس `Host` في الطلبات الأساسية الواردة.

قسم `send` يحتوي على الهيكل التالي:

```
send:
  - method: <HTTP method>
    url: <URI>
    headers:
    - header 1: value
    ...
    - header N: value
    body: <جسم الطلب>
  ...
  - method: <HTTP method>
    ...
```

قسم `send` في ملف YAML الخاص بالامتداد يحتوي على مجموعة واحدة أو أكثر من المعايير. يتم تحديد كل معيار كزوج `<key: value>`. تصف مجموعة المعايير المحددة طلب HTTP واحد يُرسل كطلب اختبار. العناصر التالية جزء من المجموعة:

* `method`: طريقة HTTP التي سيستخدمها الطلب.

    هذا معيار مطلوب: يجب أن يكون موجودًا في أي مجموعة من المعايير.
    
    ??? info "قائمة قيم المعاير المسموح بها"

        * `GET`
        * `POST`
        * `PUT`
        * `HEAD`
        * `OPTIONS`
        * `PATCH`
        * `COPY`
        * `DELETE`
        * `LOCK`
        * `UNLOCK`
        * `MOVE`
        * `TRACE`

    ??? info "مثال"
        `method: 'POST'`

* `url`: سلسلة URL. سيتم استهداف الطلب إلى هذا الـ URI.

    هذا معيار مطلوب: يجب أن يكون موجودًا في أي مجموعة من المعايير.
    
    ??? info "مثال"
        `url: '/en/login.php'`

* `headers`: مصفوفة تحتوي على رأس واحد أو أكثر لبروتوكول HTTP بتنسيق `اسم الرأس: قيمة الرأس`.

    إذا لم يستخدم الطلب المُنشأ أي رأس، فيمكن حذف هذا المعيار.
    
    يضيف FAST تلقائيًا الرؤوس المطلوبة لأن يكون الطلب الناتج صحيحًا (حتى لو كانوا مفقودين في مصفوفة `headers`)؛ مثل `Host` و`Content-Length`.
    
    ??? info "مثال"
        ```
        headers:
        - 'Accept-Language': 'en-US,en;q=0.9'
        - 'Content-Type': 'application/xml'
        ```
      
    !!! info "التعامل مع رأس `Host`"
        يمكنك إضافة رأس `Host` إلى طلب اختبار يختلف عن الواحد المستخرج من طلب أساسي، إذا لزم الأمر.
        
        على سبيل المثال، من الممكن إضافة رأس `Host: demo.com` إلى طلب اختبار في قسم الإرسال.
    
        إذا كان الامتداد المقابل قيد التشغيل وتلقى عقدة FAST طلبًا أساسيًا برأس `Host: example.com`، فسيتم إرسال طلب الاختبار برأس `Host: demo.com` إلى المضيف `example.com`. الطلب الناتج يماثل هذا:

        ```
        curl -k -g -X POST -L -H "Host: demo.com" -H "Content-Type: application/json" "http://example.com/app" --data "{"field":"value"}"
        ```
    
* `body`: سلسلة تحتوي على جسم طلب. يمكنك تحديد أي جسم طلب مطلوب، طالما قمت بتجنب الأحرف الخاصة، إذا كانت موجودة، في السلسلة الناتجة.

    هذا معيار مطلوب: يجب أن يكون موجودًا في أي مجموعة من المعايير.
    
    ??? info "مثال"
        `body: 'field1=value1&field2=value2`

إذا تم ملء قسم `send` بـ `N` مجموعات من المعايير التي تصف طلبات `N` HTTP، فمن أجل طلب أساسي وارد واحد، سترسل عقدة FAST `N` طلبات اختبار إلى تطبيق الهدف الموجود على مضيف محدد في رأس `Host` الخاص بالطلب الأساسي.