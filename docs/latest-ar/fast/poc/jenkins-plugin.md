[fast-node-token]:              ../operations/create-node.md
[fast-ci-mode-record]:          ci-mode-recording.md#environment-variables-in-recording-mode

[mail-to-us]:                   mailto:support@wallarm.com
[fast-examples-github]:         https://github.com/wallarm/fast-examples 

[jenkins-plugin-wallarm-fast]:   https://plugins.jenkins.io/wallarm-fast/

[jenkins-plugin-install]:       ../../images/fast/poc/common/examples/jenkins-plugin/jenkins-plugin-install.png
[jenkins-plugin-record-params]: ../../images/fast/poc/common/examples/jenkins-plugin/jenkins-plugin-record-params.png
[jenkins-plugin-playback-params]: ../../images/fast/poc/common/examples/jenkins-plugin/jenkins-plugin-playback-params.png
[jenkins-manage-plugin]:        https://jenkins.io/doc/book/managing/plugins/
[fast-example-jenkins-plugin-result]:  ../../images/fast/poc/common/examples/jenkins-plugin/jenkins-plugin-result.png
[fast-jenkins-cimode]:          examples/jenkins-cimode.md

# دمج إضافة Wallarm FAST مع Jenkins

!!! warning "التوافق"
    يرجى ملاحظة أن إضافة Wallarm FAST تعمل فقط مع مشاريع Freestyle في Jenkins.
    
    إذا كان مشروعك من نوع Pipeline، فيرجى الاطلاع على [مثال الدمج مع Jenkins عبر عقدة FAST][fast-jenkins-cimode].

## الخطوة 1: تثبيت الإضافة

ثبت [إضافة Wallarm FAST][jenkins-plugin-wallarm-fast] في مشروع Jenkins باستخدام مدير الإضافات. يوجد معلومات أكثر تفصيلا حول إدارة الإضافات متوفرة في [وثائق Jenkins الرسمية][jenkins-manage-plugin].

![تثبيت إضافة Wallarm FAST][jenkins-plugin-install]

إذا واجهتك أية مشاكل خلال التثبيت، فقم ببناء الإضافة يدويًا.

??? info "بناء إضافة Wallarm FAST يدويًا"
    لبناء إضافة Wallarm FAST يدويًا، اتبع الخطوات التالية:

    1. تأكد من تثبيت واجهة سطر الأوامر [Maven](https://maven.apache.org/install.html).
    2. نفذ الأوامر التالية:
        ```
        git clone https://github.com/jenkinsci/wallarm-fast-plugin.git
        cd wallarm-fast-plugin
        mvn package
        ```
        
        بعد تنفيذ الأوامر بنجاح، سيتم إنشاء ملف الإضافة `wallarm-fast.hpi` في مجلد `target`.

    3. قم بتثبيت إضافة `wallarm-fast.hpi` باستخدام [تعليمات Jenkins](https://jenkins.io/doc/book/managing/plugins/#advanced-installation).

## الخطوة 2: إضافة خطوات التسجيل والاختبار

!!! info "تدفق العمل المُعد"
    الإرشادات التالية ستتطلب تدفق عمل Jenkins مُعد مسبقًا ليتوافق مع أحد النقاط التالية:

    * يجب تنفيذ الاختبار التلقائي. في هذه الحالة، سيتم إضافة خطوات [تسجيل الطلبات](#إضافة-خطوة-تسجيل-الطلبات) و[الاختبار الأمني](#إضافة-خطوة-الاختبار-الأمني).
    * يجب تسجيل مجموعة الطلبات الأساسية. في هذه الحالة، سيتم إضافة خطوة [الاختبار الأمني](#إضافة-خطوة-الاختبار-الأمني).

### إضافة خطوة تسجيل الطلبات

لإضافة خطوة تسجيل الطلبات، حدد وضع `تسجيل الأساسيات` على علامة التبويب **Build** وقم بإعداد المتغيرات الموضحة أدناه. يجب إضافة خطوة تسجيل الطلبات **قبل خطوة اختبار التطبيق التلقائي**.

!!! warning "شبكة"
    قبل تسجيل الطلبات، تأكد من أن إضافة FAST وأداة الاختبار التلقائي على نفس الشبكة.

??? info "المتغيرات في وضع التسجيل"

    | المتغير                  | القيمة  | مطلوب   |
    |--------------------   | --------  | -----------  |
    | `رمز API لـ Wallarm`     | رمز من سحابة Wallarm. | نعم |
    | `مضيف API لـ Wallarm`      | عنوان خادم API لـ Wallarm. <br>القيم المسموح بها: <br>`us1.api.wallarm.com` للخادم في سحابة Wallarm الأمريكية و<br>`api.wallarm.com` للخادم في سحابة Wallarm الأوروبية.<br>القيمة الافتراضية هي `us1.api.wallarm.com`. | لا |
    | `مضيف التطبيق`      | عنوان التطبيق في اختبار. يمكن أن تكون قيمة عنوان IP أو اسم نطاق. | نعم |
    | `منفذ التطبيق`      | منفذ التطبيق في الاختبار. القيمة الافتراضية هي 8080. | لا |
    | `منفذ FAST`   | منفذ عقدة FAST. | نعم |
    | `مهلة الخمول`    | إذا لم تصل أي طلبات أساسية إلى عقدة FAST داخل هذا الفاصل الزمني، فسيتم إيقاف عملية التسجيل جنبًا إلى جنب مع عقدة FAST.<br>نطاق القيمة المسموح به: من ثانية واحدة إلى أسبوع واحد.<br>يجب تمرير القيمة بالثانية.<br>القيمة الافتراضية: 600 ثانية (10 دقائق). | لا |
    | `اسم FAST`             | اسم حاوية Docker لعقدة FAST. | لا |
    | `نسخة Wallarm`       | نسخة عقدة FAST المستخدمة. | لا |
    | `شبكة Docker المحلية`  | شبكة Docker حيث تعمل عقدة FAST. | لا |
    | `ip لـ Docker المحلي`       | عنوان IP الذي سيتم تعيينه لعقدة FAST الجاري تشغيلها. | لا |
    | `بدون sudo`          | ما إذا كان سيتم تنفيذ أوامر عقدة FAST بحقوق المستخدم الذي قام بتشغيل عقدة FAST. افتراضيًا، يتم تنفيذ الأوامر بحقوق المستخدم الفائق (عبر sudo). |لا |

**مثال على تكوين الإضافة لتسجيل الاختبار:**

![مثال على تكوين الإضافة لتسجيل الطلبات][jenkins-plugin-record-params]

ثانيًا، قم بتحديث خطوة الاختبار التلقائي بإضافة عقدة FAST كبروكسي.

ستوقف الإضافة FAST تسجيل الطلبات تلقائيًا عند الانتهاء من الاختبار.

### إضافة خطوة الاختبار الأمني

لإضافة خطوة الاختبار الأمني، حدد وضع `تشغيل الأساسيات` على علامة التبويب **Build** وقم بإعداد المتغيرات المذكورة أدناه.

يرجى ملاحظة أنه يجب أن يكون التطبيق قد تم بدءه ومتاحًا للاختبار **قبل تشغيل الاختبار الأمني**.

!!! warning "شبكة"
    قبل الاختبار الأمني، تأكد من أن إضافة FAST والتطبيق على نفس الشبكة.

??? info "المتغيرات في وضع الاختبار"

    | المتغير                  | القيمة  | مطلوب   |
    |--------------------   | --------  | -----------  |
    | `رمز API لـ Wallarm`     | رمز من سحابة Wallarm. | نعم |
    | `مضيف API لـ Wallarm`    | عنوان خادم API لـ Wallarm. <br>القيم المسموح بها: <br>`us1.api.wallarm.com` للخادم في سحابة Wallarm الأمريكية و<br>`api.wallarm.com` للخادم في سحابة Wallarm الأوروبية<br>القيمة الافتراضية هي `us1.api.wallarm.com`. | لا |
    | `مضيف التطبيق`      | عنوان التطبيق في الاختبار. يمكن أن تكون قيمة عنوان IP أو اسم نطاق. | نعم |
    | `منفذ التطبيق`      | منفذ التطبيق في الاختبار. القيمة الافتراضية هي 8080. | لا |
    | `معرف السياسة`   | معرف [سياسة الاختبار](../operations/test-policy/overview.md).<br> القيمة الافتراضية هي `0`-`السياسة الافتراضية للاختبار`. | لا |
    | `معرف TestRecord`    | معرف سجل الاختبار. يتوافق مع [TEST_RECORD_ID](ci-mode-testing.md#environment-variables-in-testing-mode).<br>القيمة الافتراضية هي آخر سجل اختبار تم إنشاؤه بواسطة عقدة FAST المستخدمة.| لا |
    | `TestRun RPS`   | الحد من عدد طلبات الاختبار (*RPS*، *طلبات في الثانية*) التي ستُرسَل إلى التطبيق المستهدف.<br>القيمة الدنيا: `1`.<br>القيمة القصوى: `500`.<br>القيمة الافتراضية: `null` (RPS غير محدود).| لا |
    | `اسم TestRun`   | اسم جولة الاختبار.<br>افتراضيًا، سيتم توليد القيمة تلقائيًا من تاريخ إنشاء جولة الاختبار.| لا |
    | `وصف TestRun`   | وصف جولة الاختبار.| لا |
    | `إيقاف عند أول فشل`   | ما إذا كان سيتم إيقاف الاختبار عند حدوث خطأ. | لا |
    | `إنهاء البناء`   | ما إذا كان سيتم إنهاء البناء بخطأ عند اكتشاف الثغرات الأمنية خلال الاختبار الأمني. | لا |
    | `استبعاد`   | قائمة بامتدادات الملفات لاستبعادها من الاختبار الأمني.<br>لتقسيم الامتدادات، يُستخدم رمز &#448;.<br> افتراضيًا، لا توجد استثناءات.| لا |
    | `اسم FAST`             | اسم حاوية Docker لعقدة FAST. | لا |
    | `نسخة Wallarm`       | نسخة عقدة FAST المستخدمة. | لا |
    | `شبكة Docker المحلية`  | شبكة Docker حيث تعمل عقدة FAST. | لا |
    | `ip لـ Docker المحلي`       | عنوان IP الذي سيتم تعيينه لعقدة FAST الجاري تشغيلها. | لا |
    | `بدون sudo`          | ما إذا كان سيتم تنفيذ أوامر عقدة FAST بحقوق المستخدم الذي قام بتشغيل عقدة FAST. افتراضيًا، يتم تنفيذ الأوامر بحقوق المستخدم الفائق (عبر sudo). |لا|

    !!! warning "تشغيل عقدة FAST"
        يرجى ملاحظة أنه إذا قمت بإضافة إلى سير العمل كلًا من خطوة تسجيل الطلبات وخطوة الاختبار الأمني، فيجب أن تكون أسماء حاويات Docker لعقدة FAST مختلفة.

**مثال على تكوين الإضافة للاختبار الأمني:**

![مثال على تكوين الإضافة للاختبار الأمني][jenkins-plugin-playback-params]

## الخطوة 3: الحصول على نتيجة الاختبار

سيتم عرض نتيجة الاختبار الأمني في واجهة Jenkins.

![نتيجة تشغيل إضافة FAST][fast-example-jenkins-plugin-result]

## المزيد من الأمثلة

يمكنك العثور على أمثلة لدمج FAST مع تدفق العمل في CircleCI على [GitHub][fast-examples-github] الخاص بنا.

!!! info "الأسئلة الإضافية"
    إذا كانت لديك أسئلة متعلقة بدمج FAST، يرجى [التواصل معنا][mail-to-us].
