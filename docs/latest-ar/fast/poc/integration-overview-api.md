# التكامل عبر واجهة برمجة تطبيقات Wallarm

هناك عدة طرق للتوظيف:
1. [التوظيف عبر واجهة برمجة التطبيقات عند تسجيل طلبات الأساس.][anchor-recording]
2. [التوظيف عبر واجهة برمجة التطبيقات عند استخدام طلبات الأساس المسجلة مسبقًا.][anchor-no-recording]

## التوظيف عبر واجهة برمجة التطبيقات عند تسجيل طلبات الأساس

يتم إنشاء [تشغيل اختبار][doc-testrun] في هذا السيناريو. سيتم تسجيل طلبات الأساس في سجل اختبار يتوافق مع تشغيل الاختبار.

خطوات سير العمل المقابلة هي:

1. بناء وتوظيف التطبيق المستهدف.

2. توظيف وضبط عقدة FAST:

    1. [توظيف حاوية Docker بعقدة FAST][doc-container-deployment].
    
    2. [إنشاء تشغيل اختبار][doc-testrun-creation].
    
        بعد تنفيذ هذه الإجراءات، تأكد من أن عقدة FAST جاهزة للبدء في عملية تسجيل طلبات الأساس.
    
3. تحضير وضبط أداة الاختبار:
    
    1. توظيف وإجراء تكوين أساسي لأداة الاختبار.
    
    2. [ضبط عقدة FAST كخادم وكيل][doc-proxy-configuration].
    
4. تشغيل الاختبارات الموجودة.

    ستبدأ عقدة FAST في إنشاء وتنفيذ مجموعة اختبارات الأمان عند استلامها لأول طلب أساس.

5. إيقاف عملية تسجيل طلبات الأساس.

    يجب [إيقاف عملية التسجيل][doc-stopping-recording] بعد تنفيذ جميع الاختبارات الموجودة.
    
    الآن، [سجل الاختبار][doc-testrecord] الذي يحمل طلبات الأساس المسجلة، جاهز لإعادة الاستخدام في سير عمل CI/CD الذي يعمل مع طلبات الأساس المسجلة مسبقًا.  
    
6. الانتظار حتى انتهاء اختبارات أمان FAST.

    تحقق بشكل دوري من حالة تشغيل الاختبار بإجراء طلب API. هذا يساعد [على تحديد ما إذا كانت اختبارات الأمان قد اكتملت أم لا][doc-waiting-for-tests].
    
7. الحصول على نتائج الاختبار.

هذا السيناريو موضح في الصورة أدناه:

![مثال على وظيفة CI/CD مع تسجيل الطلبات][img-sample-job-recording]

## التوظيف عبر واجهة برمجة التطبيقات عند استخدام طلبات الأساس المسجلة مسبقًا

يتم نسخ تشغيل اختبار في هذا السيناريو. أثناء النسخ، يتم تمرير معرف سجل اختبار موجود إلى تشغيل الاختبار. يتم الحصول على سجل الاختبار في سير عمل CI/CD مع تسجيل طلبات الأساس.

خطوات سير العمل المقابلة هي:

1. بناء وتوظيف التطبيق المستهدف.

2. توظيف وضبط عقدة FAST:
    
    1. [توظيف حاوية Docker بعقدة FAST][doc-container-deployment].
    
    2. [نسخ تشغيل اختبار][doc-testrun-copying].

3. استخراج طلبات الأساس من سجل الاختبار المعطى بواسطة عقدة FAST.

4. إجراء اختبارات الأمان للتطبيق المستهدف بواسطة عقدة FAST.

5. الانتظار حتى انتهاء اختبارات أمان FAST.

    تحقق بشكل دوري من حالة تشغيل الاختبار بإجراء طلب API. هذا يساعد [على تحديد ما إذا كانت اختبارات الأمان قد اكتملت أم لا][doc-waiting-for-tests].
    
6. الحصول على نتائج الاختبار.

![مثال على وظيفة CI/CD مع استخدام طلبات مسجلة مسبقًا][img-sample-job-no-recording]

## دورة حياة حاوية عقدة FAST (التوظيف عبر واجهة برمجة التطبيقات)

يفترض هذا السيناريو أن حاوية Docker مع عقدة FAST تعمل مرة واحدة فقط لكل وظيفة CI/CD ويتم إزالتها عند انتهاء الوظيفة.

إذا لم تواجه عقدة FAST أخطاء حرجة أثناء التشغيل، فإنها تعمل في حلقة لا نهائية، في انتظار تشغيلات الاختبار وطلبات الأساس الجديدة لاختبار التطبيق المستهدف مرة أخرى.

يجب إيقاف حاوية العقدة بشكل صريح من قبل أداة CI/CD عند انتهاء وظيفة CI/CD.

يمكنك الرجوع إلى وثيقة ["سير عمل CI/CD مع FAST"][doc-integration-overview] إذا لزم الأمر.