[doc-tr-information]:   internals.md
[doc-testrecord]:       internals.md#test-record
[doc-state-description]:  check-testrun-status.md

[doc-create-testrun]:       create-testrun.md

[img-similar-tr-item]:              ../../images/fast/operations/common/copy-testrun/create-similar-testrun-item.png
[img-similar-tr-sidebar]:           ../../images/fast/operations/common/copy-testrun/create-similar-testrun-sidebar.png

#   نسخ اختبار تشغيل

!!! info "البيانات الضرورية"
    لنسخ اختبار تشغيل عن طريق استدعاء API، البيانات اللازمة هي:
    
    * رمز
    * معرف سجل الاختبار الموجود

    لنسخ اختبار تشغيل عبر واجهة الويب، مطلوب حساب Wallarm.

    يمكنك الحصول على معلومات مفصلة حول الرمز وسجلات الاختبار [هنا][doc-tr-information].
    
    القيم التالية تُستخدم كأمثلة في هذه الوثيقة:

    * `token_Qwe12345` كرمز.
    * `rec_0001` كسجل اختبار.

عند نسخ اختبار تشغيل، يتم إعادة استخدام [سجل الاختبار][doc-testrecord] الموجود.

يجب استخدام هذه الطريقة لإنشاء اختبار تشغيل إذا كان من الضروري اختبار تطبيق هدف باستخدام طلبات الأساس المسجلة مسبقًا.


##  قواعد نسخ اختبار تشغيل

الأمور التي يجب وضعها في الاعتبار عند نسخ اختبار تشغيل هي:
* يمكنك تحديد أي سياسة اختبار لاستخدامها بواسطة نسخة اختبار التشغيل. قد تختلف هذه السياسة عن السياسة المستخدمة في الاختبار التشغيلي الأصلي.
* يمكن نسخ اختبارات التشغيل في الحالات التالية: `فشل`، `مقاطع`، `ناجح`، `مُعلق`، `جاري`. وصف هذه حالات اختبار التشغيل معطى [هنا][doc-state-description]. 
* لا يمكن نسخ اختبار تشغيل باستخدام سجل اختبار فارغ بدون طلبات أساس فيه.
* إذا كانت بعض طلبات الأساس قيد التسجيل في سجل اختبار، فلا يمكن استخدام هذا السجل لنسخ اختبار تشغيل.
 
    إذا حاولت نسخ اختبار تشغيل استنادًا إلى سجل اختبار غير مكتمل، ستحصل على كود الخطأ `400` (`طلب سيء`) من خادم API ورسالة خطأ مماثلة للرسالة أدناه:

    ```
    {
        "status": 400,
        "body": {
            "test_record_id": {
            "error": "غير جاهز للنسخ",
            "value": rec_0001
            }
        }
    }
    ```
    
    لا يمكن نسخ اختبار تشغيل من واجهة الويب ما لم يتم إيقاف عملية التسجيل.

##  نسخ اختبار تشغيل عبر API

لنسخ وتنفيذ اختبار تشغيل، أرسل طلب POST إلى الرابط `https://us1.api.wallarm.com/v1/test_run`:

--8<-- "../include/fast/operations/api-copy-testrun.md"

إذا كان طلبك لخادم API ناجحًا، ستقدم لك استجابة الخادم. توفر الاستجابة معلومات مفيدة، بما في ذلك:

1.  `id`: معرف نسخة اختبار التشغيل (على سبيل المثال، `tr_1234`).
    
    ستحتاج إلى قيمة معامل `id` للتحكم في حالة تنفيذ اختبار التشغيل.
    
2.  `state`: حالة اختبار التشغيل.
    
    نسخة اختبار التشغيل الجديدة في حالة `جاري`.
    
    يمكن العثور على وصف شامل لجميع قيم معامل `state` [هنا][doc-state-description].

    
##  نسخ اختبار تشغيل عبر واجهة الويب    

لنسخ وتنفيذ اختبار تشغيل عبر واجهة ويب بوابة Wallarm:
1.  قم بتسجيل الدخول إلى البوابة بحساب Wallarm الخاص بك، ثم انتقل إلى علامة التبويب "اختبارات التشغيل".
2.  حدد اختبار تشغيل للنسخ، ثم افتح قائمة الأفعال على يمين اختبار التشغيل.
3.  حدد إدخال القائمة "إنشاء اختبار تشغيل مماثل". 

    ![إدخال القائمة "إنشاء اختبار تشغيل مماثل"][img-similar-tr-item]

4.  حدد العناصر التالية في الشريط الجانبي الذي يُفتح:
    * اسم نسخة اختبار التشغيل
    * السياسة لاستخدامها مع نسخة اختبار التشغيل
    * العقدة التي سيتم تنفيذ نسخة اختبار التشغيل عليها
    
    ![شريط جانبي "اختبار تشغيل"][img-similar-tr-sidebar]
    
    قد تقوم بتكوين إعدادات إضافية باختيار "إعدادات متقدمة" (إذا لزم الأمر):
    
--8<-- "../include/fast/test-run-adv-settings.md"
    
5.  تأكد من تحديد خيار "استخدم الأساسيات من `<اسم سجل الاختبار لإعادة استخدامه>`".

    !!! info "إعادة استخدام سجل اختبار"
        لاحظ أن اسم سجل الاختبار هو الذي يظهر في الخيار، وليس اسم اختبار التشغيل.
        
        غالبًا ما يتم حذف اسم سجل الاختبار: على سبيل المثال، إذا [تم إنشاء اختبار تشغيل][doc-create-testrun] بدون تحديد معامل `test_record_name`، فإن اسم سجل الاختبار يكون هو نفس اسم اختبار التشغيل.
        
        الشكل أعلاه يظهر حوار النسخ الذي يذكر سجل اختبار حيث أن الاسم ليس مكافئًا لاسم اختبار التشغيل الذي استخدم هذا السجل في الماضي (تم استخدام سجل الاختبار `MY TEST RECORD` بواسطة اختبار التشغيل `DEMO TEST RUN`). 

6.  قم بتنفيذ اختبار التشغيل بالنقر على زر "إنشاء وتشغيل".