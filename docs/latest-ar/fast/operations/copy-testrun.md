[doc-tr-information]:   internals.md
[doc-testrecord]:       internals.md#test-record
[doc-state-description]:  check-testrun-status.md

[doc-create-testrun]:       create-testrun.md

[img-similar-tr-item]:              ../../images/fast/operations/common/copy-testrun/create-similar-testrun-item.png
[img-similar-tr-sidebar]:           ../../images/fast/operations/common/copy-testrun/create-similar-testrun-sidebar.png

#   نسخ تشغيل اختبار

!!! info "البيانات الضرورية"
    لنسخ تشغيل اختبار عبر استدعاء API، تُطلب البيانات التالية:
    
    * رمز
    * معرف سجل اختبار موجود

    لنسخ تشغيل اختبار عبر واجهة الويب، يتطلب حساب Wallarm.

    يمكنك الحصول على معلومات مفصلة عن الرمز وسجلات الاختبار [هنا][doc-tr-information].
    
    تستخدم القيم التالية كأمثلة في هذا المستند:

    * `token_Qwe12345` كرمز.
    * `rec_0001` كسجل اختبار.

عند نسخ تشغيل اختبار، يُعاد استخدام [سجل اختبار][doc-testrecord] موجود.

ينبغي استخدام هذه الطريقة لإنشاء تشغيل اختبار إذا كان من الضروري اختبار تطبيق هدف باستخدام طلبات الأساس المسجلة مسبقًا.


##  قواعد نسخ تشغيل اختبار

الأمور التي يجب مراعاتها عند نسخ تشغيل اختبار هي:
* يمكنك تحديد أي سياسة اختبار لاستخدامها بواسطة نسخة تشغيل الاختبار. قد تختلف هذه السياسة عن السياسة المستخدمة في تشغيل الاختبار الأصلي.
* يمكن نسخ تشغيل الاختبارات في الحالات التالية: `فشل`، `مقاطعة`، `نجاح`، `توقف مؤقت`، `يجري`. تُعطى الأوصاف لهذه حالات تشغيل الاختبار [هنا][doc-state-description]. 
* لا يمكن نسخ تشغيل اختبار باستخدام سجل اختبار فارغ بدون طلبات أساس فيه.
* إذا كانت بعض الطلبات الأساسية قيد التسجيل في سجل اختبار، لا يمكن استخدام هذا السجل لنسخ تشغيل اختبار.
 
    إذا حاولت نسخ تشغيل اختبار بناءً على سجل اختبار غير مكتمل، ستتلقى رمز الخطأ `400` (`طلب غير صالح`) من خادم API ورسالة خطأ مشابهة للرسالة أدناه:

    ```
    {
        "status": 400,
        "body": {
            "test_record_id": {
            "error": "not_ready_for_cloning",
            "value": rec_0001
            }
        }
    }
    ```
    
    لا يمكن نسخ تشغيل اختبار من واجهة الويب ما لم يتم إيقاف عملية التسجيل.

##  نسخ تشغيل اختبار عبر API

لنسخ وتنفيذ تشغيل اختبار، أرسل الطلب POST إلى العنوان `https://us1.api.wallarm.com/v1/test_run`:

--8<-- "../include/fast/operations/api-copy-testrun.md"

إذا كان الطلب إلى خادم API ناجحًا، ستُقدم استجابة الخادم. توفر الاستجابة معلومات مفيدة، بما في ذلك:

1.  `id`: معرف نسخة تشغيل الاختبار (مثال، `tr_1234`).
    
    ستحتاج قيمة معامل `id` للتحكم في حالة تنفيذ تشغيل الاختبار.
    
2.  `state`: حالة تشغيل الاختبار.
    
    تشغيل الاختبار المنسوخ حديثًا في حالة `يجري`.
    
    يمكن العثور على وصف شامل لجميع قيم معامل `state` [هنا][doc-state-description].

    
##  نسخ تشغيل اختبار عبر واجهة الويب    

لنسخ وتنفيذ تشغيل اختبار عبر واجهة ويب بوابة Wallarm:
1.  قم بتسجيل الدخول إلى البوابة بحساب Wallarm الخاص بك، ثم انتقل إلى تبويب "تشغيل الاختبارات".
2.  اختر تشغيل اختبار للنسخ، ثم افتح قائمة الإجراءات على يمين تشغيل الاختبار.
3.  اختر عنصر قائمة "إنشاء تشغيل اختبار مشابه".

    ![عنصر قائمة “إنشاء تشغيل اختبار مشابه”][img-similar-tr-item]

4.  اختر العناصر التالية في الشريط الجانبي المفتوح:
    * اسم نسخة تشغيل الاختبار
    * السياسة المستخدمة مع نسخة تشغيل الاختبار
    * العقدة التي سيتم تنفيذ نسخة تشغيل الاختبار عليها
    
    ![شريط جانبي لـ “تشغيل الاختبار”][img-similar-tr-sidebar]
    
    يمكنك تهيئة إعدادات إضافية بتحديد "إعدادات متقدمة" (إذا لزم الأمر):
    
--8<-- "../include/fast/test-run-adv-settings.md"
    
5.  تأكد من تحديد خيار "استخدام الأساسيات من `<اسم سجل الاختبار لإعادة الاستخدام>`".

    !!! info "إعادة استخدام سجل اختبار"
        لاحظ أن اسم سجل الاختبار هو المعروض في الخيار، وليس اسم تشغيل الاختبار.
        
        غالبًا ما يُهمل اسم سجل الاختبار: على سبيل المثال، إذا تم [إنشاء تشغيل اختبار][doc-create-testrun] دون تحديد معامل `test_record_name`، فإن اسم سجل الاختبار يكون نفس اسم تشغيل الاختبار.
        
        تُظهر الصورة أعلاه حوار النسخ الذي يذكر سجل اختبار حيث لا يُعادل الاسم اسم تشغيل الاختبار الذي استخدم هذا السجل في الماضي (سجل الاختبار `MY TEST RECORD` تم استخدامه بواسطة تشغيل الاختبار `DEMO TEST RUN`). 

6.  نفذ تشغيل الاختبار بالنقر على زر "إنشاء وتشغيل".