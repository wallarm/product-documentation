# إعداد البيئة للاختبار

ستوجّهك هذه الفصل خلال عملية تكوين Wallarm FAST لاكتشاف ثغرات XSS في تطبيق Google Gruyere. بمجرد إتمام جميع الخطوات اللازمة، ستكون جاهزًا لتوجيه طلب HTTPS الأساسي عبر عقدة FAST من أجل العثور على ثغرات XSS.

لتوليد مجموعة اختبارات الأمان، يتطلب Wallarm FAST ما يلي:
* عقدة FAST موضوعة، تقوم بتوجيه طلبات الأساسي
* اتصال عقدة FAST بسحابة Wallarm
* طلب أساسي
* سياسة اختبار

لقد نجحت في نشر عقدة FAST واتصالها بالسحابة في [الفصل السابق][link-previous-chapter]. في هذا الفصل، ستركز على إنشاء [سياسة اختبار][gl-testpolicy] وطلب أساسي.

![مخطط الاختبار المستخدم][img-test-scheme]

!!! info "إنشاء سياسة اختبار"
    يُنصح بشدة بإنشاء سياسة مخصصة لكل تطبيق مستهدف تحت الاختبار. ومع ذلك، يمكنك الاستفادة من السياسة الافتراضية التي تُنشأ تلقائيًا بواسطة سحابة Wallarm. هذا الوثيقة ستوجهك خلال عملية إنشاء سياسة مخصصة، بينما السياسة الافتراضية خارج نطاق هذا الدليل.

لإعداد البيئة للاختبار، اتبع ما يلي:

1.  [إعداد الطلب الأساسي][anchor1]
2.  [إنشاء سياسة الاختبار المستهدفة لثغرات XSS][anchor2]
    
!!! info "تطبيق مستهدف"
    يستخدم المثال الحالي [Google Gruyere][link-https-google-gruyere] كتطبيق مستهدف. إذا قمت بإنشاء الطلب الأساسي لتطبيقك المحلي، يرجى استخدام عنوان IP للجهاز الذي يشغل هذا التطبيق بدلاً من عنوان Google Gruyere.
    
    للحصول على عنوان IP، يمكنك استخدام أدوات مثل `ifconfig` أو `ip addr`.
        
##  1.  إعداد الطلب الأساسي

1.  يستهدف الطلب الأساسي المعطى تطبيق [Google Gruyere][link-https-google-gruyere]، يجب عليك أولًا إنشاء نسخة تجريبية معزولة من التطبيق. ثم يجب الحصول على معرف فريد للنسخة.
    
    للقيام بذلك، انتقل إلى هذا [الرابط][link-https-google-gruyere-start]. سيُعطى لك معرف نسخة Google Gruyere، يجب عليك نسخه. اقرأ شروط الخدمة وحدد زر **الموافقة والبدء**.
    
    ![صفحة بداية Google Gruyere][img-google-gruyere-startpage]

    سيتم تشغيل نسخة Google Gruyere المعزولة. ستكون متاحة لك بالعنوان التالي:
    
    `https://google-gruyere.appspot.com/<معرف النسخة الخاصة بك>/`

2.  قم ببناء الطلب الأساسي إلى نسختك من تطبيق Google Gruyere. يقترح في الدليل أن تستخدم طلبًا شرعيًا.

    الطلب كالتالي:

    ```
    https://google-gruyere.appspot.com/<معرف النسخة الخاصة بك>/snippets.gtl?password=paSSw0rd&uid=123
    ```

    !!! info "مثال على طلب"
        <https://google-gruyere.appspot.com/430232491618310677730226710602783767322/snippets.gtl?password=paSSw0rd&uid=123>
    
##  2.  إنشاء سياسة اختبار مستهدفة لثغرات XSS

1.  سجل الدخول إلى [بوابة My Wallarm][link-wl-console] باستخدام الحساب الذي أنشأته [في وقت سابق][link-previous-chapter].

2.  اختر علامة التبويب "سياسات الاختبار" وانقر على زر **إنشاء سياسة اختبار**.

    ![إنشاء سياسة الاختبار][img-policy-screen]

3.  في علامة التبويب "عام"، اضبط اسمًا ووصفًا ذا معنى للسياسة. يُقترح في هذا الدليل أن تستخدم الاسم `DEMO POLICY`.

    ![معالج سياسة الاختبار: علامة التبويب "عام".][img-wizard-general]

4.  في علامة التبويب "نقاط الإدراج"، حدد [عناصر الطلب الأساسي][gl-element] المؤهلة للمعالجة أثناء عملية توليد طلبات مجموعة اختبار الأمان. يكفي لأغراض هذا الدليل السماح بمعالجة جميع معاملات GET. للسماح بذلك، يرجى إضافة تعبير `GET_.*` في كتلة "أين يُدرج". عند إنشاء سياسة، يسمح FAST بمعالجة بعض المعاملات افتراضيًا. يمكنك حذفها باستخدام رمز "—".

    ![معالج سياسة الاختبار: علامة التبويب "نقاط الإدراج".][img-wizard-insertion-points]

5.  في علامة التبويب "الهجمات للاختبار"، حدد نوع واحد من الهجمات لاستغلال الثغرة في التطبيق المستهدف — XSS.

6.  تأكد من أن معاينة السياسة في العمود على اليمين القصو يبدو كالتالي:

    ```
    X-Wallarm-Test-Policy: 
    type=xss; 
    insertion=include:'GET_.*'; 
    ```

7.  حدد زر **حفظ** لحفظ السياسة.

8.  عد إلى قائمة سياسة الاختبار بالنقر على زر **الرجوع إلى سياسات الاختبار**.
    
    
!!! info "تفاصيل سياسة الاختبار"
    المعلومات التفصيلية حول سياسات الاختبار متاحة عبر [الرابط][doc-policy-in-detail].

الآن يجب أن تكون قد أكملت جميع أهداف الفصل، مع طلب HTTPS الأساسي لتطبيق Google Gruyere وسياسة الاختبار المستهدفة لثغرات XSS.