[img-qsg-deployment-scheme]:    ../../images/fast/qsg/en/deployment/5-qsg-fast-inst-scheme.png
[img-fast-create-node]:         ../../images/fast/qsg/common/deployment/6-qsg-fast-inst-create-node.png   
[img-firefox-options]:          ../../images/fast/qsg/common/deployment/9-qsg-fast-inst-ff-options-window.png
[img-firefox-proxy-options]:    ../../images/fast/qsg/common/deployment/10-qsg-fast-inst-ff-proxy-options.png
[img-insecure-connection]:      ../../images/fast/qsg/common/deployment/11-qsg-fast-inst-untrusted-cert.png

[link-https-google-gruyere]:    https://google-gruyere.appspot.com
[link-docker-docs]:             https://docs.docker.com/
[link-wl-fast-trial]:           https://fast.wallarm.com/signup
[link-wl-console]:              https://us1.my.wallarm.com
[link-ssl-installation]:        ../ssl/intro.md

[wl-cloud-list]:    ../cloud-list.md
      
[anchor1]:  #1-install-the-docker-software              
[anchor2]:  #2-obtain-a-token-that-will-be-used-to-connect-your-fast-node-to-the-wallarm-cloud
[anchor3]:  #3-prepare-a-file-containing-the-necessary-environment-variables 
[anchor4]:  #4-deploy-the-fast-node-docker-container 
[anchor5]:  #5-configure-the-browser-to-work-with-the-proxy
[anchor6]:  #6-install-ssl-certificates 
    
# تشغيل عقدة FAST

هذا الفصل سيوجهك خلال عملية التثبيت والتكوين الأولي لعقدة FAST. عند اكتمال جميع الخطوات الضرورية، سيكون لديك عقدة FAST تعمل. ستكون العقدة تستمع على `localhost:8080`، جاهزة لتوجيه طلبات HTTP و HTTPS إلى تطبيق [Google Gruyere][link-https-google-gruyere]. سيتم تثبيت العقدة على جهازك مع متصفح موزيلا فايرفوكس.
    
!!! info "ملاحظة حول المتصفح المستخدم"
    يُقترح في الدليل استخدام متصفح موزيلا فايرفوكس. ومع ذلك، يمكنك استخدام أي متصفح من اختيارك، بشرط أن يتم تكوينه بنجاح لإرسال كل حركة المرور HTTP و HTTPS إلى عقدة FAST.

![مخطط تشغيل عقدة FAST المستخدم][img-qsg-deployment-scheme]    
    
لتثبيت وتكوين عقدة FAST، قم بما يلي:

1.  [تثبيت برمجيات الدوكر][anchor1].
2.  [الحصول على رمز سيتم استخدامه لربط عقدة FAST بسحابة Wallarm][anchor2].
3.  [إعداد ملف يحتوي على المتغيرات البيئية الضرورية][anchor3].
4.  [تشغيل وعاء الدوكر لعقدة FAST][anchor4].
5.  [تكوين المتصفح للعمل مع البروكسي][anchor5].
6.  [تثبيت شهادات SSL][anchor6].
            
##  1.  تثبيت برمجيات الدوكر 

قم بتثبيت برمجيات الدوكر على جهازك. اطلع على الدليل الرسمي للتثبيت من الدوكر [دليل التثبيت][link-docker-docs] لمزيد من المعلومات.

يُقترح أن تستخدم نسخة الدوكر للمجتمع (CE). ومع ذلك، يمكن استخدام أي نسخة من الدوكر.
    
    
##  2.  الحصول على رمز سيتم استخدامه لربط عقدة FAST بسحابة Wallarm

1.  قم بتسجيل الدخول إلى [بوابة My Wallarm][link-wl-console] باستخدام حساب Wallarm الخاص بك.

    إذا لم يكن لديك حساب، ف[قم بإنشاء حساب][link-wl-fast-trial].

2.  اختر علامة التبويب "العقد"، ثم انقر على زر **إنشاء عقدة FAST** (أو رابط **إضافة عقدة FAST**).

    ![إنشاء عقدة جديدة][img-fast-create-node]

3.  سيظهر نافذة حوار. أعط اسمًا ذا معنى للعقدة واختر زر **إنشاء**. يقترح الدليل أن تستخدم اسم `DEMO NODE`.
    
4.  حرك مؤشر الماوس فوق حقل **الرمز** للعقدة المُنشأة وانسخ القيمة.

    !!! info "ملاحظة على الرمز"
        يمكن أيضًا استرجاع الرمز عبر استدعاء لواجهة برمجة تطبيقات Wallarm. ومع ذلك، هذا يتجاوز نطاق هذا الوثيقة.
        
##  3.  إعداد ملف يحتوي على المتغيرات البيئية الضرورية 

من الضروري إعداد بعض المتغيرات البيئية لجعل عقدة FAST تعمل.

للقيام بذلك، قم بإنشاء ملف نصي وأضف النص التالي إليه:

```
WALLARM_API_TOKEN=<قيمة الرمز التي حصلت عليها في الخطوة 2>
ALLOWED_HOSTS=google-gruyere.appspot.com
```

لقد قمت بتعيين المتغيرات البيئية. ويمكن وصف غرضها على النحو التالي:
* `WALLARM_API_TOKEN` — يحدد قيمة الرمز المستخدمة لربط العقدة بسحابة Wallarm
* `ALLOWED_HOSTS` — يحدد نطاق الطلبات التي سيتم منها توليد اختبار الأمان؛ سيتم توليد اختبارات الأمان فقط من الطلبات إلى النطاق `google-gruyere.appspot.com`، حيث يقع التطبيق الهدف.
    
!!! info "استخدام متغير البيئة `ALLOWED_HOSTS`"
    ليس من الضروري تحديد اسم النطاق بالكامل. يمكنك استخدام جزء من الاسم (مثل `google-gruyere` أو `appspot.com`).

--8<-- "../include/fast/wallarm-api-host-note.md"
   
##  4.  تشغيل وعاء الدوكر لعقدة FAST

للقيام بذلك، قم بتنفيذ الأمر التالي:

```
docker run --name <name> --env-file=<ملف المتغيرات البيئية الذي أنشأته في الخطوة السابقة> -p <port الهدف>:8080 wallarm/fast
```

يجب توفير عدة وسائط للأمر:
    
* **`--name`** *`<اسم>`*
        
    يحدد اسم وعاء الدوكر.
    
    يجب أن يكون فريدًا بين جميع أسماء الأوعية الموجودة.
    
* **`--env-file=`** *`<ملف المتغيرات البيئية الذي أنشأته في الخطوة السابقة>`*
    
    يحدد ملف يحتوي على جميع المتغيرات البيئية لتصديرها إلى الوعاء.
    
    يجب تحديد مسار الملف الذي أنشأته في [الخطوة السابقة][anchor3].

* **`-p`** *`<port الهدف>`* **`:8080`**
    
    يحدد منفذ الدوكر المضيف الذي يجب أن يتم تعيين منفذ الوعاء 8080 إليه. لا يتوفر أي من منافذ الوعاء لمضيف الدوكر بشكل افتراضي. 
    
    لمنح الوصول إلى منفذ وعاء معين من مضيف الدوكر، يجب نشر منفذ الوعاء الداخلي إلى المنفذ الخارجي باستخدام الوسيطة `-p`. 
    
    يمكنك أيضًا نشر منفذ الوعاء إلى عنوان IP غير العقدة الحلقية على المضيف عن طريق توفير الوسيطة `-p <عنوان IP للمضيف>:<port الهدف>:8080` لجعله متاحًا من خارج مضيف الدوكر أيضًا.        

!!! info "مثال على أمر `docker run`"
    تنفيذ الأمر التالي سيشغل وعاء باسم `fast-node` مع استخدام ملف المتغيرات البيئية `/home/user/fast.cfg` ونشر منفذه إلى `localhost:8080`:

    ```
    docker run --name fast-node --env-file=/home/user/fast.cfg -p 8080:8080 wallarm/fast
    ```

إذا تم تشغيل الوعاء بنجاح، ستُعرض لك نتيجة في وحدة التحكم كهذه:

--8<-- "../include/fast/console-include/qsg/fast-node-deployment-ok.md"

الآن يجب أن يكون لديك عقدة FAST جاهزة للعمل متصلة بسحابة Wallarm. العقدة تستمع إلى الطلبات الواردة HTTP و HTTPS على `localhost:8080` عن طريق التعرف على الطلبات إلى النطاق `google-gruyere.appspot.com` كطلبات أساسية.
    
    
##  5.  تكوين المتصفح للعمل مع البروكسي

قم بتكوين المتصفح ليقوم بتوجيه جميع طلبات HTTP و HTTPS من خلال عقدة FAST. 

لضبط التوجيه في متصفح موزيلا فايرفوكس، قم بما يلي:

1.  افتح المتصفح. اختر "التفضيلات" من القائمة. اختر علامة التبويب "عام" وقم بالتمرير لأسفل إلى "إعدادات الشبكة". اختر زر **الإعدادات**.

    ![خيارات موزيلا فايرفوكس][img-firefox-options]

2.  يجب أن تفتح نافذة "إعدادات الاتصال". اختر خيار **التكوين اليدوي للبروكسي**. قم بتكوين البروكسي عن طريق إدخال القيم التالية:

    * **`localhost`** كعنوان بروكسي HTTP و **`8080`** كمنفذ بروكسي HTTP. 
    * **`localhost`** كعنوان بروكسي SSL و **`8080`** كمنفذ بروكسي SSL.
        
    اختر زر **ОК** لتطبيق التغييرات التي قمت بها.

    ![إعدادات بروكسي موزيلا فايرفوكس][img-firefox-proxy-options]
    
    
##  6.  تثبيت شهادات SSL

أثناء العمل مع تطبيق [Google Gruyere][link-https-google-gruyere] عبر HTTPS، قد تواجه رسالة المتصفح التالية بخصوص انقطاع اتصال آمن:

![رسالة “اتصال غير آمن”][img-insecure-connection]

يجب إضافة شهادة SSL التي تم التوقيع عليها ذاتيًا لعقدة FAST لتتمكن من التفاعل مع التطبيق الويب عبر HTTPS. للقيام بذلك، انتقل إلى هذا [الرابط][link-ssl-installation]، اختر متصفحك من القائمة، وقم بتنفيذ الإجراءات اللازمة الموصوفة. يقترح هذا الدليل أن تستخدم متصفح موزيلا فايرفوكس.
        
بعد تشغيل وتكوين عقدة FAST، يجب أن تكون قد أكملت جميع أهداف الفصل. في الفصل التالي، ستتعلم ما هو مطلوب لتوليد مجموعة من اختبارات الأمان بناءً على عدد قليل من الطلبات الأساسية.