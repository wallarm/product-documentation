# حماية من الهجمات بالقوة الغاشمة

هجوم القوة الغاشمة هو نوع من الهجمات الذي لا يتم اكتشافه بشكل افتراضي من قبل Wallarm، يجب تهيئة اكتشافه بالطريقة التي توصف في هذا الدليل.

[هجمات القوة الغاشمة العادية](../../attacks-vulns-list.md#brute-force-attack) تشمل تجريب كلمات المرور بالقوة الغاشمة، تجريب معرفات الجلسات بالقوة الغاشمة، وحشو الاعتمادات. تتميز هذه الهجمات بعدد كبير من الطلبات بقيم مختلفة مفروضة للمعلمات تُرسل إلى URI نمطي لفترة زمنية محدودة.

انتبه إلى:

* حماية ضد القوة الغاشمة الموصوفة في هذا المقال هي إحدى الطرق للتحكم بالحمل التي يوفرها Wallarm - بديلا، يمكنك تطبيق [تحديد معدل](../../user-guides/rules/rate-limiting.md). استخدم تحديد المعدل لإبطاء حركة المرور الواردة وحماية القوة الغاشمة لحظر المهاجم بالكامل.
* بجانب حماية القوة الغاشمة، بطريقة مماثلة، يمكنك تهيئة الحماية ضد [التصفح القسري](protecting-against-forcedbrowsing.md).

## التهيئة

لتهيئة حماية من القوة الغاشمة:

1. افتح واجهة Wallarm → **المحفزات** وفتح نافذة إنشاء محفز.
1. اختر شرط **القوة الغاشمة**.
1. حدد العتبة لعدد الطلبات الصادرة من نفس عنوان IP لفترة زمنية.
1. لتفعيل المحفز فقط للطلبات المرسلة إلى نقاط النهاية المحددة، احدد مرشح **URI**:
    
    * بجانب إدخال URIs محددة، يمكنك [تهيئة الأنماط](../../user-guides/rules/rules.md) باستخدام الرموز البديلة والتعبيرات النظامية.

        ![مثال على محفز القوة الغاشمة](../../images/user-guides/triggers/trigger-example6.png)

    * إذا كنت تهيئ حماية ضد تجريب كلمات المرور بالقوة الغاشمة، فحدد URI المستخدم للتوثيق.
    * إذا كنت تستخدم URIs متداخلة، فكر في [أولويات معالجة المحفز](#trigger-processing-priorities).
    * إذا لم يتم تحديد URI، سيتم تفعيل المحفز في أي نقطة نهائية تتجاوز فيها عدد الطلبات العتبة.

1. إذا لزم الأمر، حدد مرشحات محفز أخرى:

    * **التطبيق** الذي يشير إليه الطلبات.
    * عنوان IP واحد أو أكثر يتم إرسال الطلبات منه.

1. اختر ردود فعل المحفز:

    * **وضع علامة كقوة غاشمة**. سيتم وضع علامة على الطلبات المستلمة بعد تجاوز العتبة كهجوم بالقوة الغاشمة وعرضها في قسم **الهجمات** في واجهة Wallarm.
    * **إضافة عنوان IP إلى القائمة السوداء** والمدة لحظر عناوين IP لمصادر الطلبات الضارة لإضافتها إلى [القائمة السوداء](../../user-guides/ip-lists/overview.md). سيحظر العقدة Wallarm جميع الطلبات الصادرة من عنوان IP المضاف إلى القائمة السوداء بعد تجاوز العتبة.
    * **إضافة عنوان IP إلى القائمة الرمادية** والمدة ل[إضافة](../../user-guides/ip-lists/overview.md) عناوين IP لمصادر الطلبات الضارة إلى القائمة الرمادية. ستحظر العقدة Wallarm الطلبات الصادرة من IPs في القائمة الرمادية فقط إذا كانت الطلبات تحتوي على [علامات التحقق من الإدخال](../../about-wallarm/protecting-against-attacks.md#input-validation-attacks)، [الـ `vpatch`](../../user-guides/rules/vpatch-rule.md) أو علامات الهجوم [المخصصة](../../user-guides/rules/regex-rule.md). لا يتم حظر هجمات القوة الغاشمة الصادرة من IPs في القائمة الرمادية.

1. احفظ المحفز وانتظر [اكتمال تزامن السحابة والعقدة](../configure-cloud-node-synchronization-en.md) (عادة ما يستغرق ذلك 2-4 دقائق).

يمكنك تهيئة عدة محفزات لحماية من القوة الغاشمة.

## الاختبار

1. أرسل عدد الطلبات التي تتجاوز العتبة المهيأة إلى URI المحمي. على سبيل المثال، 50 طلبًا إلى `example.com/api/v1/login`:

    ```bash
    for (( i=0 ; $i<51 ; i++ )) ; do curl https://example.com/api/v1/login ; done
    ```
1. إذا كان رد فعل المحفز هو **إضافة عنوان IP إلى القائمة السوداء**، افتح واجهة Wallarm → **قوائم IP** → **القائمة السوداء** وتحقق من أن عنوان IP المصدر محظور.

    إذا كان رد فعل المحفز هو **إضافة عنوان IP إلى القائمة الرمادية**، تحقق من قسم **قوائم IP** → **القائمة الرمادية** في واجهة Wallarm.
1. افتح قسم **الهجمات** وتحقق من أن الطلبات معروضة في القائمة كهجوم بالقوة الغاشمة.

    ![هجوم القوة الغاشمة في الواجهة](../../images/user-guides/events/brute-force-attack.png)

    يوافق عدد الطلبات المعروضة عدد الطلبات المرسلة بعد تجاوز عتبة المحفز ([مزيد من التفاصيل حول اكتشاف الهجمات السلوكية](../../attacks-vulns-list.md#behavioral-attacks)). إذا كان هذا العدد أكثر من 5، يتم تطبيق أخذ عينات من الطلبات ويتم عرض تفاصيل الطلب فقط لأول 5 ضربات ([مزيد من التفاصيل حول أخذ عينات من الطلبات](../../user-guides/events/analyze-attack.md#sampling-of-hits)).

    للبحث عن هجمات القوة الغاشمة، يمكنك استخدام مرشح `brute`. جميع المرشحات موصوفة في [التعليمات حول استخدام البحث](../../user-guides/search-and-filters/use-search.md).

## أولويات معالجة المحفز
            
--8<-- "../include/trigger-processing-priorities.md"

## الشروط والقيود

**الشروط**

لحماية الموارد من هجمات القوة الغاشمة، مطلوب عناوين IP الحقيقية للعملاء. إذا تم تثبيت العقدة الفلترة خلف خادم وكيل أو موازن تحميل، [قم بتهيئة](../using-proxy-or-balancer-en.md) عرض عناوين IP الحقيقية للعملاء.

**القيود**

عند البحث عن علامات هجمات القوة الغاشمة، تحلل العقد Wallarm الطلبات HTTP التي لا تحتوي على علامات لأنواع هجمات أخرى.