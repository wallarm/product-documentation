# تكوين المصادقة SSO للمستخدمين

[img-enable-sso-for-user]: ../../../images/admin-guides/configuration-guides/sso/enable-sso-for-user.png
[img-disable-sso-for-user]: ../../../images/admin-guides/configuration-guides/sso/disable-sso-for-user.png

[doc-allow-access-gsuite]: gsuite/allow-access-to-wl.md
[doc-allow-access-okta]: okta/allow-access-to-wl.md

[doc-user-sso-guide]: ../../../user-guides/use-sso.md
[doc-disable-sso]: change-sso-provider.md

[anchor-enable]: #enabling-sso-authentication-for-users
[anchor-disable]: #disabling-sso-authentication-for-users

 يمكنك [تمكين][anchor-enable] أو [تعطيل][anchor-disable] مصادقة SSO لمستخدمي بوابة Wallarm.

## تمكين مصادقة SSO للمستخدمين

!!! تحذير
    * عند تمكين مصادقة SSO للمستخدمين، لن تكون آلية تسجيل الدخول بالاسم وكلمة المرور والمصادقة الثنائية متاحة. عند تمكين مصادقة SSO، يتم مسح كلمة مرور المستخدم وتعطيل المصادقة الثنائية.
    * يُفترض أنك قد قدمت بالفعل الوصول إلى المجموعة المطلوبة من المستخدمين لتطبيق Wallarm المكون على جانب [Okta][doc-allow-access-okta] أو [G Suite][doc-allow-access-gsuite].

لتمكين مصادقة SSO لمستخدمي Wallarm:

1. اذهب إلى **الإعدادات** → **المستخدمون**.
1. من قائمة المستخدم، اختر **تمكين تسجيل الدخول SSO**.

![تمكين SSO لمستخدم Wallarm][img-enable-sso-for-user]

في نافذة منبثقة، سيُطلب منك إرسال إشعار للمستخدم بأن مصادقة SSO مُمكّنة. انقر على زر **إرسال إشعار**. إذا لم يكن الإشعار مطلوبًا، انقر على **إلغاء**.

بعد ذلك، [يمكن للمستخدم المصادقة][doc-user-sso-guide] من خلال موفر الهوية.

لاحظ أنه يمكنك أيضًا تمكين SSO لجميع مستخدمي حساب الشركة باستخدام وضع [SSO الصارم](#strict-sso-mode).

## تعطيل مصادقة SSO للمستخدمين

لتعطيل مصادقة SSO لمستخدمي Wallarm:

1. اذهب إلى **الإعدادات** → **المستخدمون**.
1. من قائمة المستخدم، اختر **تعطيل SSO**.

![تعطيل SSO لمستخدم Wallarm][img-disable-sso-for-user]

بعد ذلك، سيتم إبلاغ المستخدم عبر البريد الإلكتروني بأن تسجيل الدخول باستخدام SSO معطل مع اقتراح (رابط) لاستعادة كلمة المرور لتسجيل الدخول بزوج الاسم/كلمة المرور. بالإضافة إلى ذلك، تصبح المصادقة الثنائية متاحة للمستخدم.

## مصادقة SSO وAPI

عند تمكين SSO للمستخدم، يصبح التوثيق لـ [الطلبات إلى واجهة برمجة تطبيقات Wallarm](../../../api/overview.md#your-own-client) غير متاح لهذا المستخدم. لديك خياران للحصول على بيانات اعتماد API العاملة:

* إذا لم يُستخدم وضع **SSO الصارم**، أنشئ مستخدمًا بدون خيار SSO تحت حساب الشركة الخاص بك، وأنشئ [رموز API](../../../api/overview.md#your-own-client).
* إذا كان وضع **SSO الصارم** مُستخدمًا، يمكنك تمكين مصادقة API لمستخدمي SSO ذوي دور **المسؤول**. للقيام بذلك، اختر **تمكين وصول API** من قائمة هذا المستخدم. يتم تمكين طريقة المصادقة `SSO+API` للمستخدم مما يتيح إنشاء رموز API.

    لاحقًا، يمكنك تعطيل مصادقة API للمستخدم بواسطة اختيار **تعطيل وصول API**. إذا تم ذلك، سيتم حذف جميع رموز API الحالية وفي غضون أسبوع - إزالتها.

## وضع SSO الصارم

تدعم Wallarm وضع **SSO الصارم** الذي يختلف عن SSO العادي بأنه يمكّن المصادقة SSO لجميع مستخدمي حساب الشركة دفعة واحدة. من الخصائص الأخرى لوضع SSO الصارم:

* يتم تحويل طريقة المصادقة لجميع المستخدمين الحاليين للحساب إلى SSO.
* يحصل جميع المستخدمين الجدد على SSO كطريقة مصادقة افتراضية.
* لا يمكن تحويل طريقة المصادقة إلى أي شيء غير SSO لأي مستخدم.

لتمكين أو تعطيل وضع SSO الصارم، اتصل بـ[فريق الدعم في Wallarm](mailto:support@wallarm.com).

!!! معلومات "كيفية معاملة الجلسات النشطة عند تمكين SSO الصارم"
    إذا كان هناك أي مستخدمين قد قاموا بالتسجيل في حساب الشركة عند التحول إلى وضع SSO الصارم، تظل هذه الجلسات نشطة. بعد تسجيل الخروج، سيُطلب من المستخدمين استخدام SSO.

## تحديد أعطال مصادقة SSO

إذا لم يتمكن المستخدم من تسجيل الدخول عبر SSO، يتم عرض رسالة الخطأ مع أحد رموز الخطأ الموضحة في الجدول أدناه. في معظم الحالات، يمكن لمسؤول حساب الشركة إصلاح هذه الأخطاء:

| رمز الخطأ | الوصف | كيفية الإصلاح |
|--|--|--|
| `saml_auth_not_found + userid` | المستخدم ليس لديه مصادقة SSO مُمكنة. | مكّن SSO كما هو موضح في القسم [أعلاه](#enabling-sso-authentication-for-users). |
| `saml_auth_not_found + clientid` | العميل ليس لديه تكامل SSO في قسم **التكاملات**. | اتبع التعليمات في وثائق [التكامل مع SAML SSO](intro.md). |
| `invalid_saml_response` أو `no_mail_in_saml_response` | موفر SSO قدم استجابة غير متوقعة. قد يكون ذلك دليلاً على تكامل SSO غير مُكوّن بشكل صحيح. | قم بما يلي:<br><ul><li>تأكد من عدم وجود أخطاء في التكامل SSO المُكون في قسم **التكاملات** في وحدة تحكم Wallarm.</li><li>تأكد من عدم وجود أخطاء في التكوين على جانب موفر SSO.</li></ul> |
| `user_not_found` | Wallarm لم يجد المستخدم بالبريد الإلكتروني المحدد. | أنشئ مستخدمًا بهذا البريد الإلكتروني في وحدة تحكم Wallarm. |
| `client_not_found` | لم يتم العثور على حساب الشركة في Wallarm. | أنشئ حساب مستخدم بنطاق بريد إلكتروني مناسب، الأمر الذي سيؤدي إلى إنشاء حساب الشركة على الفور. |

 إذا لزم الأمر، يمكن للمسؤول الاتصال بـ[فريق الدعم في Wallarm](mailto:support@wallarm.com) للحصول على المساعدة في إصلاح أي من هذه الأخطاء.