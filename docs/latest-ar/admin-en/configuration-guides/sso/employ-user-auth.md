#   تكوين المصادقة SSO للمستخدمين

[img-enable-sso-for-user]:  ../../../images/admin-guides/configuration-guides/sso/enable-sso-for-user.png
[img-disable-sso-for-user]: ../../../images/admin-guides/configuration-guides/sso/disable-sso-for-user.png

[doc-allow-access-gsuite]:  gsuite/allow-access-to-wl.md
[doc-allow-access-okta]:    okta/allow-access-to-wl.md

[doc-user-sso-guide]:       ../../../user-guides/use-sso.md
[doc-disable-sso]:          change-sso-provider.md   

[anchor-enable]:            #enabling-sso-authentication-for-users 
[anchor-disable]:           #disabling-sso-authentication-for-users      

يمكنك [تمكين][anchor-enable] أو [تعطيل][anchor-disable] مصادقة SSO لمستخدمي بوابة Wallarm.


##   تمكين المصادقة SSO للمستخدمين

!!! تحذير
    *   عند تمكين مصادقة SSO للمستخدمين، لن يتوفر آلية تسجيل دخول بالاسم/كلمة المرور والمصادقة الثنائية. عند تمكين المصادقة SSO، يتم مسح كلمة مرور المستخدم وتعطيل المصادقة الثنائية.
    *   يُفترض أنك قد منحت بالفعل المجموعة المطلوبة من المستخدمين الوصول إلى تطبيق Wallarm المكون على جانب [Okta][doc-allow-access-okta] أو [G Suite][doc-allow-access-gsuite].


لتمكين المصادقة SSO لمستخدمي Wallarm:

1. اذهب إلى **الإعدادات** → **المستخدمين**.
1. من قائمة المستخدم، اختر **تمكين تسجيل دخول SSO**.

![تمكين SSO لمستخدم Wallarm][img-enable-sso-for-user]

في النافذة المنبثقة، سيُطلب منك إرسال إشعار إلى المستخدم بأن المصادقة SSO مُمكنة. انقر على زر **إرسال إشعار**. إذا لم يكن الإشعار مطلوبًا، انقر على **إلغاء**.

بعد ذلك، يمكن للمستخدم [المصادقة][doc-user-sso-guide] من خلال مزود الهوية.

لاحظ أنه يمكنك أيضًا تمكين SSO لكل مستخدمي حساب الشركة باستخدام وضع [SSO الصارم](#strict-sso-mode).

##  تعطيل المصادقة SSO للمستخدمين

لتعطيل المصادقة SSO لمستخدمي Wallarm:

1. اذهب إلى **الإعدادات** → **المستخدمين**.
1. من قائمة المستخدم، اختر **تعطيل SSO**.

![تعطيل SSO لمستخدم Wallarm][img-disable-sso-for-user]

بعد ذلك، سيتم إخطار المستخدم بالبريد الإلكتروني بأن تسجيل الدخول باستخدام SSO معطل مع اقتراح (رابط) لاستعادة كلمة المرور لتسجيل الدخول بزوج الاسم/كلمة المرور. بالإضافة إلى ذلك، تصبح المصادقة الثنائية متاحة للمستخدم.

## SSO والمصادقة API

عند تمكين SSO للمستخدم، تصبح المصادقة لـ [الطلبات إلى واجهة برمجة تطبيقات Wallarm](../../../api/overview.md#your-own-client) غير متوفرة لهذا المستخدم. للحصول على بيانات اعتماد API العاملة، لديك خياران:

* إذا لم يتم استخدام وضع **SSO الصارم**، أنشئ مستخدمًا بدون خيار SSO تحت حساب شركتك، وأنشئ [رمز(رموز) API](../../../api/overview.md#your-own-client).
* إذا تم استخدام وضع **SSO الصارم**، يمكنك تمكين المصادقة API لمستخدمي SSO بدور **المدير**. للقيام بذلك، اختر **تمكين وصول API** من قائمة هذا المستخدم. يتم تمكين طريقة المصادقة `SSO+API` للمستخدم الذي يسمح بإنشاء رموز API.

    لاحقًا، يمكنك تعطيل المصادقة API للمستخدم بتحديد **تعطيل وصول API**. إذا تم ذلك، سيتم حذف جميع رموز API الموجودة وفي أسبوع - إزالة.

## وضع SSO الصارم

تدعم Wallarm وضع **SSO الصارم** الذي يختلف عن SSO العادي في أنه يمكّن المصادقة SSO لجميع مستخدمي حساب الشركة دفعة واحدة. الخصائص الأخرى لوضع SSO الصارم هي:

* يتم تحويل طريقة المصادقة لجميع المستخدمين الحاليين للحساب إلى SSO.
* جميع المستخدمين الجدد يحصلون على SSO كطريقة مصادقة افتراضيًا.
* لا يمكن تحويل طريقة المصادقة إلى أي شيء غير SSO لأي مستخدم.

لتمكين أو تعطيل وضع SSO الصارم، اتصل بـ [فريق دعم Wallarm](mailto:support@wallarm.com).

!!! معلومات "كيفية معاملة الجلسات النشطة عند تمكين SSO الصارم"
    إذا كان هناك أي مستخدمين مسجلين دخولهم في حساب الشركة عند التحول إلى وضع SSO الصارم، هذه الجلسات تظل نشطة. بعد تسجيل الخروج، سيُطلب من المستخدمين استخدام SSO.

## استكشاف الأخطاء وإصلاحها في المصادقة SSO

إذا لم يتمكن المستخدم من تسجيل الدخول عبر SSO، يتم عرض رسالة خطأ مع أحد أكواد الخطأ الموضحة في الجدول أدناه. في معظم الحالات، يمكن لمدير حساب الشركة إصلاح هذه الأخطاء:

| كود الخطأ | الوصف | كيفية الإصلاح |
|--|--|--|
| `saml_auth_not_found + userid` | المستخدم لا يملك SSO مُمكن. | مكّن SSO كما هو موضح في القسم [أعلاه](#enabling-sso-authentication-for-users). |
| `saml_auth_not_found + clientid` | العميل ليس لديه تكامل SSO في قسم **التكاملات**. | اتبع التعليمات في توثيق [التكامل مع SAML SSO](intro.md). |
| `invalid_saml_response` أو `no_mail_in_saml_response` | مزود SSO أعطى استجابة غير متوقعة. قد يكون ذلك علامة على تكامل SSO غير مُكوّن بشكل صحيح. | قم بإحدى الإجراءات التالية:<br><ul><li>تأكد من عدم وجود أخطاء في التكامل SSO المكون في قسم **التكاملات** في واجهة بوابة Wallarm.</li><li>تأكد من عدم وجود أخطاء في التكوين على جانب مزود SSO.</li></ul> |
| `user_not_found` | Wallarm لم يجد المستخدم بالبريد الإلكتروني المُحدد. | أنشئ مستخدمًا بهذا البريد الإلكتروني في واجهة بوابة Wallarm. |
| `client_not_found` | لم يُعثر على حساب الشركة في Wallarm. | أنشئ حساب مستخدم بنطاق بريد إلكتروني مناسب، والذي سينشئ حساب الشركة فورًا. |

 إذا لزم الأمر، يمكن للمدير التواصل مع [فريق دعم Wallarm](mailto:support@wallarm.com) للحصول على مساعدة في إصلاح أي من هذه الأخطاء.