[رابط-وثيقة-إنشاء-صور]:        create-image.md
[رابط-وثيقة-دليل-توازن-الحمولة]:            load-balancing-guide.md

[رابط-دليل-مفاتيح-ssh]:          ../../../installation/cloud-platforms/aws/ami.md#1-create-a-pair-of-ssh-keys
[رابط-دليل-مجموعة-الأمان]:    ../../../installation/cloud-platforms/aws/ami.md#2-create-a-security-group

[رابط-وثيقة-الأسئلة-المتكررة-عن-الأوتوسكالينج]:              https://aws.amazon.com/autoscaling/faqs/

[صورة-إنشاء-ويزارد-lt]:         ../../../images/installation-ami/auto-scaling/common/autoscaling-group-guide/create-launch-template.png
[صورة-إنشاء-ويزارد-asg]:        ../../../images/installation-ami/auto-scaling/common/autoscaling-group-guide/create-asg-with-template.png
[صورة-ويزارد-asg-1]:             ../../../images/installation-ami/auto-scaling/common/autoscaling-group-guide/asg-wizard-1.png
[صورة-سياسة-زيادة-asg]:      ../../../images/installation-ami/auto-scaling/common/autoscaling-group-guide/group-size-increase.png
[صورة-سياسة-نقصان-asg]:      ../../../images/installation-ami/auto-scaling/common/autoscaling-group-guide/group-size-decrease.png
[صورة-مثال-الإنذار]:            ../../../images/installation-ami/auto-scaling/common/autoscaling-group-guide/alarm-example.png
[صورة-التحقق-من-asg-في-السحابة]:       ../../../images/cloud-node-status.png

[مرساة-lt]:    #1-creating-a-launch-template
[مرساة-asg]:   #2-creating-an-auto-scaling-group

#   إعداد توسيع تلقائي لعقد التصفية

!!! info "الحقوق المطلوبة"
    قبل إعداد التوسيع التلقائي، تأكد من أن حساب أمازون AWS الخاص بك يتمتع بإحدى الحقوق التالية:
    
    *   `AutoScalingFullAccess`
    *   `AutoScalingConsoleFullAccess`

لإعداد توسيع تلقائي لعقد التصفية، اتبع الخطوات التالية:
1.  [إنشاء قالب إطلاق][مرساة-lt]
2.  [إنشاء مجموعة التوسيع التلقائي][مرساة-asg]

##  1.  إنشاء قالب إطلاق

يحدد قالب الإطلاق نوع النموذج المستخدم أثناء نشر صورة آلة أمازون (AMI) ويضبط بعض معلمات الآلة الافتراضية العامة.

أنشئ قالب إطلاق باتباع الخطوات التالية:

1.  انتقل إلى علامة التبويب **قوالب الإطلاق** على لوحة تحكم أمازون EC2 وانقر على زر **إنشاء قالب إطلاق**.

2.  أدخل اسم القالب في حقل **اسم قالب الإطلاق**.

3.  اختر صورة آلة أمازون [التي تم إنشاؤها مسبقًا][رابط-وثيقة-إنشاء-صور]. للقيام بذلك، انقر على رابط **البحث عن صورة آلة** واختر الصورة المطلوبة من كتالوج **صوري**.

4.  اختر نوع النموذج لإطلاق آلة افتراضية لعقدة التصفية من قائمة **نوع النموذج**.

    !!! warning "اختر نوع النموذج المناسب"
        اختر نفس نوع النموذج الذي استخدمته عندما قمت بتكوين عقدة التصفية في البداية أو نوعًا أقوى.
        
        استخدام نوع نموذج أقل قوة قد يؤدي إلى مشاكل في عملية التصفية. 

5.  اختر اسم زوج مفاتيح SSH [الذي تم إنشاؤه مسبقًا][رابط-دليل-مفاتيح-ssh] للوصول إلى عقدة التصفية من قائمة **اسم زوج المفاتيح**.

6.  اختر [مجموعة الأمان التي تم إنشاؤها مسبقًا][رابط-دليل-مجموعة-الأمان] من قائمة **مجموعات الأمان**.

7.  انقر على زر **إنشاء قالب إطلاق**.

    ![إنشاء قالب إطلاق][صورة-إنشاء-ويزارد-lt]
    
انتظر حتى تنتهي عملية إنشاء القالب.

بعد إنشاء قالب الإطلاق، يمكنك الانتقال إلى إنشاء مجموعة التوسيع التلقائي.

##  2.  إنشاء مجموعة التوسيع التلقائي

!!! info "اختيار طريقة التوسيع التلقائي"
    هذا القسم يصف عملية إنشاء مجموعة التوسيع التلقائي باستخدام طريقة EC2 Auto Scaling. 

    يمكنك أيضًا استخدام طريقة AWS Auto Scaling. 

    لمشاهدة الأسئلة الشائعة المفصلة عن طرق التوسيع التلقائي من أمازون، انتقل إلى هذا [الرابط][رابط-وثيقة-الأسئلة-المتكررة-عن-الأوتوسكالينج].

لإنشاء مجموعة التوسيع التلقائي، اتبع الخطوات التالية:

1.  انتقل إلى علامة التبويب **مجموعات التوسيع التلقائي** على لوحة تحكم أمازون EC2 وانقر على زر **إنشاء مجموعة التوسيع التلقائي**.

2.  اختر خيار **قالب الإطلاق**، ثم اختر قالب الإطلاق [الذي تم إنشاؤه مسبقًا][مرساة-lt] من القائمة وانقر على زر **الخطوة التالية**. 

    ![إنشاء مجموعة التوسيع التلقائي][صورة-إنشاء-ويزارد-asg]
    
3.  أدخل اسم مجموعة التوسيع التلقائي المرغوب في حقل **اسم المجموعة**.

4.  اختر نسخة **الأحدث** من قالب الإطلاق من قائمة **نسخة قالب الإطلاق**.

5.  اختر نوع النموذج المطلوب لمجموعة التوسيع التلقائي من خلال اختيار أحد خيارات **تركيبة الأسطول**.

    إذا اتبعت هذا الدليل عند إنشاء قالب إطلاق وتم تحديد نوع نموذج لإطلاق الآلات الافتراضية، فيمكنك استخدام خيار **الالتزام بقالب الإطلاق**.
    
    !!! info "اختر نوع النموذج المناسب"
        يمكنك أيضًا اختيار خيار **دمج خيارات الشراء والنماذج** إذا لم يتم تحديد نوع نموذج في قالب الإطلاق الخاص بك أو إذا كنت ترغب في اختيار أنواع نماذج مختلفة متعددة للتوسيع التلقائي.
        
        اختر نفس نوع النموذج الذي استخدمته عندما قمت بتكوين عقدة التصفية في البداية أو نوعًا أقوى. استخدام نوع نموذج أقل قوة قد يؤدي إلى مشاكل في عملية التصفية.

6.  أدخل حجم مجموعة التوسيع التلقائي الأولي في حقل **حجم المجموعة** (على سبيل المثال، نموذجين).

7.  اختر الـ VPC الصحيح من قائمة **الشبكة** المنسدلة.

8.  اختر الشبكات الفرعية الصحيحة من قائمة **الشبكات الفرعية** المنسدلة.

    !!! warning "توفير اتصال بالإنترنت لعقدة التصفية"
        تحتاج عقدة التصفية إلى الوصول إلى خادم واجهة برمجة تطبيقات Wallarm للتشغيل السليم. اختيار خادم واجهة برمجة التطبيقات Wallarm يعتمد على السحابة Wallarm التي تستخدمها:
        
        * إذا كنت تستخدم السحابة الأمريكية، يجب منح العقدة الوصول إلى `https://us1.api.wallarm.com`.
        * إذا كنت تستخدم السحابة الأوروبية، يجب منح العقدة الوصول إلى `https://api.wallarm.com`.

        تأكد من اختيار VPC والشبكات الفرعية الصحيحة و[تكوين مجموعة أمان][رابط-دليل-مجموعة-الأمان] بطريقة لا تمنع الوصول إلى خوادم واجهة برمجة التطبيقات Wallarm.

    ![إعدادات مجموعة التوسيع التلقائي العامة][صورة-ويزارد-asg-1]
    
9.  انتقل إلى صفحة **تكوين سياسات التوسيع** بالنقر على زر **التالي: تكوين سياسات التوسيع**.

10. اختر خيار **استخدام سياسات التوسيع لضبط سعة هذه المجموعة** لتفعيل التوسيع التلقائي.

11. أدخل الحد الأدنى والحد الأقصى لحجم مجموعة التوسيع التلقائي.

    !!! info "حجم مجموعة التوسيع التلقائي"
        لاحظ أن الحد الأدنى لحجم مجموعة التوسيع التلقائي يمكن أن يكون أقل من الحجم الأولي المحدد في الخطوة السادسة.
    
12. فعّل وضع تهيئة السياسات خطوة بخطوة بتحديد خيار **قم بتوسيع مجموعة التوسيع التلقائي باستخدام سياسات التوسيع البسيطة أو بالخطوات**.

13. قم بتهيئة سياسة زيادة حجم المجموعة باستخدام مجموعة معلمات **زيادة حجم المجموعة**.

    ![سياسة زيادة حجم مجموعة التوسيع التلقائي][صورة-سياسة-زيادة-asg]
    
    1.  إذا لزم الأمر، حدد اسم سياسة زيادة حجم المجموعة باستخدام معلمة **الاسم**.

    2.  اختر الحدث من **تنفيذ السياسة عندما** لتحديد الحدث الذي سيؤدي إلى زيادة حجم المجموعة. إذا لم تكن قد أنشأت أي أحداث سابقًا، انقر على زر **إضافة إنذار** لإنشاء حدث.

    3.  يمكنك تهيئة اسم الحدث، والمقياس للمراقبة، والإشعارات حول حدوث الأحداث.
    
        !!! info "الأدوار المطلوبة لتكوين الإشعارات"
            يحتاج حساب أمازون AWS الخاص بك إلى **AutoScalingNotificationAccessRole** لتكوين الإشعارات.
        
        !!! info "مثال"
            يمكنك ضبط تشغيل حدث باسم **استخدام عالي لوحدة المعالجة المركزية** عند الوصول إلى حمل متوسط للمعالج بنسبة 60% خلال خمس دقائق:
            
            ![مثال على إنذار][صورة-مثال-الإنذار]
        
        
        
        !!! info "المقاييس القياسية المتوفرة لسحابة أمازون"
            *   استخدام وحدة المعالجة المركزية (بالنسب المئوية)
            *   عمليات القراءة من القرص (بالب