# تكوين الاستعلام الديناميكي لأسماء النطاق في NGINX

إذا تم تمرير اسم النطاق في توجيه `proxy_pass` في ملف تكوين NGINX، فإن NGINX يحلل عنوان IP للمستضيف مرة واحدة فقط بعد البدء. إذا قام خادم DNS بتغيير عنوان IP للمستضيف، سيستمر NGINX في استخدام عنوان IP القديم حتى يتم إعادة تحميل NGINX أو إعادة تشغيله. قبل ذلك، سيرسل NGINX الطلبات إلى عنوان IP الخاطئ.

على سبيل المثال:

```bash
location / {
        proxy_pass https://demo-app.com;
        include proxy_params;
    }
```

للاستعلام الديناميكي لأسماء النطاق، يمكنك تعيين توجيه `proxy_pass` كمتغير. في هذه الحالة، سيستخدم NGINX عنوان DNS المحدد في توجيه [`resolver`](https://nginx.org/en/docs/http/ngx_http_core_module.html#resolver) عند حساب المتغير.

!!! تحذير "أثر الاستعلام الديناميكي لأسماء النطاق على معالجة الزيارات"
    * تكوين NGINX مع توجيه `resolver` والمتغير في توجيه `proxy_pass` يؤخر معالجة الطلبات لأنه سيكون هناك خطوة إضافية للاستعلام الديناميكي لأسماء النطاق في معالجة الطلب.
    * يعيد NGINX حل اسم النطاق عند انتهاء صلاحية وقته للحياة (TTL). من خلال إدراج معامل `valid` إلى توجيه `resolver`، يمكنك إخبار NGINX بتجاهل TTL وإعادة حل الأسماء بتردد محدد بدلا من ذلك.
    * إذا كان خادم DNS معطلاً، لن يقوم NGINX بمعالجة الزيارات.

على سبيل المثال:

```bash
location / {
        resolver 172.43.1.2 valid=10s;
        set $backend https://demo-app.com$uri$is_args$args;
        proxy_pass $backend;
        include proxy_params;
    }
```

!!! معلومة "الاستعلام الديناميكي لأسماء النطاق في NGINX Plus"
    يدعم NGINX Plus بشكل افتراضي الاستعلام الديناميكي لأسماء النطاق.