# معرفة عدد الطلبات التي تتعامل معها التطبيق كل شهر

أساليب الترخيص/الفوترة الأساسية في Wallarm تعتمد على مستوى الطلبات التي تخدمها عقد تصفية Wallarm الموزعة في بيئتك. هذا الوثيق يشرح كيفية معرفة عدد الطلبات التي تتعامل معها التطبيق بسهولة.

## الفرق التي لديها إمكانية الوصول إلى المعلومات

عادة، الفرق التالية في شركة قد تكون لديها إمكانية الوصول السهل إلى المعلومات:

* DevOps
* العمليات التقنية
* عمليات السحاب
* عمليات المنصة
* DevSecOps
* مدراء النظام
* مدراء التطبيق
* NOC

## طرق معرفة عدد الطلبات

هناك عدة طرق للبحث عن عدد الطلبات التي تتعامل معها التطبيق:

* العملاء المستخدمين لأمازون AWS الذين يستخدمون موازنات الحمل ELB أو ALB يمكنهم استخدام مقاييس مراقبة AWS لموازنات الحمل لتقدير مستوى الطلبات اليومية والأسبوعية للتطبيقات التي تخدمها موازنات الحمل:

    ![مثال على مراقبة AWS](../../images/operation/aws-requests-example.png)

    على سبيل المثال، إذا أظهر الرسم البياني أن مستوى الطلبات عادةً في الدقيقة هو 350 وبافتراض أن هناك، في المتوسط، 730 ساعة في الشهر، إذًا عدد الطلبات الشهرية هو `350 * 60 * 730 = 15,330,000`.

* مستخدمي GCP الذين يستخدمون موازنات الحمل HTTP يمكنهم استخدام المقياس المراقبي **https/request_count**. المقياس غير متاح لموازنات الحمل الشبكية.
* مستخدمي Microsoft IIS يمكنهم الاعتماد على مقياس **Requests Per Sec** لمتوسط عدد الطلبات لكل ثانية وحساب عدد الطلبات التي يخدمها خادم IIS واحد شهريًا. في الحساب، يُفترض أن هناك، في المتوسط، `730 * 3,600` ثانية في الشهر.
* مستخدمو خدمات مراقبة أداء التطبيق مثل New Relic، Datadog، AppDynamics، SignalFX وغيرها يمكنهم الحصول على المعلومات من منصات APM الخاصة بهم (تأكد فقط من الحصول على قيمة مجمعة لجميع الخوادم المشاركة في الطبقة الحدية، وليس خادم واحد فقط).
* مستخدمو أنظمة مراقبة البنية التحتية القائمة على السحاب مثل Datadog، AWS CloudWatch (والعديد غيرها) أو مستخدمو أنظمة المراقبة الداخلية مثل Prometheus أو Nagios على الأرجح يراقبون بالفعل مستوى الطلبات التي يتم خدمتها في موقعهم الحدودي (موازنات الحمل، خوادم الويب، خوادم التطبيقات)، ويمكنهم استخدام المعلومات لتقدير متوسط عدد الطلبات المعالجة شهريًا بسهولة.
* طريقة أخرى هي استخدام سجلات موازنات الحمل الحدية أو خوادم الويب لعد عدد السجلات في فترة زمنية (مثاليًا - 24 ساعة) بافتراض أن هناك سجل واحد لكل طلب تم خدمته. على سبيل المثال، هذا الخادم الويب يدور ملف سجل وصول NGINX مرة كل يوم، مع تسجيل 653,525 طلب في ملف السجل:

    ```bash
    cd /var/log/nginx/
    zcat access.log.2.gz | wc -l
    # 653525
    ```

    * تقدير عدد الطلبات التي يخدمها الخادم شهريًا هو `653,525 * 30 = 19,605,750`.
    * معرفة العدد الإجمالي لخوادم الويب المستخدمة يمكن أن يجعل من الممكن تقدير عدد الطلبات التي يتعامل معها التطبيق بأكمله.

* للتطبيقات الويب النقية التي تستخدم Google Analytics أو خدمات مشابهة لتتبع ومراقبة تجربة المستخدم، يمكن استخراج المعلومات حول عدد الصفحات التي تم خدمتها وجميع الأشياء المضمنة من الخدمات.