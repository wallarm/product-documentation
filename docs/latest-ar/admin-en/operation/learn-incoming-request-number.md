# تعلم عدد الطلبات التي يتعامل معها التطبيق شهريًا

طرق الترخيص/الفوترة الرئيسية لـ Wallarm مبنية على مستوى الطلبات التي تخدمها عقد التصفية Wallarm الموزعة في بيئتك. هذا الوثيقة تشرح كيف يمكن بسهولة تعلم عدد الطلبات التي يتعامل معها التطبيق.

## الفرق التي لها الوصول إلى المعلومات

عادةً، قد تتمتع الفرق التالية في شركة بوصول سهل إلى المعلومات:

* DevOps
* العمليات الفنية
* عمليات السحابة
* عمليات النظام الأساسي
* DevSecOps
* مديرو الأنظمة
* مديرو التطبيقات
* NOC

## الطرق لتعلم عدد الطلبات

هناك عدة طرق للبحث عن عدد الطلبات التي يتعامل معها التطبيق:

* عملاء AWS الذين يستخدمون موازنات الحمولة ELB أو ALB يمكنهم استخدام مقاييس مراقبة AWS لموازنات الحمولة لتقدير مستوى الطلبات اليومية والأسبوعية للتطبيقات التي تُخدم من قبل موازنات الحمولة:

    ![مثال على مراقبة AWS](../../images/operation/aws-requests-example.png)

    على سبيل المثال، إذا أظهر الرسم البياني أن متوسط مستوى الطلبات بالدقيقة هو 350 وافتراض أن هناك، في المتوسط، 730 ساعة في الشهر، فإن عدد الطلبات الشهرية يكون `350 * 60 * 730 = 15,330,000`.

* مستخدمو GCP لموازنات الحمولة HTTP يمكنهم استخدام المقياس الرقابي **https/request_count**. المقياس غير متاح لموازنات الحمولة الشبكية.
* مستخدمو Microsoft IIS يمكنهم الاعتماد على مقياس **Requests Per Sec** لمتوسط عدد الطلبات بالثانية وحساب عدد الطلبات التي يخدمها خادم IIS واحد في الشهر. في حساب، افترض أن هناك، في المتوسط، `730 * 3,600` ثانية في الشهر.
* مستخدمو خدمات مراقبة أداء التطبيقات مثل New Relic, Datadog, AppDynamics, SignalFX وغيرهم يمكنهم الحصول على المعلومات من ألواح تحكم APM الخاصة بهم (فقط تأكد من الحصول على قيمة مجمعة لجميع الخوادم المشاركة في طبقة الحافة، وليس خادم واحد فقط).
* مستخدمو أنظمة مراقبة البنية التحتية السحابية مثل Datadog, AWS CloudWatch (والعديد غيرهم) أو مستخدمو أنظمة المراقبة الداخلية مثل Prometheus أو Nagios على الأرجح يراقبون بالفعل مستوى الطلبات المخدومة في موقعهم الحافي (موازنات الحمولة، خوادم الويب، خوادم التطبيقات)، ويمكنهم استخدام المعلومات لتقدير متوسط عدد الطلبات المخدومة شهريًا بسهولة.
* نهج آخر هو استخدام سجلات موازنات الحمولة الحافية أو خوادم الويب لعد عدد السجلات في فترة زمنية (المثالي - 24 ساعة) مع الافتراض أن هناك سجل واحد لكل طلب مخدوم. على سبيل المثال، هذا الخادم الويب يقوم بتدوير ملف سجل الوصول NGINX مرة واحدة في اليوم، مع تسجيل 653,525 طلب في ملف السجل:

    ```bash
    cd /var/log/nginx/
    zcat access.log.2.gz |wc -l
    # 653525
    ```

    * تقدير الطلبات التي يخدمها الخادم في الشهر هو `653,525 * 30 = 19,605,750`.
    * معرفة العدد الإجمالي لخوادم الويب المستخدمة يجعل من الممكن تقدير عدد الطلبات التي يتعامل معها التطبيق بأكمله.

* بالنسبة للتطبيقات الويب النقية التي تستخدم Google Analytics أو خدمات مماثلة لتتبع ومراقبة تجربة المستخدم، يمكن استخراج المعلومات حول عدد الصفحات وجميع الكائنات المضمنة التي تم خدمتها من الخدمات.