```markdown
[img-search-for-anomalies]:         ../../../images/fast/operations/en/test-policy/fuzzer/search-for-anomalies-scheme.png
[img-anomaly-description]:          ../../../images/fast/operations/common/test-policy/fuzzer/anomaly-description.png

[doc-fuzzer-configuration]:         fuzzer-configuration.md

[link-payloads-section]:            fuzzer-configuration.md#the-payloads-section
[link-stop-fuzzing-section]:        fuzzer-configuration.md#the-stop-fuzzing-if-response-section

# ファザーの動作原則

ファザーは255個の異常なバイト（`0x01`から`0xFF`まで）をチェックします。リクエストのポイントに1つ以上のこれらのバイトが挿入されると、ターゲットアプリケーションに異常な動作を引き起こす可能性があります。

各バイトを個別にチェックする代わりに、ファザーは固定長の異常なバイトのシーケンス（*ペイロード*）を1つ以上ポイントに追加し、このリクエストをアプリケーションに送信します。

許可されたポイントを変更するために、ファザーは以下の操作を行います:

* ペイロードを挿入します:
    * 値の先頭に
    * 値のランダムな位置に
    * 値の末尾に
* 以下のペイロード値を置換します:
    * ランダムなセグメント
    * 最初の`M`バイト
    * 最後の`M`バイト
    * 文字列全体

[ファザーの設定][doc-fuzzer-configuration]を使用して、FASTからアプリケーションへのリクエストに含まれるペイロードサイズ`M`がバイト単位で設定されます。これは以下のポイントに影響します:

* ペイロード挿入が使用される場合、ポイント値に追加されるバイト数
* ペイロード置換が使用される場合、ポイント値で置換されるバイト数
* アプリケーションに送信されるリクエストの数

ペイロードを含むリクエストのレスポンスで異常な動作が検出された場合、ファザーは各ペイロードバイトに対して個別のリクエストをアプリケーションに送信します。したがって、ファザーは異常な動作を引き起こした特定のバイトを検出します。

![異常なバイトのチェックスキーム][img-search-for-anomalies]

すべての検出されたバイトは異常の説明に提供されます:

![異常の説明][img-anomaly-description]

??? info "ファザー動作の例"
    あるポイント値の最初の250バイトを[置換](fuzzer-configuration.md)するペイロードサイズが250バイトであるとします。

    この条件下で、ファザーは既知のすべての異常なバイトを送信するために、250バイトのペイロードと5バイトのペイロードの2つのリクエストを作成します。

    ベースラインリクエストでの初期のポイント値は以下のように変更されます:

    * 値が250バイトを超える場合: 最初に値の最初の250バイトが250バイトのペイロードに置換され、その後、最初の250バイトが5バイトのペイロードに置換されます。
    * 値が250バイト未満の場合: 初めに値全体が250バイトのペイロードに置換され、その後、値全体が5バイトのペイロードに置換されます。

    5バイトのペイロード`ABCDE`が、長いポイント値`_250-bytes-long-head_qwerty`の最初の250バイトを置換し、異常を引き起こしたと仮定します。言い換えると、ポイント値`ABCDEqwerty`のテストリクエストが異常を引き起こしました。

    この場合、ファザーは以下のポイント値で各バイトをチェックするために追加で5つのリクエストを作成します:

    * `Aqwerty`
    * `Bqwerty`
    * `Cqwerty`
    * `Dqwerty`
    * `Eqwerty`

    1つ以上のこのようなリクエストで再び異常が発生すると、ファザーは検出された異常なバイトのリストを作成します。例えば、`A`と`C`になります。

次に、[ファザーの設定][doc-fuzzer-configuration]および異常が検出されたかどうかを定義するルールの説明についての情報を取得できます。

FASTファザーは1回の反復処理ごとに1つの許可されたポイント（*ファジング*）を処理します。[ファジング停止ルール][link-stop-fuzzing-section]に従って、1つ以上のポイントが一貫して処理されます。
```