# Wallarmノードのバージョン管理ポリシー

本書は、[NGINXベースおよびネイティブノード](../installation/nginx-native-node-internals.md)として提供されるセルフホスト型フィルタリングノードに対するWallarmのバージョン管理ポリシーの詳細を示します。本書では、バージョン管理の基準、リリーススケジュール、および互換性のガイドラインについて説明し、ノードのバージョンの選択、更新、管理を効果的に行うための支援をします。

各ノードのバージョンは、Dockerイメージ、Helmチャート、またはオールインワンインストーラーなど、さまざまなプラットフォーム上で展開するためにパッケージ化されたアーティファクトのセットとしてリリースされます。

この文書は、Edgeノードのバージョン管理については扱いません。Edgeノードは管理対象ソリューションであり、Wallarmが自動的に最新の安定バージョンへアップグレードします。

## バージョン一覧

| NGINXノードのバージョン   | ネイティブノードのバージョン | リリース日     | サポート期限    |
|---------------------------|---------------------------|----------------|----------------|
| 2.18以下の2.x             | -                         |                | 2021年11月    |
| 3.6以下の3.x              | -                         | 2021年10月    | 2022年11月    |
| 4.6以下の4.x              | -                         | 2022年6月     | 2024年4月     |
| 4.8                       | -                         | 2023年10月    | 2024年11月    |
| 4.10                      | -                         | 2024年1月     |                |
| 5.x                       | 0.x                       | 2024年7月     |                |

## バージョンの構造

ノードのバージョンは次の形式に従います:

```bash
<MAJOR_VERSION>.<MINOR_VERSION>.<PATCH_VERSION>[-<BUILD_NUMBER>]
```

| 要素                | 説明 | リリース頻度 |
| ------------------- | ---- | ------------ |
| `<MAJOR_VERSION>`   | メジャーバージョンの変更は、重大なアップデート、新機能、または互換性破壊の変更を示します。+1でインクリメントされます。例：`4.x`および`5.x`。 | 6ヶ月ごと、または主要な変更が必要な場合 |
| `<MINOR_VERSION>`   | マイナーバージョンの変更は、既存の機能内での強化や新しい機能を含み、主要な新しいユースケースを導入しません。+1でインクリメントされます。例：`5.0`および`5.1`。 | 毎月 |
| `<PATCH_VERSION>`   | マイナーなバグ修正または特定の強化のためのパッチです。最新のマイナーレリースにのみ適用されます。リリースブランチのコミット数に基づいて連続的に数値が増加します（+1、+2など）。例：`5.1.0`および`5.1.1`。 | 必要に応じて |
| `<BUILD_NUMBER>`（任意） | Wallarmノード自体とは関係のない変更（例えば、Helmチャートの依存関係の更新など）を示します。この数値はパッチリリース間でアーティファクトに変更があった場合にのみ増加します（例：`5.1.0-1`、`5.1.0-2`）。 | 必要に応じて |

このバージョン管理アプローチは、NGINXノードとネイティブノードの両方に同様に適用されます。あるノードタイプのメジャーリリースは、他方にも反映されます。

## バージョンサポートポリシー

Wallarmは、最新の2つのメジャーバージョンに対して、最新のマイナーバージョンに限定してバグ修正、機能更新、および脆弱性パッチをサポートします。たとえば、6.xがリリースされた場合、5.xの最新マイナーバージョン（例：5.12）のみがサポートされます。

新しいメジャーバージョンがリリースされると、該当するバージョンから2つ前（例：6.x→4.x）のサポートは3ヶ月後に終了します。

非推奨のバージョンは引き続きダウンロード可能ですが、更新されなくなります。

## NGINXとの互換性

ほとんどのNGINXノードのアーティファクトは、上流のNGINXソースからの安定バージョンと一致します。

たとえば、Wallarm Ingress Controllerは[Community Ingress NGINX Controller](https://github.com/kubernetes/ingress-nginx)をベースとしています。上流のバージョンが非推奨と指定された場合、Wallarmは30日以内に新しい安定バージョンへ更新し、マイナーバージョンとしてリリースします。互換性を確保するため、更新はこれより早く行われる場合もありますが、非推奨指定を超えて遅延することはありません。

## 新バージョンの通知

Wallarmは、主要およびマイナーアップデートについてのリリースノートを以下で公開します:

* パブリックドキュメント - [NGINXノードアーティファクト棚卸](node-artifact-versions.md)および[ネイティブノードアーティファクト棚卸](native-node/node-artifact-versions.md)を参照してください
* [Product Changelog](https://changelog.wallarm.com/)
* Wallarm Console内のアップデートセクション  
   
    ![Wallarm Consoleにおける新しいバージョンの通知](../images/updating-migrating/wallarm-console-new-version-notification.png)
* Wallarm Console内の各ノードは、**Up to date**ステータスを表示するか、各コンポーネントの利用可能なアップデートを一覧表示します。  
   
    ![ノードカード](../images/user-guides/nodes/view-regular-node-comp-vers.png)

## アップグレード手順

主要およびマイナーアップデートのインストール手順は、新バージョンと併せて公開されます。特定のアーティファクトの更新手順の詳細については、ドキュメントの**Operations → Node Upgrade**をご参照ください。