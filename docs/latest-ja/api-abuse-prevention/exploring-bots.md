# Exploring Bot Activity

## ブロックされた悪意のあるボットとその攻撃の調査

**API Abuse Prevention**モジュールは、[denylist](../user-guides/ip-lists/denylist.md)または[graylist](../user-guides/ip-lists/graylist.md)にボットを追加することで、ボットを1時間ブロックします。

Wallarm Console → **IPリスト** → **Denylist** または **Graylist** でブロックされたボットのIPを調査することができます。`Bot` という**原因**で追加されたIPを調査します。

![Denylisted bot IPs](../images/about-wallarm-waf/abi-abuse-prevention/denylisted-bot-ips.png)

!!! info "確信度"
    [ディテクターの作業](../api-abuse-prevention/overview.md#how-api-abuse-prevention-works)結果、検出された全てのボットには**確信度のパーセンテージ**が与えられます。つまり、これがボットであると私たちはどの程度確信しているかということです。ボットタイプごとにディテクターには異なる相対的重要性/投票数があります。そのため、確信度のパーセンテージは、このボットタイプで可能な全投票数の中で獲得した投票数です（作業したディテクターから提供されます）。

ボット保護プロセスに介入することができます。denylistまたはgraylistに追加されているIPが実際には悪意のあるボットに使用されていない場合、リストからIPを削除するか、[allowlist](../user-guides/ip-lists/allowlist.md)に追加することができます。Wallarmは、allowlistに追加されたIPからのすべてのリクエスト、悪意のあるものも含めてブロックすることはありません。

また、ボットによるAPI abuse攻撃を調査することもできます。これは、Wallarm Console → **イベント**セクションで行うことができます。`api_abuse`検索キーを使用するか、**タイプ**フィルターから`API Abuse`を選択します。

![API Abuse events](../images/about-wallarm-waf/abi-abuse-prevention/api-abuse-events.png)

ボット情報は3つのヒートマップで視覚化されます。全てのヒートマップでは、バブルが大きくなり、色が赤くなり、右上角に近づくほど、そのIPをボットと見なす理由が増えます。

ヒートマップでは、現在のボット（**this bot**）を過去24時間以内に同一のアプリケーションを攻撃した他のボットと比較することもできます。攻撃したボットが多すぎる場合、もっとも疑わしい30個だけが表示されます。

ヒートマップは以下のとおりです：

* **パフォーマンス**は、現在と他の検出されたボットのパフォーマンスを視覚化します。これには、リクエストの非一意性、スケジュールされたリクエスト、RPS、リクエスト間隔が含まれます。
* **行動**は、現在と他の検出されたボットの疑わしい行動のスコアを視覚化します。これには、疑わしい行動の度合い、重要または敏感なエンドポイントへのリクエストの量、RPS、ボットとして彼らを検出したボットディテクターの数が含まれます。
* **HTTPエラー**は、ボットの活動によって引き起こされたAPIエラーを視覚化します。これには、彼らがターゲットする異なるエンドポイントの数、彼らが行う安全でないリクエストの数、彼らのRPS、彼らが受け取るエラーレスポンスコードの数が含まれます。

各ヒートマップには、バブルのサイズ、色、位置の詳細な説明が含まれています（**詳細表示**を使用）。必要な領域を矩形で囲んでヒートマップをズームインすることができます。

**API Abuse Prevention**モジュールは、クライアントのトラフィックをURLパターンにまとめます。URLパターンには以下のセグメントがあります：

| セグメント | 含む内容 | 例 |
|---|---|---|
| SENSITIVE | 例えば管理パネルなど、アプリケーションの重要な機能やリソースへのアクセスを提供するURL部分。これらは潜在的なセキュリティ侵害を防ぐため、機密情報として保持され、承認された担当者のみが利用できるように制限すべきです。 | `wp-admin` |
| IDENTIFIER | 例えば数値識別子、UUIDなどのさまざまな識別子。 | - |
| STATIC | 様々な種類の静的ファイルを含むフォルダ。 | `images`, `js`, `css` |
| FILE | 静的ファイル名。 | `image.png` |
| QUERY | クエリパラメータ。 | - |
| AUTH | 認証/認可エンドポイントに関連するコンテンツ。 | - |
| LANGUAGE | 言語関連部分。 | `en`, `fr` |
| HEALTHCHECK | ヘルスチェックエンドポイントに関連するコンテンツ。 | - |
| VARY | その他のカテゴリに分類することができない場合、そのセグメントはVARYとマークされます。URLパスの可変部分。 | - |

## 悪意のあるボットとその攻撃の探求

あなたはWallarm Console UIでボットの活動を以下のように調査することができます：

* **IP lists**セクションで悪意のあるボットを探索します
* **Events**セクションでボットが行ったAPIの乱用を表示します

[Learn how to explore the bots' activity →](../api-abuse-prevention/setup.md#exploring-blocked-malicious-bots-and-their-attacks)