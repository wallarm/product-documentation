# シャドウ API、オーファン API、ゾンビ API <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

[API Discovery](overview.md) モジュールは、アップロードされた仕様とライブトラフィックを比較することによって、シャドウ API、オーファン API、ゾンビ API を自動的に識別します。

|ローグ API の種類 | それは何ですか？ |
|--|--|
| [シャドウ API](#shadow-api) | 適切な認証や監督なしに組織のインフラストラクチャ内に存在する未文書化のAPI。|
| [オーファン API](#orphan-api) | トラフィックを受信しない文書化された API。|
| [ゾンビ API](#zombie-api) | 使用されていないとみなされている廃止された API が、実際にはまだ使用されています。|

![API Discovery - ローグ API のハイライトとフィルタリング](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

## 時間単位でローグ API を監視する

仕様をアップロードして、API Discoveryによって明らかにされたエンドポイントとその内容を即座に比較できます。しかし、時間とともに変わる可能性があるのは2つのことです：

* 実際のAPIインベントリ（API Discoveryによって変更が明らかにされる）
* 自分の仕様（新しいバージョンが到着する）

そのため、ローグ API を**時間ごとの基準**で継続的に監視するオプションがあります。このオプションを使用するには、URL から仕様をアップロードする必要があります。仕様自体は、各比較の前に更新されます。

時間単位でローグ API を監視するには：

1. [US](https://us1.my.wallarm.com/api-specifications) または [EU](https://my.wallarm.com/api-specifications) クラウドの **API 仕様** セクションに移動します。
1. **仕様をアップロード**をクリックします。
1. アップロードする仕様を選択します。OpenAPI 3.0 JSONまたはYAML形式である必要があります。
1. 比較パラメータを設定します：

    * アプリケーションとホスト - 選択したアプリケーション/ホストに関連するエンドポイントのみが比較されます。**現在および将来発見されるすべてのアプリケーションのホストと比較**を選択すると、現在知られているすべてのホスト（選択したアプリケーションの）および将来発見されるすべてのホストが比較に含まれます。

        比較設定は後でいつでも変更できます - この後、比較が再実行され、新しい結果が提供されます。

    * URLからのアップロードを選択します。必要に応じて、認証用のトークンを指定できます。
    * **定期的な比較を実行**オプションを選択した状態にします（デフォルトでは選択されています）。

    ![API Discovery - API仕様 - ローグ API を見つけるためのAPI仕様のアップロード](../images/about-wallarm-waf/api-discovery/api-discovery-specification-upload.png)

1. アップロードを開始します。

アップロードが完了すると、**API 仕様**のリストで各仕様に対してローグ（シャドウ、オーファン、ゾンビ）APIの数が表示されます。

![API 仕様セクション](../images/about-wallarm-waf/api-discovery/api-discovery-specifications.png)

また、ローグ API は **API Discovery** セクションに表示されます。選択した比較に関連するシャドウ、オーファン、および/またはゾンビ API のみを表示し、残りのエンドポイントをフィルタリングするには、**ローグ API** フィルタを使用します。

![API Discovery - ローグ API のハイライトとフィルタリング](../images/about-wallarm-waf/api-discovery/api-discovery-highlight-rogue.png)

このようなエンドポイントの詳細では、**仕様の競合**セクションで、シャドウ/ゾンビ/オーファンが検出された仕様が示されます。

シャドウ API も、[API Discovery ダッシュボード](dashboard.md)で最もリスクの高いエンドポイントの中に表示されます。

## 一回限りの比較によるローグ API の検出

仕様をアップロードして、API Discoveryによって明らかにされたエンドポイントとその内容を即座に１回限りの比較を行うことができます。これを行うには、比較設定でローカルマシンからのアップロードを選択するか、URLからアップロードされた仕様に対して**定期的な比較を実行**オプションの選択を解除します。

次の点を考慮してください：

* **比較を再スタート** → 仕様メニューにて、いつでも比較を再開できます。
* **API仕様** → 仕様の詳細ウィンドウ → **仕様をダウンロード** を介して、以前にアップロードされた仕様をダウンロードできます。