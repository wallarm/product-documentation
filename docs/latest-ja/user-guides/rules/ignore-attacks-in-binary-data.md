# バイナリデータの攻撃サインを無視する

ルール **バイナリデータを許可する** および **特定のファイルタイプを許可する** は、バイナリデータに対する標準的な攻撃検出ルールを調整するために使用されます。

デフォルトでは、Wallarmノードはすべての既知の攻撃サインに対して受信リクエストを解析します。解析中、Wallarmノードは攻撃サインを一般的なバイナリ記号として認識しない場合があり、バイナリデータ内に誤って有害なペイロードを検出する可能性があります。

ルール **バイナリデータを許可する** および **特定のファイルタイプを許可する** を使用すると、バイナリデータを含むリクエスト要素を明示的に指定できます。指定されたリクエスト要素の解析中、Wallarmノードはバイナリデータ内で絶対に渡されない攻撃サインを無視します。

* ルール **バイナリデータを許可する** は、バイナリデータ（たとえば、アーカイブされたファイルや暗号化されたファイル）を含むリクエスト要素に対する攻撃検出を微調整することができます。
* ルール **特定のファイルタイプを許可する** は、特定のファイルタイプ（たとえば、PDF、JPG）を含むリクエスト要素に対する攻撃検出を微調整することができます。

## ルールの作成と適用

--8<-- "../include-ja/waf/features/rules/rule-creation-options.md"

**ルール** セクションでルールを作成して適用するには：

1. バイナリデータが指定されたリクエスト要素に渡される場合の攻撃検出ルールを任意に調整するために、Wallarm Consoleの **ルール** セクションで **バイナリデータを許可する** ルールを作成します。このルールは次のコンポーネントで構成されます：

      * **条件** [は](rules.md#branch-description)、ルールを適用するエンドポイントを記述します。
      * **リクエストの一部** は、バイナリデータを含む元のリクエスト要素を示します。

         --8<-- "../include-ja/waf/features/rules/request-part-reference.md"
2. 特定のファイルタイプが指定されたリクエスト要素に渡される場合の攻撃検出ルールを調整するために、Wallarm Consoleの **ルール** セクションで **特定のファイルタイプを許可する** ルールを作成します。このルールは次のコンポーネントで構成されます：

      * **条件** [は](rules.md#branch-description)、ルールを適用するエンドポイントを記述します。
      * 攻撃サインを無視するファイルタイプ。
      * **リクエストの一部** は、指定したファイルタイプを含む元のリクエスト要素を示します。

         --8<-- "../include-ja/waf/features/rules/request-part-reference.md"
3. [ルールのコンパイルが完了する](rules.md)のを待ちます。

## ルールの例

ユーザーがサイトのフォームを使用して画像のバイナリファイルをアップロードすると、クライアントは `https://example.com/uploads/` に型 `multipart/form-data` のPOSTリクエストを送信します。バイナリファイルは、本文パラメータ `fileContents` に渡されます。

パラメータ `fileContents` の攻撃検出を微調整する **バイナリデータを許可する** ルールは、次のようになります：

![ルール「バイナリデータを許可する」の例](../../images/user-guides/rules/ignore-binary-attacks-example.png)