# 会社の公開資産の管理 <a href="../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../images/api-security-tag.svg" style="border: none;"></a>

Wallarmコンソールの**スキャナー**セクションでは、Wallarm Scannerが自動的に検出した公開資産すべて（ドメイン、IPアドレス、ポートなど）を確認することができます。

プロジェクトが成長するとリソースが増加し、管理が困難になります。リソースは会社のデータセンター外に位置する可能性があり、セキュリティが妥協されることがあります。Wallarmは、エシカルハッカーに似た方法を使用してセキュリティを評価し、結果を見える化することで支援します。

![スキャナーセクション](../images/user-guides/scanner/check-scope.png)

## 資産を追加する

Wallarmにあなたの会社の公開資産を発見させるためには、最初の公開資産を手動で追加します。**ドメインまたはIPを追加** をクリックし、あなたのドメインまたはIPのいずれかを入力します：

![スキャナーセクション](../images/user-guides/scanner/add-asset-manually.png)

新しいドメインまたはIPアドレスが追加されると、Wallarm Scannerはリソースに関連する資産を検索し、それらをリストに追加するためのスキャンプロセスを開始します。Wallarmは最初にポートをスキャンし、その後これらのポート上のネットワークリソースを検出します。

公開資産を収集し更新するためのさまざまな方法が繰り返し使用されます：

* 自動モード
    * DNSゾーン転送 ([AXFR](https://tools.ietf.org/html/rfc5936))
    * NSおよびMXレコードの受信
    * SPFレコードデータの受信
    * サブドメインディクショナリー検索
    * SSL証明書の解析
* WallarmコンソールUIまたは[Wallarm API](../api/overview.md)を通じた手動データ入力。

**設定**セクションで[資産検出方法を制御](#fine-tuning-asset-scanning)することができます。

## ドメインを予約する

あなたは、Wallarmにあなたの会社の公開資産のリストにのみ追加できるドメインを予約するように要求することができます。これらのドメインを他のアカウントが追加するのを防ぐために、予約リクエストを[support@wallarm.com](mailto:support@wallarm.com)に送信してください。

## 資産を管理する

Wallarmは公開資産を、ドメイン、IP、およびサービスグループに分類します。 IPアドレスが特定のデータセンターに所属している場合、アセットの横に表示される対応するタグ（AmazonのAWSやGoogleのGCPなど）が表示されます。

いずれのユーザーも見ていない新たに発見された資産は**新規**タブに、脆弱性スキャンが[無効化](#disabling-vulnerability-scanning-for-certain-assets)されている資産は**無効**タブに表示されます。

リソースのドメイン、IPアドレス、およびポートは相互に依存しています。資産を選択すると、選択したIPアドレスに関連するドメインなど、その関連性を表示することができます：

![関連性を持つ要素](../images/user-guides/scanner/asset-with-associations.png)

### 資産の接続を制御する

デフォルトでは、優先度が高い資産は、優先度が低いものが無効化されていてもアクティブなままです。ドメインを[無効化](#disabling-vulnerability-scanning-for-certain-assets)すると、関連するIPアドレスとポートも無効化されます。IPアドレスを[削除](#deleting-assets)すると、関連するポートが削除されますが、ドメインはアクティブなままです。資産の接続を削除することにより、各資産を個々に無効化または削除することができます。

各資産のスキャン設定を独立して管理するには：

1. 互いに切断する必要がある資産ペアから1つの資産を選択します。
1. 現在の資産とペアになっている資産の隣のスイッチをクリックします。

    現在のリソースの名前は太字で表示されます。 UIにはその発見日も表示されます。

![リソース接続を無効化](../images/user-guides/scanner/disable-association.png)

資産間の接続を有効化するには、接続を無効化するときと同様の手順を守ってください。

### 資産を削除する

資産を**削除**することにより、Wallarmが誤ってリストに追加した資産を報告することができます。削除された資産は、今後のスキャンでは発見されません。

間違って削除された資産を復旧するには、[Wallarmサポートチーム](mailto:support@wallarm.com)に連絡してください。

### 公開資産リストの変更に関する通知

Wallarmは公開資産リストの変更（新たに発見された公開資産、無効化されたもの、削除されたもの）に関する通知を送信することができます。

通知を受け取るには、適切な[ネイティブのインテグレーション](settings/integrations/integrations-intro.md)（例：PagerDuty、Opsgenie、Slack、Telegram）をメッセンジャーやSOARシステムと設定してください。

Slackメッセージの例：

```
[テストメッセージ] [テストパートナー] ネットワーク外周が変更されました

通知タイプ: new_scope_object_ips

新しく発見されたネットワーク外周のIPアドレス：
8.8.8.8

クライアント: TestCompany
Cloud: EU
```

## アセットスキャンの詳細設定

Wallarmで資産スキャンを詳細に設定するには、**設定**ボタンをクリックします。ここから、Wallarm Scannerがあなたの会社の公開資産を発見するために使う方法を制御することができます。デフォルトでは、すべての利用可能な方法が使用されます。

![スキャナー設定](../images/user-guides/vulnerabilities/scanner-configuration-options.png)

Wallarm Scannerには**基本的なスキャナー機能**というグローバルスイッチがあります。このスイッチは、アセットのスキャニングと脆弱性発見の両方のプロセスを制御するために、会社全体のアカウントでスキャナーを有効化または無効化します。**脆弱性**セクションでも同じトグルスイッチを見つけることができます。一部のセクションでスイッチを切り替えると、他のセクションの設定も自動的に更新されます。

## 公開資産を脆弱性スキャン

Wallarmは、あなたのインフラストラクチャにおけるセキュリティ上の問題を発見するために、様々な方法を使用します。これには、公開資産を典型的な脆弱性のためにスキャンすることも含まれます。スキャナーは、公開資産を収集後、すべてのIPアドレスとドメインの脆弱性を自動的にチェックします。

Wallarm Consoleの[**脆弱性**セクション](vulnerabilities.md)では、発見された脆弱性が表示され、どの脆弱性を発見するべきかを制御することができます。

### 特定の資産の脆弱性スキャンを無効化する

**スキャナー**セクションでは、各資産にはその特定の資産に対する脆弱性スキャンを有効化または無効化するためのスイッチがあります。スイッチは現在選択されていて太字で表示されている資産の左側に配置されています。要素の上にカーソルを合わせる必要はありません。

### 脆弱性スキャンを制限する

Wallarm Scannerは、リソースの応答に基づいてリソースに脆弱性を検出するために、悪意のあるテストリクエストを使用します。あなたのリソースを圧倒しないようにするために、Wallarm Scannerのリクエストの秒間リクエスト数（RPS）と分間リクエスト数（RPM）を管理することができます。Threat Replay Testingモジュールも、公開資産からのリソースに向けられたリクエストに対しても、ユーザーが定義した値に基づいてリクエストを制限します。

すべてのドメインとIPアドレスに対して同じ制限を設定するには、**設定**をクリックし、対応するセクションで値を設定します。

特定のIPアドレスまたはドメインの制限を上書きするには：

1. **ドメイン**または**IP**タイプの資産を開きます。
1. **RPS制限を設定** ボタンをクリックし、制限を指定します。

    もしドメインのRPSを設定する場合、**RPS per IP**フィールドに望ましい値を入力することで、そのドメインの依存するIPアドレスごとに設定することができます。
1. **保存**をクリックします。

デフォルトの設定に戻すには、空の値を使用するか、`0`を入力します。

![ドメインRPSの設定](../images/user-guides/scanner/set-rps-for-domain.png)

同じIPアドレスに関連する複数のドメインがある場合、このIPアドレスへのリクエストの速度は、IPアドレスの制限を超えません。同じドメインに関連する複数のIPアドレスがある場合、このドメイン内でこれらのIPアドレスへのリクエストのトータルのスピードは、ドメインの制限を超えません。