# API漏洩の管理

**API漏洩**モジュールは、数千の公開レポジトリやソースを積極的にスキャンし、APIトークンの漏洩をチェックします。さらに、攻撃やAPIポートフォリオへの他の被害を防ぐために、漏洩したトークンをブロックするオプションも提供します。本記事では、API漏洩の管理方法について説明します。

能力の基本的なまとめについては、**API漏洩**モジュールの[概要](../api-attack-surface/api-leaks)をご参照ください。

## API漏洩へのアクセス

Wallarmのコンソールでは、以下の通りに**API漏洩**セクションを利用します。

* **API漏洩**モジュールを有効にするには、[Wallarmの技術サポート](mailto:support@wallarm.com)にリクエストを送ってください。
* **管理者**または**グローバル管理者**の[役割](../user-guides/settings/users.md#user-roles)を持つユーザーのみがこのセクションにアクセスし、漏洩を管理することができます。
* **アナリスト**または**グローバルアナリスト**の役割を持つユーザーはこのセクションにアクセスすることができますが、漏洩を管理することはできません。

## 新規API漏洩

新規漏洩を登録する方法は2つあります：

* 自動 - Wallarmは数千の公開レポジトリやソースを積極的にスキャンし、新たな漏洩をリストに追加します。**ステータス**で並べ替えて、`Opened`の漏洩を確認します - これらはあなたの注意が必要です。
* 手動 - API漏洩を手動で追加します。それぞれが漏洩したトークンのセットとなります。

![API漏洩 - 手動での追加](../images/api-attack-surface/api-leaks-add-manually.png)

## 対話型ビジュアライゼーション

**API漏洩**セクションでは、見つかったAPI漏洩に対する現状についての豊富な視覚表現が提供されます。グラフィックを使用して、見つかった漏洩についての現状を素早く分析し、ダイアグラムの要素をクリックしてリスクレベルやソースごとに漏洩をフィルタリングします。

![API漏洩 - ビジュアライゼーション](../images/api-attack-surface/api-leaks-visual.png)

## 決定の作成

API漏洩が自動的に追加された場合でも手動で追加された場合でも、何をするかを決定するのは常にあなた次第です。以下のようにこれらの決定を管理できます：

* 仮想パッチを適用して、漏洩したトークンの使用を試みるすべての行為をブロックします。

    [仮想パッチルール](../user-guides/rules/vpatch-rule.md)が作成されます。

* それが誤って追加されたと思われる場合、漏洩を偽物としてマークします。
* すべての漏洩したトークンが再生成されたか削除された後、保護を停止するために漏洩を閉じます。これにより、仮想パッチルールが削除されます。
* 漏洩が閉じられても、それは削除されません。再開してから修復を適用して保護を再開します。

## 漏洩したトークンの使用を試みる

Wallarmのコンソールで**イベント**→**タイプ**フィルターを`Virtual patch` (`vpatch`)に設定すると、漏洩したトークンの使用を試みるすべての行為を確認することができます。

![イベント - API漏洩を通じたvpatch](../images/api-attack-surface/api-leaks-in-events.png)

現在のところ、漏洩したトークンの使用を試みを追跡することは、`vpatch`が適用されている場合にのみ可能です。