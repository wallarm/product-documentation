# API ポリシー適用の概要

**API ポリシー適用**は、アップロードされた仕様に基づいてセキュリティポリシーをAPIに適用するために設計されています。その主な機能は、仕様のエンドポイント記述とREST APIへの実際のリクエストとの間の不一致を検出することです。このような不一致が特定されると、システムはそれらに対処するために事前に定義されたアクションを実行できます。

![API ポリシー適用 - ダイアグラム](../images/api-policies-enforcement/api-policy-enforcement-diagram.png)

## API ポリシー適用が対処する問題

あなたの組織は、APIを介して公開されている多数のアプリケーションと、それらにアクセスしようとする多数の外部IP（自動化ツールを含む）を使用しているかもしれません。特定のソース、ターゲット、または行動に特別に拘束される制限を作成することは、リソースを消費する作業です。

API ポリシー適用は、ポジティブセキュリティモデルを利用することによって、セキュリティの努力を減らすことを可能にします - 仕様では許可されているものを定義し、短い一連のポリシーによって他のすべてを処理する方法を定義します。

**API仕様でAPIインベントリを徹底的に記述している場合**：

* この仕様をWallarmにアップロードします。
* 数クリックで、仕様に提示されていない、または仕様に反するAPI要素へのリクエストに対するポリシーを設定します。

そして：

* 特定の制限ルールを作成するのを避けます。
* これらのルールの必然的な更新を避けます。
* 直接の制限ルールが設定されていない攻撃を決して見逃しません。

## 仕組み

リクエストは以下の異なる観点から仕様に違反する可能性があります：

--8<-- "../include-ja/api-policies-enforcement/api-policies-violations.md"

API ポリシー適用には時間（50 ms）とリクエストサイズ（1024 KB）による制限があり - これらの制限を超えると、リクエストの処理を停止し、これらの制限のいずれかが超えられたことを示す **仕様処理超過限度** [イベント](viewing-events.md#overlimit-events) を **攻撃** セクションに作成します。

!!! info "API ポリシー適用と他の保護対策"
    API ポリシー適用がリクエストの処理を停止した場合でも、そのリクエストがWallarmの他の保護手順によって処理されないわけではありません。したがって、それが攻撃である場合、Wallarmの設定に従って登録またはブロックされます。

制限を変更したり、Wallarmの挙動を変更したりするには（過剰制限のモニタリングからそのようなリクエストのブロックまで）、[Wallarm サポート](mailto:support@wallarm.com)に連絡してください。

API ポリシー適用は、Wallarmノードによって実行される通常の[攻撃検出](../about-wallarm/protecting-against-attacks.md)にその規則を追加し、それに置き換わりませんので、トラフィックは攻撃の兆候がないことと仕様に合致していることの両方でチェックされます。

## 設定

APIをAPI ポリシー適用で保護するには、仕様をアップロードし、[こちら](setup.md)に記載されているようにポリシーを設定してください。