# フェイルオーバー手法の設定

フィルタノードを[reverse proxy](../glossary-en.md#reverse-proxy)として展開する際は、フィルタノードの可用性を確保する必要があります。例えば、停電などでフィルタノードが故障すると、Webアプリケーションの動作に制限が生じます。Wallarmの高可用性を確保するため、本セクションで説明するフェイルオーバー手法のいずれかを使用することを推奨します。

フェイルオーバー手法は、メインフィルタノードに障害が発生した場合にトラフィックを自動的に転送する追加ノードを導入します。

## データセンターフェイルオーバー

Webアプリケーション及びフィルタノードがデータセンター内に存在する場合は、データセンターの「Failover IP」サービスを使用します。

## VRRPまたはCARP

各フィルタノード上で、ノードの可用性を監視しノードがダウンした場合にトラフィック転送を開始する`keepalived`または`ucarp`デーモンを起動します。これは標準的な高可用性手法であり、各ノードでFailover‑IPを起動しDNSバランシングでトラフィックを分散することでロードバランシングにも利用できます。

!!! info "NGINX Plus利用時"
    WallarmはカスタムVRRPラッパーを用いて[NGINX Plus](https://www.nginx.com/products/nginx/)上で動作させることができます。

    CentOSやDebianを含むほとんどのLinuxディストリビューションには、このビルドをインストールできるカスタムパッケージが用意されています。
    
    NGINX PlusでのWallarmのインストールはオールインワンインストーラーを使用して実施されます。詳細な手順は[こちら](../installation/nginx/all-in-one.md)をご参照ください。

## ハードウェアL3またはL4ロードバランサ

レイヤー3またはレイヤー4のロードバランサは高可用性の優れたソリューションです。

## DNSロードバランシング

DNS設定で複数のIPアドレスを指定します。この手法はロードバランシングを目的としていますが、高可用性手法としても有用です。