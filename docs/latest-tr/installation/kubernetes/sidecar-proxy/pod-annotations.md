```markdown
# Wallarm Sidecar Tarafından Desteklenen Pod Anotasyonları

[Wallarm Sidecar solution](deployment.md), her pod bazında anotasyonlar aracılığıyla yapılandırılabilir. Bu belgede, bu çözüm tarafından desteklenen anotasyonların listesi açıklanmaktadır.

!!! info "Küresel ve Pod Düzeyindeki Ayarların Öncelikleri"  
    Pod düzeyindeki anotasyonlar, Helm chart değerlerinin [önüne geçer](customization.md#configuration-area).

## Anotasyon Listesi

| Annotation ve karşılık gelen chart değeri                          | Açıklama                                                      | 
|-------------------------------------|------------------------------------------------------------------|
| **Annotation:** `sidecar.wallarm.io/sidecar-injection-schema`<br><br>`config.injectionStrategy.schema` | [Wallarm container dağıtım deseni](customization.md#single-and-split-deployment-of-containers): `single` (varsayılan) veya `split`.                                                                                                                                                                                                                                                                     |
| **Annotation:** `sidecar.wallarm.io/sidecar-injection-iptables-enable`<br><br>`config.injectionStrategy.iptablesEnable` | [`iptables` init konteynerinin başlatılıp başlatılmayacağını belirler](customization.md#capturing-incoming-traffic-port-forwarding): `true` (varsayılan) veya `false`.                                                                                                                                                                                                                                |
| **Annotation:** `sidecar.wallarm.io/wallarm-application`<br><br>Grafik değeri yok      | [Wallarm application ID][applications-docs].                                                                                                                                                                                                                                                                           |
| **Annotation:** `sidecar.wallarm.io/wallarm-block-page`<br><br>Grafik değeri yok | [Engelleme sayfası ve hata kodu][custom-blocking-page-docs] engellenen isteklere geri dönmek için.                                                                                                                                                        |
| **Annotation:** `sidecar.wallarm.io/wallarm-enable-libdetection`<br><br>`config.wallarm.enableLibDetection`                         | SQL Injection saldırılarını [libdetection][libdetection-docs] kütüphanesini kullanarak ek olarak doğrulayıp doğrulamayacağını belirler: `on` (varsayılan) veya `off`.                                                                                                                                                                                                             |
| **Annotation:** `sidecar.wallarm.io/wallarm-fallback`<br><br>`config.wallarm.fallback`                                          | [Wallarm fallback modu][fallback-mode-docs]: `on` (varsayılan) veya `off`. |
| **Annotation:** `sidecar.wallarm.io/wallarm-mode`<br><br>`config.wallarm.mode`                                              | [Trafik filtreleme modu][wallarm-modes-docs]: `monitoring` (varsayılan), `safe_blocking`, `block` veya `off`.                                                                                                                                                                                                                                                                       |
| **Annotation:** `sidecar.wallarm.io/wallarm-mode-allow-override`<br><br>`config.wallarm.modeAllowOverride`                                 | Bulut üzerindeki ayarlar aracılığıyla `wallarm_mode` değerlerinin geçersiz kılınabilme [özelliğini yönetir][filtration-mode-priorities-docs]: `on` (varsayılan), `off` veya `strict`.                                                                                                                                                                                       |
| <a name="wallarm-node-group"></a>**Annotation:** `sidecar.wallarm.io/wallarm-node-group`<br><br>`config.wallarm.api.nodeGroup`                                 | Yeni dağıtılan nodeları eklemek istediğiniz filtreleme node grubunun adını belirtir. Bu şekilde node gruplama, yalnızca **Deploy** rolüne sahip bir API tokenı kullanarak Cloud'a node oluşturduğunuzda ve bağladığınızda mevcuttur (değeri `config.wallarm.api.token` parametresinde iletilir).<br>Bu değer, Tarantool podları için geçerli değildir; onlar için node’lar her zaman Helm chart değerinde belirtilen `config.wallarm.api.nodeGroup` ile ilişkilendirilir.                                                                                                                                                                                      |
| **Annotation:** `sidecar.wallarm.io/wallarm-parser-disable`<br><br>Grafik değeri yok                                                               | Belirli [parsers][parsers-docs]'ı devre dışı bırakmaya olanak tanır. Yönerge değerleri, devre dışı bırakılacak parser'ın adına karşılık gelir, örneğin `json`. Birden fazla parser, noktalı virgülle ayrılarak belirtilebilir, örneğin `json;base64`.                                                                                                                     |
| **Annotation:** `sidecar.wallarm.io/wallarm-parse-response`<br><br>`config.wallarm.parseResponse`                                     | Uygulama yanıtlarının saldırılar açısından analiz edilip edilmeyeceğini belirler: `on` (varsayılan) veya `off`. Yanıt analizi, [passive detection][passive-detection-docs] ve [threat replay testing][active-threat-verification-docs] sırasında açıklık tespiti için gereklidir.                                                                                                                                                                                                                                            |
| **Annotation:** `sidecar.wallarm.io/wallarm-acl-export-enable`<br><br>`config.wallarm.aclExportEnable`                                     | Node'dan Cloud'a [denylisted][denylist-docs] IP'lerden gelen isteklerle ilgili istatistiklerin gönderilmesini `on` (etkin) veya `off` (devre dışı) yapar.<ul><li>`on` değeri (varsayılan) ile denylisted IP'lerden gelen isteklerin istatistikleri **Attacks** bölümünde [gösterilir][denylist-view-events-docs].</li><li>`off` değeri ile denylisted IP'lerden gelen isteklerin istatistikleri gösterilmez.</li></ul>                                                                                                                                |
| **Annotation:** `sidecar.wallarm.io/wallarm-parse-websocket`<br><br>`config.wallarm.parseWebsocket`                                    | Wallarm tam WebSockets desteğine sahiptir. Varsayılan olarak, WebSockets mesajları saldırılar açısından analiz edilmez. Bu özelliği zorlamak için, API Security [subscription plan][subscriptions-docs]'ı aktif edin ve bu anotasyonu kullanın: `on` veya `off` (varsayılan).                                                                                                                                                                                                                                                 |
| **Annotation:** `sidecar.wallarm.io/wallarm-unpack-response`<br><br>`config.wallarm.unpackResponse`                                    | Uygulama yanıtında dönen sıkıştırılmış verilerin sıkıştırmasının açılıp açılmayacağını belirler: `on` (varsayılan) veya `off`.                                                                                                                                                                                                                          |
| **Annotation:** `sidecar.wallarm.io/wallarm-upstream-connect-attempts`<br><br>`config.wallarm.upstream.connectAttempts`                          | Tarantool veya Wallarm API'ye anında yeniden bağlantı denemelerinin sayısını tanımlar.                                                                                                                                                                                                                                         |
| **Annotation:** `sidecar.wallarm.io/wallarm-upstream-reconnect-interval`<br><br>`config.wallarm.upstream.reconnectInterval`                        | Başarısız denemelerin sayısı, anında yeniden bağlantı eşik değerini aştıktan sonra, Tarantool veya Wallarm API'ye yeniden bağlanma denemeleri arasındaki aralığı tanımlar.                                                                                                                                                                                                                                |
| **Annotation:** `sidecar.wallarm.io/application-port`<br><br>`config.nginx.applicationPort`                                     | [Açık uygulama pod portu bulunamadığında](customization.md#application-container-port-auto-discovery), Wallarm container gelen isteklerin yönlendirileceği bu portu dinler.                                                                                             |
| **Annotation:** `sidecar.wallarm.io/nginx-listen-port`<br><br>`config.nginx.listenPort`                                          | Wallarm container tarafından dinlenen port. Bu port, Wallarm sidecar çözümü tarafından kullanılması için ayrılmıştır ve `application-port` ile aynı olamaz.                                                                                                                                                                 |
| **Annotation:** `sidecar.wallarm.io/nginx-http-include`<br><br>Grafik değeri yok                                                               | [NGINX yapılandırmasının `http` seviyesine dahil edilecek](customization.md#using-custom-nginx-configuration) NGINX yapılandırma dosyalarının yollarından oluşan dizidir. Dosya container'a monte edilmeli ve bu yol, container içindeki dosyaya işaret etmelidir.                                                                                                            |
| **Annotation:** `sidecar.wallarm.io/nginx-http-snippet`<br><br>Grafik değeri yok                                                               | [NGINX yapılandırmasının `http` seviyesine dahil edilecek ek satır içi yapılandırma](customization.md#using-custom-nginx-configuration).                                                                                                                                      |
| **Annotation:** `sidecar.wallarm.io/nginx-server-include`<br><br>Grafik değeri yok                                                               | [NGINX yapılandırmasının `server` seviyesine dahil edilecek](customization.md#using-custom-nginx-configuration) NGINX yapılandırma dosyalarının yollarından oluşan dizidir. Dosya container'a monte edilmeli ve bu yol, container içindeki dosyaya işaret etmelidir.                                                                                                            |
| **Annotation:** `sidecar.wallarm.io/nginx-server-snippet`<br><br>Grafik değeri yok                                                               | [NGINX yapılandırmasının `server` seviyesine dahil edilecek ek satır içi yapılandırma](customization.md#using-custom-nginx-configuration).                                                                                                                                      |
| **Annotation:** `sidecar.wallarm.io/nginx-location-include`<br><br>Grafik değeri yok                                                               | [NGINX yapılandırmasının `location` seviyesine dahil edilecek](customization.md#using-custom-nginx-configuration) NGINX yapılandırma dosyalarının yollarından oluşan dizidir. Dosya container'a monte edilmeli ve bu yol, container içindeki dosyaya işaret etmelidir.                                                                                                            |
| **Annotation:** `sidecar.wallarm.io/nginx-location-snippet`<br><br>Grafik değeri yok                                                               | [NGINX yapılandırmasının `location` seviyesine dahil edilecek ek satır içi yapılandırma](customization.md#using-custom-nginx-configuration).                                                                                                                                      |
| **Annotation:** `sidecar.wallarm.io/nginx-extra-modules`<br><br>Grafik değeri yok                                                               | Etkinleştirilecek [ek NGINX modüllerinin](customization.md#enabling-additional-nginx-modules) dizisi.                                                                                                                                                                                                                  |
| **Annotation:** `sidecar.wallarm.io/nginx-worker-connections`<br><br>`config.nginx.workerConnections`                                                   | Bir NGINX worker process tarafından açılabilecek maksimum [eş zamanlı bağlantı sayısı](http://nginx.org/en/docs/ngx_core_module.html#worker_connections). Varsayılan olarak, grafik değeri `4096` olarak ayarlanmıştır.                                                                                                                                                                                                                    |
| **Annotation:** `sidecar.wallarm.io/nginx-worker-processes`<br><br>`config.nginx.workerProcesses`                                                   | [NGINX worker process sayısı](http://nginx.org/en/docs/ngx_core_module.html#worker_processes). Varsayılan olarak, grafik değeri `auto` olarak ayarlanmıştır; bu, worker sayısının CPU çekirdek sayısına eşit olduğu anlamına gelir.                                                                                                                                                                                                                    |
| **Annotation:** `sidecar.wallarm.io/proxy-extra-volumes`<br><br>Grafik değeri yok                                                               | Poda eklenecek [özel volume'ler](customization.md#include) (dizi). Anotasyon değeri tek tırnak `''` içine alınmalıdır.                                                                                                                                                                                  |
| **Annotation:** `sidecar.wallarm.io/proxy-extra-volume-mounts`<br><br>Grafik değeri yok                                                               | `sidecar-proxy` container'ına eklenecek [özel volume montajları](customization.md#include) (JSON nesnesi). Anotasyon değeri tek tırnak `''` içine alınmalıdır.                                                                                                                                                                              |
| **Annotation:** `sidecar.wallarm.io/proxy-cpu`<br><br>`config.sidecar.containers.proxy.resources.requests.cpu`           | `sidecar-proxy` container'ı için [talep edilen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                |
| **Annotation:** `sidecar.wallarm.io/proxy-memory`<br><br>`config.sidecar.containers.proxy.resources.requests.memory`        | `sidecar-proxy` container'ı için [talep edilen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                             |
| **Annotation:** `sidecar.wallarm.io/proxy-cpu-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.cpu`             | `sidecar-proxy` container'ı için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                    |
| **Annotation:** `sidecar.wallarm.io/proxy-memory-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.memory`          | `sidecar-proxy` container'ı için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                 |
| **Annotation:** `sidecar.wallarm.io/helper-cpu`<br><br>`config.sidecar.containers.helper.resources.requests.cpu`          | `sidecar-helper` container'ı için [talep edilen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                               |
| **Annotation:** `sidecar.wallarm.io/helper-memory`<br><br>`config.sidecar.containers.helper.resources.requests.memory`       | `sidecar-helper` container'ı için [talep edilen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                            |
| **Annotation:** `sidecar.wallarm.io/helper-cpu-limit`<br><br>`config.sidecar.containers.helper.resources.limits.cpu`            | `sidecar-helper` container'ı için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                  |
| **Annotation:** `sidecar.wallarm.io/helper-memory-limit`<br><br>`config.sidecar.containers.helper.resources.limits.memory`         | `sidecar-helper` container'ı için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                |
| **Annotation:** `sidecar.wallarm.io/init-iptables-cpu`<br><br>`config.sidecar.initContainers.iptables.resources.requests.cpu`    | `sidecar-init-iptables` container'ı için [talep edilen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                        |
| **Annotation:** `sidecar.wallarm.io/init-iptables-memory`<br><br>`config.sidecar.initContainers.iptables.resources.requests.memory` | `sidecar-init-iptables` container'ı için [talep edilen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                     |
| **Annotation:** `sidecar.wallarm.io/init-iptables-cpu-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.cpu`      | `sidecar-init-iptables` container'ı için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                            |
| **Annotation:** `sidecar.wallarm.io/init-iptables-memory-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.memory`   | `sidecar-init-iptables` container'ı için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                         |
| **Annotation:** `sidecar.wallarm.io/init-helper-cpu`<br><br>`config.sidecar.initContainers.helper.resources.requests.cpu`      | `sidecar-init-helper` container'ı için [talep edilen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                          |
| **Annotation:** `sidecar.wallarm.io/init-helper-memory`<br><br>`config.sidecar.initContainers.helper.resources.requests.memory`   | `sidecar-init-helper` container'ı için [talep edilen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                       |
| **Annotation:** `sidecar.wallarm.io/init-helper-cpu-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.cpu`        | `sidecar-init-helper` container'ı için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                              |
| **Annotation:** `sidecar.wallarm.io/init-helper-memory-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.memory`     | `sidecar-init-helper` container'ı için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                           |
| **Annotation:** `sidecar.wallarm.io/profile`<br><br>Grafik değeri yok | Bu anotasyon, [TLS/SSL sonlandırması](customization.md#ssltls-termination) için bir uygulama pod'una belirli bir TLS profili atamak amacıyla kullanılır.<br><br>Bu anotasyon ve TLS/SSL sonlandırması, Helm chart 4.6.1'den itibaren desteklenmektedir.                                                                                                                                                                                                                                                                           |

Doğrudan anotasyonlarla kapsanmayan daha fazla [NGINX yönergesi][nginx-directives-docs] de mevcuttur. Yine de, bunları [`nginx-*-snippet` ve `nginx-*-include` anotasyonlarını](customization.md#using-custom-nginx-configuration) kullanarak yapılandırabilirsiniz.

## Anotasyonlar Nasıl Kullanılır

Bir pod'a anotasyon uygulamak için, ilgili uygulama yapılandırmasının `Deployment` nesnesi ayarlarında belirtin, örneğin:

```bash
kubectl edit deployment -n <APPLICATION_NAMESPACE> <APP_LABEL_VALUE>
```

```yaml hl_lines="17"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
        wallarm-sidecar: enabled
      annotations:
        sidecar.wallarm.io/wallarm-mode: block
    spec:
      containers:
        - name: application
          image: kennethreitz/httpbin
          ports:
            - name: http
              containerPort: 80
```