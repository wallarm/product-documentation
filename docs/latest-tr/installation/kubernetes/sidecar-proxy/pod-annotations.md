# Wallarm Sidecar tarafından desteklenen Pod annotasyonları

[Wallarm Sidecar çözümü](deployment.md), pod başına annotasyonlar aracılığıyla yapılandırılabilir. Bu çözümde desteklenen annotasyonların listesi bu belgede açıklanmaktadır.

!!! info "Global ve pod başına ayarların öncelikleri"
    Pod başına annotasyonlar, Helm chart değerlerine [üstün gelir](customization.md#configuration-area).

## Annotasyon listesi

| Annotasyon ve karşılık gelen chart değeri                          | Açıklama                                                      | 
|-------------------------------------|------------------------------------------------------------------|
| **Annotasyon:** `sidecar.wallarm.io/sidecar-injection-schema`<br><br>`config.injectionStrategy.schema` | [Wallarm konteyner dağıtım deseni](customization.md#single-and-split-deployment-of-containers): `single` (varsayılan) veya `split`.                                                                                                                                                                                                                                                                     |
| **Annotasyon:** `sidecar.wallarm.io/sidecar-injection-iptables-enable`<br><br>`config.injectionStrategy.iptablesEnable` | [`iptables` init konteynerinin başlatılıp başlatılmayacağı](customization.md#capturing-incoming-traffic-port-forwarding): `true` (varsayılan) veya `false`.                                                                                                                                                                                                                                |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-application`<br><br>Chart değeri yok      | [Wallarm uygulama kimliği][applications-docs].                                                                                                                                                                                                                                                                           |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-block-page`<br><br>Chart değeri yok | Engellenen isteklere döndürülecek [engelleme sayfası ve hata kodu][custom-blocking-page-docs].                                                                                                                                                        |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-enable-libdetection`<br><br>`config.wallarm.enableLibDetection`                         | [libdetection][libdetection-docs] kütüphanesini kullanarak SQL Injection saldırılarını ayrıca doğrulayıp doğrulamayacağı: `on` (varsayılan) veya `off`.                                                                                                                                                                                                             |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-fallback`<br><br>`config.wallarm.fallback`                                          | [Wallarm fallback modu][fallback-mode-docs]: `on` (varsayılan) veya `off`. |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-mode`<br><br>`config.wallarm.mode`                                              | [Trafik filtreleme modu][wallarm-modes-docs]: `monitoring` (varsayılan), `safe_blocking`, `block` veya `off`.                                                                                                                                                                                                                                                                       |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-mode-allow-override`<br><br>`config.wallarm.modeAllowOverride`                                 | Cloud’daki ayarlar üzerinden `wallarm_mode` değerlerini geçersiz kılma [olasılığını yönetir][filtration-mode-priorities-docs]: `on` (varsayılan), `off` veya `strict`.                                                                                                                                                                                       |
| <a name="wallarm-node-group"></a>**Annotasyon:** `sidecar.wallarm.io/wallarm-node-group`<br><br>`config.wallarm.api.nodeGroup`                                 | Yeni dağıtılan düğümleri eklemek istediğiniz filtreleme düğümleri grubunun adını belirtir. Bu şekilde düğüm gruplama yalnızca, kullanım türü **Node deployment/Deployment** olan bir API belirteci kullanarak düğümleri Cloud’a oluşturup bağladığınızda kullanılabilir (değeri `config.wallarm.api.token` parametresinde iletilir).<br>Bu değer postanalytics pod’ları üzerinde etkili değildir, onlar için düğümler her zaman `config.wallarm.api.nodeGroup` Helm chart değerinde belirtilen düğüm grubuna bağlanır.                                                                                                                                                                                      |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-parser-disable`<br><br>Chart değeri yok                                                               | [Parsers][parsers-docs] devre dışı bırakılabilir. Yönerge değerleri devre dışı bırakılacak parser’ın adına karşılık gelir, ör. `json`. Birden fazla parser noktalı virgülle ayrılarak belirtilebilir, ör. `json;base64`.                                                                                                                     |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-parse-response`<br><br>`config.wallarm.parseResponse`                                     | Uygulama yanıtlarının saldırılar için analiz edilip edilmeyeceği: `on` (varsayılan) veya `off`. Yanıt analizi, [pasif tespit][passive-detection-docs] ve [tehdit tekrar yürütme testleri][active-threat-verification-docs] sırasında güvenlik açığı tespiti için gereklidir.                                                                                                                                                                                                                                            |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-acl-export-enable`<br><br>`config.wallarm.aclExportEnable`                                     | Düğümden Cloud’a, [denylist’e alınmış][denylist-docs] IP’lerden gelen isteklerle ilgili istatistiklerin gönderilmesini etkinleştirir `on` / devre dışı bırakır `off`.<ul><li>`"on"` değeri (varsayılan) ile denylist’e alınmış IP’lerden gelen isteklere ilişkin istatistikler **Attacks** bölümünde [görüntülenir][denylist-view-events-docs].</li><li>`"off"` değeri ile denylist’e alınmış IP’lerden gelen isteklere ilişkin istatistikler görüntülenmez.</li></ul>                                                                                                                                |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-parse-websocket`<br><br>`config.wallarm.parseWebsocket`                                    | Wallarm, WebSocket’leri tam olarak destekler. Varsayılan olarak WebSocket mesajları saldırılar için analiz edilmez. Özelliği zorlamak için API Security [abonelik planını][subscriptions-docs] etkinleştirin ve bu annotasyonu kullanın: `on` veya `off` (varsayılan).                                                                                                                                                                                                                                                 |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-unpack-response`<br><br>`config.wallarm.unpackResponse`                                    | Uygulama yanıtında döndürülen sıkıştırılmış verilerin açılıp açılmayacağı: `on` (varsayılan) veya `off`.                                                                                                                                                                                                                          |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-upstream-connect-attempts`<br><br>`config.wallarm.upstream.connectAttempts`                          | postanalytics veya Wallarm API’ye anında yeniden bağlanma denemelerinin sayısını tanımlar.                                                                                                                                                                                                                                         |
| **Annotasyon:** `sidecar.wallarm.io/wallarm-upstream-reconnect-interval`<br><br>`config.wallarm.upstream.reconnectInterval`                        | Anında yeniden bağlanma denemeleri sayısına ilişkin eşik aşıldıktan sonra postanalytics veya Wallarm API’ye yeniden bağlanma denemeleri arasındaki aralığı tanımlar.                                                                                                                                                                                                                                |
| **Annotasyon:** `sidecar.wallarm.io/application-port`<br><br>`config.nginx.applicationPort`                                     | [Herhangi bir yayınlanmış uygulama pod portu bulunamazsa](customization.md#application-container-port-auto-discovery), Wallarm konteyneri gelen isteklerin yönlendirileceği port olarak bu portu bekler.                                                                                             |
| **Annotasyon:** `sidecar.wallarm.io/nginx-listen-port`<br><br>`config.nginx.listenPort`                                          | Wallarm konteynerinin dinlediği port. Bu port Wallarm sidecar çözümü tarafından kullanım için ayrılmıştır, `application-port` ile aynı olamaz.                                                                                                                                                                 |
| **Annotasyon:** `sidecar.wallarm.io/nginx-http-include`<br><br>Chart değeri yok                                                               | NGINX yapılandırmasının `http` seviyesinde [include edilmesi gereken](customization.md#using-custom-nginx-configuration) NGINX yapılandırma dosyalarının yolları (dizi). Dosya konteynere mount edilmelidir ve bu yol konteyner içindeki dosyayı işaret etmelidir.                                                                                                            |
| **Annotasyon:** `sidecar.wallarm.io/nginx-http-snippet`<br><br>Chart değeri yok                                                               | NGINX yapılandırmasının `http` seviyesine dahil edilmesi gereken [ek satır içi yapılandırma](customization.md#using-custom-nginx-configuration).                                                                                                                                      |
| **Annotasyon:** `sidecar.wallarm.io/nginx-server-include`<br><br>Chart değeri yok                                                               | NGINX yapılandırmasının `server` seviyesinde [include edilmesi gereken](customization.md#using-custom-nginx-configuration) NGINX yapılandırma dosyalarının yolları (dizi). Dosya konteynere mount edilmelidir ve bu yol konteyner içindeki dosyayı işaret etmelidir.                                                                                                            |
| **Annotasyon:** `sidecar.wallarm.io/nginx-server-snippet`<br><br>Chart değeri yok                                                               | NGINX yapılandırmasının `server` seviyesine dahil edilmesi gereken [ek satır içi yapılandırma](customization.md#using-custom-nginx-configuration).                                                                                                                                      |
| **Annotasyon:** `sidecar.wallarm.io/nginx-location-include`<br><br>Chart değeri yok                                                               | NGINX yapılandırmasının `location` seviyesinde [include edilmesi gereken](customization.md#using-custom-nginx-configuration) NGINX yapılandırma dosyalarının yolları (dizi). Dosya konteynere mount edilmelidir ve bu yol konteyner içindeki dosyayı işaret etmelidir.                                                                                                            |
| **Annotasyon:** `sidecar.wallarm.io/nginx-location-snippet`<br><br>Chart değeri yok                                                               | NGINX yapılandırmasının `location` seviyesine dahil edilmesi gereken [ek satır içi yapılandırma](customization.md#using-custom-nginx-configuration).                                                                                                                                      |
| **Annotasyon:** `sidecar.wallarm.io/nginx-extra-modules`<br><br>Chart değeri yok                                                               | Etkinleştirilecek [ek NGINX modülleri](customization.md#enabling-additional-nginx-modules) dizisi.                                                                                                                                                                                                                  |
| **Annotasyon:** `sidecar.wallarm.io/nginx-worker-connections`<br><br>`config.nginx.workerConnections`                                                   | Bir NGINX worker süreci tarafından açılabilecek [eşzamanlı bağlantıların maksimum sayısı](http://nginx.org/en/docs/ngx_core_module.html#worker_connections). Varsayılan olarak chart değeri `4096`’dır.                                                                                                                                                                                                                    |
| **Annotasyon:** `sidecar.wallarm.io/nginx-worker-processes`<br><br>`config.nginx.workerProcesses`                                                   | [NGINX worker süreç sayısı](http://nginx.org/en/docs/ngx_core_module.html#worker_processes). Varsayılan olarak chart değeri `auto`’dur; bu, worker sayısının CPU çekirdeği sayısına eşitlendiği anlamına gelir.                                                                                                                                                                                                                    |
| **Annotasyon:** `sidecar.wallarm.io/proxy-extra-volumes`<br><br>Chart değeri yok                                                               | Pod’a eklenecek [özel volume’ler](customization.md#include) (dizi). Annotasyon değeri tek tırnak içine alınmalıdır `''`.                                                                                                                                                                                  |
| **Annotasyon:** `sidecar.wallarm.io/proxy-extra-volume-mounts`<br><br>Chart değeri yok                                                               | `sidecar-proxy` konteynerine eklenecek [özel volume mount’lar](customization.md#include) (JSON nesnesi). Annotasyon değeri tek tırnak içine alınmalıdır `''`.                                                                                                                                                                              |
| **Annotasyon:** `sidecar.wallarm.io/proxy-cpu`<br><br>`config.sidecar.containers.proxy.resources.requests.cpu`           | `sidecar-proxy` konteyneri için [istenen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                |
| **Annotasyon:** `sidecar.wallarm.io/proxy-memory`<br><br>`config.sidecar.containers.proxy.resources.requests.memory`        | `sidecar-proxy` konteyneri için [istenen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                             |
| **Annotasyon:** `sidecar.wallarm.io/proxy-cpu-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.cpu`             | `sidecar-proxy` konteyneri için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                    |
| **Annotasyon:** `sidecar.wallarm.io/proxy-memory-limit`<br><br>`config.sidecar.containers.proxy.resources.limits.memory`          | `sidecar-proxy` konteyneri için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                 |
| **Annotasyon:** `sidecar.wallarm.io/helper-cpu`<br><br>`config.sidecar.containers.helper.resources.requests.cpu`          | `sidecar-helper` konteyneri için [istenen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                               |
| **Annotasyon:** `sidecar.wallarm.io/helper-memory`<br><br>`config.sidecar.containers.helper.resources.requests.memory`       | `sidecar-helper` konteyneri için [istenen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                            |
| **Annotasyon:** `sidecar.wallarm.io/helper-cpu-limit`<br><br>`config.sidecar.containers.helper.resources.limits.cpu`            | `sidecar-helper` konteyneri için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                  |
| **Annotasyon:** `sidecar.wallarm.io/helper-memory-limit`<br><br>`config.sidecar.containers.helper.resources.limits.memory`         | `sidecar-helper` konteyneri için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                                |
| **Annotasyon:** `sidecar.wallarm.io/init-iptables-cpu`<br><br>`config.sidecar.initContainers.iptables.resources.requests.cpu`    | `sidecar-init-iptables` konteyneri için [istenen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                        |
| **Annotasyon:** `sidecar.wallarm.io/init-iptables-memory`<br><br>`config.sidecar.initContainers.iptables.resources.requests.memory` | `sidecar-init-iptables` konteyneri için [istenen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                     |
| **Annotasyon:** `sidecar.wallarm.io/init-iptables-cpu-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.cpu`      | `sidecar-init-iptables` konteyneri için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                            |
| **Annotasyon:** `sidecar.wallarm.io/init-iptables-memory-limit`<br><br>`config.sidecar.initContainers.iptables.resources.limits.memory`   | `sidecar-init-iptables` konteyneri için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                         |
| **Annotasyon:** `sidecar.wallarm.io/init-helper-cpu`<br><br>`config.sidecar.initContainers.helper.resources.requests.cpu`      | `sidecar-init-helper` konteyneri için [istenen CPU](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                          |
| **Annotasyon:** `sidecar.wallarm.io/init-helper-memory`<br><br>`config.sidecar.initContainers.helper.resources.requests.memory`   | `sidecar-init-helper` konteyneri için [istenen bellek](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                       |
| **Annotasyon:** `sidecar.wallarm.io/init-helper-cpu-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.cpu`        | `sidecar-init-helper` konteyneri için [CPU limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                              |
| **Annotasyon:** `sidecar.wallarm.io/init-helper-memory-limit`<br><br>`config.sidecar.initContainers.helper.resources.limits.memory`     | `sidecar-init-helper` konteyneri için [bellek limiti](customization.md#per-pod-settings).                                                                                                                                                                                                                                                                           |
| **Annotasyon:** `sidecar.wallarm.io/profile`<br><br>Chart değeri yok | Annotasyon, [TLS/SSL sonlandırması](customization.md#ssltls-termination) için bir uygulama pod’una belirli bir TLS profilini atamak amacıyla kullanılır.<br><br>Bu annotasyon ve TLS/SSL sonlandırması Helm chart 4.6.1’den itibaren desteklenmektedir.                                                                                                                                                                                                                                                                           |

Wallarm tarafından desteklenen ve doğrudan annotasyonlarla kapsanmayan daha fazla [NGINX yönergesi][nginx-directives-docs] vardır. Yine de bunları [`nginx-*-snippet` ve `nginx-*-include` annotasyonlarını](customization.md#using-custom-nginx-configuration) kullanarak yapılandırabilirsiniz.

## Annotasyonlar nasıl kullanılır

Bir pod’a annotasyon uygulamak için, ilgili uygulama konfigürasyonunun `Deployment` nesnesi ayarlarında belirtin, örneğin:


```bash
kubectl edit deployment -n <APPLICATION_NAMESPACE> <APP_LABEL_VALUE>
```

```yaml hl_lines="17"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
        wallarm-sidecar: enabled
      annotations:
        sidecar.wallarm.io/wallarm-mode: block
    spec:
      containers:
        - name: application
          image: kennethreitz/httpbin
          ports:
            - name: http
              containerPort: 80
```