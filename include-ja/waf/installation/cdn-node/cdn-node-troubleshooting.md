### CDNノードのステータスは何を意味しますか？

Wallarm Console → **Nodes** において、CDNノードに以下のステータスが表示される場合があります：

* **Registering**：WallarmがクラウドプロバイダーにおいてCDNノードを登録中です。

    必要な対応：保護対象ドメインのDNSレコードにWallarm CNAMEレコードを追加するため、**Requires CNAME** ステータスになるまでお待ちください。
* **Requires CNAME**：保護対象ドメインのDNSレコードにWallarm CNAMEレコードが追加されていないか、追加済みでもまだ伝播していません。

    必要な対応：Wallarmが提供したCNAMEレコードを保護対象ドメインのDNSレコードに追加するか、変更がインターネット上で反映されるまでお待ちください。
    
    変更が24時間以上反映されない場合は、ドメインプロバイダーがDNSレコードを正常に更新できたか確認してください。正常に更新されているにもかかわらず、Wallarm Consoleに**Not propagated yet**ステータスが表示されている場合は、[Wallarm technical support](mailto:support@wallarm.com) にお問い合わせください。

    次に期待されるステータスは**Active**です。
* **Configuring**：Wallarmが変更されたオリジンアドレスまたはSSL/TLS証明書を処理中です。

    必要な対応：**Active** ステータスになるまでお待ちください。
* **Active**：Wallarm CDNノードが悪意のあるトラフィックを軽減しています。

    必要な対応：特になく、CDNノードが検出した[events][events-docs]を監視できます。
* **Deleting**：WallarmがCDNノードを削除中です。

    必要な対応：特になく、削除完了までお待ちください。

### 伝播したCNAMEレコードをどのように確認できますか？

Wallarm Consoleの**Nodes**セクションでは、Wallarm CNAMEレコードがインターネット上で有効になったかどうかの実際のステータスが表示されます。CNAMEレコードが伝播している場合、CDNノードのステータスは**Active**です。

さらに、次のリクエストでHTTPレスポンスヘッダーを確認できます：

```bash
curl -v <PROTECTED_DOMAIN>
```

Wallarm CNAMEレコードが伝播している場合、レスポンスには `section-io-*` ヘッダーが含まれます。

CNAMEレコードが24時間以上伝播していない場合は、ドメインプロバイダーがDNSレコードを正常に更新できたか確認してください。正常に更新されているにもかかわらず、Wallarm Consoleに**Not propagated yet**ステータスが表示されている場合は、[Wallarm technical support](mailto:support@wallarm.com) にお問い合わせください。

### **Nodes** セクションでCDNノードが赤く強調表示されている場合、何を意味しますか？

**Nodes** セクションでCDNノードが赤く強調表示される場合、以下の原因が考えられるため、登録または構成時にエラーが発生しています：

* サードパーティクラウドプロバイダーにおけるノードの登録中に不明なエラーが発生

    必要な対応：[Wallarm technical support](mailto:support@wallarm.com) にお問い合わせください。
* カスタムSSL/TLS証明書が無効

    必要な対応：アップロードされた証明書が有効であることを確認してください。有効でない場合は、有効な証明書をアップロードしてください。

赤く強調表示されたCDNノードはリクエストをプロキシしないため、その結果、悪意のあるトラフィックを軽減できません。

### Wallarm ConsoleのノードリストからCDNノードが消える理由は何ですか？

Wallarmは、ノード作成時から10日以上変更のないCNAMEレコードを持つCDNノードを削除します。

CDNノードが消えている場合は、新しいノードを作成してください。

### CDNノードで保護されたコンテンツの更新に遅延が発生する理由は何ですか？

サイトがCDNノードによって保護されており、データ変更後にサイトが遅れて更新される場合、原因として、コンテンツ配信を高速化する[Varnish Cache][using-varnish-cache]が利用されていることが考えられます。しかし、CDN上のキャッシュコピーは遅延して更新される可能性があります。

例：

1. CDNノードでVarnish Cacheが有効になっています。
1. サイト上で価格を更新しました。
1. すべてのリクエストはCDN経由でプロキシされ、キャッシュは即座に更新されません。
1. サイトのユーザーはしばらくの間、古い価格が表示されます。

この問題を解決するには、Varnish Cacheを無効化してください。無効化するには、**Nodes** → CDNノードメニュー → **Disable Varnish Cache** に進んでください。