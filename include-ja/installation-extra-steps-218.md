## 追加の設定

フィルタリングノードは、インストール後に追加の設定を必要とする場合があります。

以下のドキュメントでは、必要に応じて適用できる典型的なセットアップのいくつかをリストしています。

その他の利用可能な設定についての詳しい情報は、[管理者ガイド](admin-intro-en.md)の**設定**セクションを参照してください。

### クライアントの実際のIPの表示設定

フィルタリングノードがプロキシサーバーやロードバランサの背後に展開され、それ以外の設定がない場合、リクエスト元アドレスがクライアントの実際のIPアドレスと等しくない可能性があります。代わりに、プロキシサーバーまたはロードバランサのIPアドレスのいずれかと等しくなる可能性があります。

この場合、フィルタリングノードがリクエスト元アドレスとしてクライアントのIPアドレスを受け取るようにしたい場合は、プロキシサーバーまたはロードバランサの[追加設定](using-proxy-or-balancer-en.md)を行う必要があります。

### Wallarmスキャナーのアドレスを許可リストに追加

Wallarmスキャナーは、あなたの会社のリソースを脆弱性に対してチェックします。スキャンは次のリストのいずれかからのIPアドレスを使用して行われます（使用するWallarm Cloudの種類によります）：

* [US CloudユーザーのためのUSスキャナーアドレス](scanner-addresses.md)
* [EU CloudユーザーのためのEUスキャナーアドレス](scanner-addresses.md)

Wallarmスキャナーを使用している場合、ネットワークスコープセキュリティソフトウェア（ファイアウォール、侵入検知システムなど）の許可リストを設定して、WallarmスキャナーのIPアドレスを含める必要があります。

例えば、デフォルト設定のWallarmフィルタリングノードはブロックモードに設置され、その結果、Wallarmスキャナーはフィルタリングノードの背後のリソースをスキャンできなくなります。

スキャナーの動作を再開させるためには、このフィルタリングノード上で[スキャナーのIPアドレスを許可リストに追加](scanner-ips-allowlisting.md)します。

### 単一のリクエスト処理時間の制限

[`wallarm_process_time_limit`](configure-parameters-en.md#wallarm_process_time_limit) Wallarmディレクティブを使用して、フィルタリングノードによる単一リクエストの処理期間の制限を指定します。

リクエストの処理にディレクティブで指定した時間以上かかった場合、エラー情報がログファイルに入力され、リクエストは`overlimit_res`攻撃としてマークされます。

### サーバー応答待ち時間の制限

[`proxy_read_timeout`](https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout) NGINXディレクティブを使用して、プロキシサーバーの応答の読み取りタイムアウトを指定します。

サーバーがこの時間何も送信しない場合、接続が閉じられます。

### 最大リクエストサイズの制限

[`client_max_body_size`](https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size) NGINXディレクティブを使用して、クライアントリクエストのボディの最大サイズの制限を指定します。

この制限を超えると、NGINXはクライアントに`413`（`Payload Too Large`）コードを返します。これは`Request Entity Too Large`メッセージとも呼ばれます。