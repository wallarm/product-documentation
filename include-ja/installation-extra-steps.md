##   追加設定

フィルタリングノードは、インストール後に追加の設定が必要になる場合があります。

本ドキュメントでは、必要に応じて適用できる代表的な設定をいくつか挙げます。

利用可能なその他の設定の詳細については、管理者ガイドの**Configuration**セクションをご覧ください。

### クライアントの実IPの表示を設定する

フィルタリングノードが、追加の設定を行わずにプロキシサーバーまたはロードバランサーの背後にデプロイされている場合、リクエスト元アドレスがクライアントの実際のIPアドレスと一致しない場合があります。代わりに、プロキシサーバーまたはロードバランサーのIPアドレスのいずれかになることがあります。

この場合、フィルタリングノードがリクエスト元アドレスとしてクライアントのIPアドレスを受け取れるようにするには、プロキシサーバーまたはロードバランサーの[追加設定](using-proxy-or-balancer-en.md)が必要です。

### 単一のリクエストの処理時間を制限する

フィルタリングノードが単一のリクエストを処理する時間の上限を指定するには、Wallarmディレクティブ[`wallarm_process_time_limit`](configure-parameters-en.md#wallarm_process_time_limit)を使用します。

ディレクティブで指定した時間を超えてリクエストの処理に時間がかかった場合、エラー情報がログファイルに記録され、そのリクエストは`overlimit_res`攻撃としてマークされます。

### サーバーの応答待ち時間を制限する

プロキシサーバーの応答を読み込む際のタイムアウトを指定するには、NGINXディレクティブ[`proxy_read_timeout`](https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout)を使用します。

この時間内にサーバーから何も送信されない場合、接続が閉じられます。

### リクエストの最大サイズを制限する

クライアントのリクエストボディの最大サイズの上限を指定するには、NGINXディレクティブ[`client_max_body_size`](https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size)を使用します。

この上限を超えると、NGINXはクライアントに`413`（`Payload Too Large`）コード、別名`Request Entity Too Large`メッセージで応答します。