[doc-inactivity-timeout]:           internals.md#test-run

| API呼び出し: | `POST /v1/test_run` |      |
| ------------ | ------------------- | ---- |
| 認証: | 必須です | 認証はトークンで行います |
| トークンを含むHTTPヘッダー: | `X-WallarmAPI-Token` | トークンの値をAPIサーバーに渡すためのヘッダーです |
| パラメーター: | `name` **(必須)** | テスト実行の名前です |
| | `test_record_id` **(必須)** | 既存のテストレコードの識別子です |
|  | `desc` | テスト実行の詳細な説明です。<br>既定値: 空文字列 |
|  | `file_extensions_to_exclude` | このパラメーターは、テスト中の評価処理から除外する必要がある特定のファイル種別を指定できます。これらのファイル種別は正規表現で指定します。<br>例えば、除外するファイル拡張子として`ico`を設定すると、`GET /favicon.ico`のベースラインリクエストはFASTによってチェックされず、スキップされます。<br>正規表現の形式は次のとおりです:<br>- `.`: 任意の文字の0回以上の繰り返し<br>- `x*`: 文字`x`の0回以上の繰り返し<br>- `x?`: 文字`x`が1回(または0回)<br>- 単一のファイル拡張子(例: `jpg`)<br>- 縦棒で区切られた複数の拡張子(例: `jpg` &#124; `png`)<br>既定値: 空文字列(FASTは任意の拡張子のベースラインリクエストをチェックします)。 | 
|  | `policy_id` | テストポリシーの識別子です。<br>このパラメーターがない場合は既定のポリシーが適用されます |
|  | `stop_on_first_fail` | このパラメーターは、脆弱性が検出されたときのFASTの動作を指定します:<br>`true`: 最初に検出された脆弱性でテスト実行を停止します。<br>`false`: 脆弱性の有無に関係なく、すべてのベースラインリクエストを処理します。<br>既定値: `false` |
|  | `rps_per_baseline` | このパラメーターは、対象アプリケーションに送信するテストリクエスト数(*RPS*, *1秒あたりのリクエスト数*)の上限を指定します(例えば、1つのベースラインリクエストから100件のテストリクエストが生成される場合があります)。<br>上限はテスト実行内でベースラインリクエストごとに設定されます(個々のベースラインリクエストに対して1秒あたり`N`件を超えるテストリクエストは送信されません)。<br>最小値: `1`。<br>最大値: `500`。<br>既定値: `null` (RPSは無制限です) |
|  | `rps` | このパラメーターは前述のものと似ていますが、単一のベースラインリクエストだけでなくテスト実行単位でRPSをグローバルに制限します。<br>言い換えると、テスト実行中に記録されたベースラインリクエストの件数に関係なく、1秒あたりのテストリクエスト総数が指定値を超えないようにします。<br>最小値: `1`。<br>最大値: `1000`。<br>既定値: `null` (RPSは無制限です) |

**リクエストの例:**

```
curl --request POST \
  --url https://us1.api.wallarm.com/v1/test_run \
  --header 'Content-Type: application/json' \
  --header 'Host: us1.api.wallarm.com' \
  --header 'X-WallarmAPI-Token: token_Qwe12345' \
  --data '{
    "name":"demo-testrun",
    "test_record_id":"rec_0001"
}'
```

**レスポンスの例: テスト実行のコピーが進行中です**

```
{
  "status": 200,
  "body": {
    "id": tr_1234,
    "name": "demo-testrun",
    ...
    "state": "cloning",
    ...
    "test_record_id": "rec_0001",
    ...
}
```

`cloning`状態は、ベースラインリクエストが元のテスト実行からそのコピー(識別子`tr_1234`のテスト実行)へ複製されていることを意味します。  

**レスポンスの例: テスト実行のコピーに失敗しました**

```
{
  "status": 400,
  "body": {
    "test_record_id": {
      "error": "not_ready_for_cloning",
      "value": "rec_0001"
    }
  }
}
```

`not_ready_for_cloning`エラーは、元のテスト実行の記録処理がアクティブであるため(識別子`rec_0001`のテストレコードが関与しています)、元のテスト実行からそのコピーへベースラインリクエストをクローンできないことを意味します。