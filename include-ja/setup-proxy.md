!!! info
    このセットアップ手順は、保護対象のWebアプリケーションとAPIの運用に独自のプロキシサーバーを使用しているユーザーを対象としています。
    
    プロキシサーバーを使用していない場合は、このセットアップ手順をスキップしてください。

Wallarm nodeがご利用のプロキシサーバーを使用できるよう、使用するプロキシサーバーを定義する環境変数に新しい値を設定します。

`/etc/environment`ファイルに環境変数の新しい値を追加します:
*   `https_proxy`を追加して、httpsプロトコルのプロキシを定義します。
*   `http_proxy`を追加して、httpプロトコルのプロキシを定義します。
*   `no_proxy`を追加して、プロキシを使用しないリソースの一覧を定義します。

`https_proxy`および`http_proxy`変数には、`<scheme>://<proxy_user>:<proxy_pass>@<host>:<port>`という文字列値を設定します。
* `<scheme>`は使用するプロトコルを定義します。設定する環境変数が対象とするプロトコルと一致している必要があります。
* `<proxy_user>`はプロキシ認証のユーザー名を定義します。
* `<proxy_pass>`はプロキシ認証のパスワードを定義します。
* `<host>`はプロキシサーバーのホスト名を定義します。
* `<port>`はプロキシサーバーのポートを定義します。

プロキシを使用しないリソースの一覧を定義するため、`no_proxy`変数には`"<res_1>, <res_2>, <res_3>, <res_4>, ..."`という配列値を設定します。ここで`<res_1>`、`<res_2>`、`<res_3>`、`<res_4>`はIPアドレスやドメインです。この配列はIPアドレスおよび/またはドメインで構成します。

!!! warning "プロキシを介さずにアクセスする必要があるリソース"
    システムが正しく動作するよう、プロキシを介さずにアクセスすべきリソースの一覧に次のIPアドレスおよびドメインを追加してください: `127.0.0.1`、`127.0.0.8`、`127.0.0.9`、`localhost`。
    `127.0.0.8`および`127.0.0.9`のIPアドレスはWallarm filtering nodeの動作に使用されます。

以下は正しい`/etc/environment`ファイル内容の例で、次の設定を示しています:
*   HTTPSおよびHTTPのリクエストは、プロキシサーバーでの認証に`admin`というユーザー名と`01234`というパスワードを使用し、`1.2.3.4`ホストの`1234`ポートへプロキシされます。
*   `127.0.0.1`、`127.0.0.8`、`127.0.0.9`、`localhost`宛てのリクエストはプロキシ対象外です。

```
https_proxy=http://admin:01234@1.2.3.4:1234
http_proxy=http://admin:01234@1.2.3.4:1234
no_proxy="127.0.0.1, 127.0.0.8, 127.0.0.9, localhost"
```