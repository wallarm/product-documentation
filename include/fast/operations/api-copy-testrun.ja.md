[doc-inactivity-timeout]: internals.md#test-run

| APIコール: | `POST /v1/test_run` |      |
| ------------ | ------------------- | ---- |
| 認証: | 必要 | トークンによって提供されます |
| トークン付きのHTTPヘッダー: | `X-WallarmAPI-Token` | トークンの値をAPIサーバーに渡すために使用されます |
| パラメータ: | `name` **(必須)** | テスト実行の名前 |
| | `test_record_id` **(必須)** | 既存のテストレコードの識別子 |
|  | `desc` | テスト実行の詳細な説明<br>デフォルト値：空文字列 |
|  | `file_extensions_to_exclude` | テスト中の評価プロセスから除外する必要のある特定のファイルタイプを指定するためのこのパラメータ。<br>これらのファイルタイプは正規表現によって指定されます。<br>たとえば、`ico` ファイル拡張子を除外すると設定した場合、`GET /favicon.ico` ベースラインリクエストはFASTによってチェックされず、スキップされます。<br>正規表現は次の形式を持ちます：<br>- `.`: 任意の数（ゼロまたはそれ以上）の任意の文字<br>- `x*`: `x` 文字の任意の数（ゼロまたはそれ以上）<br>- `x?`: 単一の `x` 文字（またはなし）<br>- 任意の単一のファイル拡張子（例：`jpg`）<br>- 縦棒で区切られた複数の拡張子（例：`jpg` &#124; `png`）<br>デフォルト値：空文字列（FASTは任意のファイル拡張子を持つベースラインリクエストをチェックします）。 | 
|  | `policy_id` | テストポリシーの識別子。<br>このパラメータが欠けている場合、デフォルトのポリシーが実行されます |
|  | `stop_on_first_fail` | これは、脆弱性が検出されたときのFASTの動作を指定するパラメータです：<br>`true`: 最初に検出された脆弱性でテストの実行を停止します。<br>`false`: 脆弱性の検出の有無にかかわらず、すべてのベースラインリクエストを処理します。<br>デフォルト値：`false` |
|  | `rps_per_baseline` | このパラメータは、ターゲットアプリケーションに送信されるテストリクエストの数（*RPS*、*requests per second*）の上限を指定します（たとえば、1つのベースラインリクエストから派生した100のテストリクエストがあるかもしれません）。<br>上限はテスト実行のベースラインリクエストごとに設定されます（つまり、個々のベースラインリクエストに対して秒間に`N`回以上のテストリクエストが送信されることはありません）。<br>最小値：`1`。<br>最大値：`500`。<br>デフォルト値：`null`（RPSは無制限） |
|  | `rps` | 上述したパラメータと同様のものですが、テスト実行全体に対するRPSをグローバルに制限し、ベースラインリクエストごとではないという点で異なります。<br>つまり、テストリクエスト全体の数は、テスト実行中に記録されたベースラインリクエストの数にかかわらず、指定された値を超えてはなりません。<br>最小値：`1`。<br>最大値：`1000`。<br>デフォルト値：`null`（RPSは無制限） |

**リクエストの例：**

```
curl --request POST \
  --url https://us1.api.wallarm.com/v1/test_run \
  --header 'Content-Type: application/json' \
  --header 'Host: us1.api.wallarm.com' \
  --header 'X-WallarmAPI-Token: token_Qwe12345' \
  --data '{
    "name":"demo-testrun",
    "test_record_id":"rec_0001"
}'
```

**レスポンスの例：テストランのコピーが進行中**

```
{
  "status": 200,
  "body": {
    "id": tr_1234,
    "name": "demo-testrun",
    ...
    "state": "cloning",
    ...
    "test_record_id": "rec_0001",
    ...
}
```

`cloning` 状態は、ベースラインリクエストが元のテスト実行からそのコピー（`tr_1234` 識別子付きのテスト実行）にクローンされていることを意味します。

**レスポンスの例：テストランのコピーに失敗**

```
{
  "status": 400,
  "body": {
    "test_record_id": {
      "error": "not_ready_for_cloning",
      "value": "rec_0001"
    }
  }
}
```

`not_ready_for_cloning` エラーは、元のテストラン（`rec_0001`識別子付きのテストレコードを含む）で記録プロセスがアクティブであるため、元のテストランからクローンにベースラインリクエストをクローンすることができないことを意味します。