Environment variable | Description| Required
--- | ---- | ----
`WALLARM_API_TOKEN` | Wallarm node or API token. | Yes
`WALLARM_LABELS` | <p>Available starting from node 4.6. Works only if `WALLARM_API_TOKEN` is set to [API token][api-token] with the `Deploy` role. Sets the `group` label for node instance grouping, for example:</p> <p>`WALLARM_LABELS="group=<GROUP>"`</p> <p>...will place node instance into the `<GROUP>` instance group (existing, or, if does not exist, it will be created).</p> | Yes (for API tokens)
`NGINX_BACKEND` | Domain or IP address of the resource to protect with the Wallarm solution. | Yes
`WALLARM_API_HOST` | Wallarm API server:<ul><li>`us1.api.wallarm.com` for the US Cloud</li><li>`api.wallarm.com` for the EU Cloud</li></ul>By default: `api.wallarm.com`. | No
`WALLARM_MODE` | Node mode:<ul><li>`block` to block malicious requests</li><li>`safe_blocking` to block only those malicious requests originated from [graylisted IP addresses][graylist-docs]</li><li>`monitoring` to analyze but not block requests</li><li>`off` to disable traffic analyzing and processing</li></ul>By default: `monitoring`.<br>[Detailed description of filtration modes →][filtration-modes-docs] | No
`WALLARM_APPLICATION` | Unique identifier of the protected application to be used in the Wallarm Cloud. The value can be a positive integer except for `0`.<br><br>Default value (if the variable is not passed to the container) is `-1` which indicates the **default** application displayed in Wallarm Console → **Settings** → **Application**.<br><br>[More details on setting up applications →][application-configuration] | No
`SLAB_ALLOC_ARENA` (`TARANTOOL_MEMORY_GB` [NGINX Node 5.x and earlier][what-is-new-wstore]) | [Amount of memory][allocating-memory-guide] allocated to wstore. The value can be a float (a dot <code>.</code> is a decimal separator). By default: 1.0 (1 gygabyte).<br>Note that when passing this variable in Docker `run` command with the `-e`, the variable is not recorded in any configuration file within the container, but it is still used when `wstore` starts. | No
`NGINX_PORT` | Sets a port that NGINX will use inside the Docker container.<br><br>Starting from the Docker image `4.0.2-1`, the [`wallarm-status`][node-status-docs] service automatically runs on the same port as NGINX.<br><br>Default value (if the variable is not passed to the container) is `80`.<br><br>Syntax is `NGINX_PORT='443'`. | No
<a name="wallarm-status-allow-env-var"></a>`WALLARM_STATUS_ALLOW` | Custom CIDRs that are allowed to access the [`/wallarm-status` endpoint][node-status-docs] from outside the Docker container. Example value: `10.0.0.0/8`. If you need to pass several values, use a comma `,` as a separator. To access the service externally, use the Docker container's IP, specifying the `/wallarm-status` endpoint path. | No
`DISABLE_IPV6`| The variable with any value except for an empty one deletes the `listen [::]:80 default_server ipv6only=on;` line from the NGINX configuration file which will stop NGINX from IPv6 connection processing.<br><br>If the variable is not specified explicitly or has an empty value `""`, NGINX processes both IPv6 and IPv4 connections. | No
`WALLARM_APIFW_ENABLE` | This setting toggles [API Specification Enforcement][api-policy-enf-docs] on or off, available from release 4.10 onwards. Please note that activating this feature does not substitute for the required subscription and configuration through the Wallarm Console UI.<br><br>Its default value is `true`, enabling the functionality. | No
`WALLARM_APID_ONLY` (5.3.7 and higher) | In this mode, attacks detected in your traffic are blocked locally by the node (if [enabled][filtration-modes]) but not exported to Wallarm Cloud. Meanwhile, [API Discovery][api-discovery-docs] and some other features remain fully functional, detecting your API inventory and uploading it to the Cloud for visualization. This mode is for those who want to review their API inventory and identify sensitive data first, and plan controlled attack data export accordingly. However, disabling attack export is rare, as Wallarm securely processes attack data and provides [sensitive attack data masking][sensitive-data-rule] if needed. [More details][apid-only-mode-details]<br>By default: `false`. | No
`APIFW_METRICS_ENABLED` (6.4.1 and higher) | Enables Prometheus metrics for the API Specification Enforcement module.<br>By default: `false` (disabled). | No
`APIFW_METRICS_HOST` (6.4.1 and higher) | Defines the host and port on which the API Specification Enforcement exposes metrics.<br>By default: `:9010`. | No
`APIFW_METRICS_ENDPOINT_NAME` (6.4.1 and higher) | Defines the HTTP path of the API Specification Enforcement metrics endpoint<br>By default: `metrics`. | No
`WALLARM_WSTORE__METRICS__LISTEN_ADDRESS` | Defines the host and port on which Postanalytics and general system metrics are exposed.<br>By default: `http://localhost:9001/metrics`. | No 
`WALLARM_WSTORE__SERVICE__PROTOCOL` (6.6.0 and higher) | Specifies the protocol family that **wstore** uses for incoming connections. Possible values:<ul><li>`"tcp"` - dual-stack mode (listens on both IPv4 and IPv6)</li><li>`"tcp4"` - IPv4 only</li><li>`"tcp6"` - IPv6 only</li></ul>By default: `"tcp4"`. | No
