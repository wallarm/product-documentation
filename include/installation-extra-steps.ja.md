##  追加設定

フィルタリングノードは、インストール後に追加の設定が必要になる場合があります。

以下のドキュメントでは、必要に応じて適用できる典型的なセットアップのいくつかを紹介しています。

他の利用可能な設定について詳しく知りたい場合は、[管理者ガイド](admin-intro-en.ja.md)の**設定**セクションに進んでください。

### クライアントの実IPの表示を設定する

フィルタリングノードがプロキシサーバーまたはロードバランサーの背後に配置されていて、追加の設定がない場合、リクエストのソースアドレスが実際のクライアントのIPアドレスと一致しない場合があります。代わりに、プロキシサーバーまたはロードバランサーのIPアドレスのいずれかと同じになる可能性があります。

この場合、フィルタリングノードがリクエストのソースアドレスとしてクライアントのIPアドレスを受け取るようにしたい場合は、プロキシサーバーまたはロードバランサーの[追加設定](using-proxy-or-balancer-en.ja.md)を行う必要があります。

### シングルリクエスト処理時間の制限

[`wallarm_process_time_limit`](configure-parameters-en.ja.md#wallarm_process_time_limit) Wallarmディレクティブを使用して、フィルタリングノードによるシングルリクエストの処理にかかる時間の制限を指定します。

リクエストの処理に指定された時間よりも多くの時間がかかる場合、エラー情報がログファイルに記録され、リクエストは`overlimit_res`アタックとしてマークされます。

### サーバー応答待ち時間の制限

[`proxy_read_timeout`](https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout) NGINXディレクティブを使用して、プロキシサーバー応答の読み取り待ち時間を指定します。

サーバーがこの時間内に何も送信しない場合、接続が閉じられます。

### 最大リクエストサイズの制限

[`client_max_body_size`](https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size) NGINXディレクティブを使用して、クライアントのリクエストの本文の最大サイズの制限を指定します。

この制限を超えると、NGINXはクライアントに`413`（`Payload Too Large`）コード、いわゆる`Request Entity Too Large`メッセージを返します。