## المتطلبات

* حساب في GCP
* الوصول إلى الحساب بدور **المدير**وتعطيل المصادقة ثُنائية العوامل في واجهة Wallarm Console لـ[السحاب الأمريكي](https://us1.my.wallarm.com/) أو [السحاب الأوروبي](https://my.wallarm.com/)
* الوصول إلى `https://us1.api.wallarm.com:444`للعمل مع Wallarm Cloud الأمريكي أو إلى `https://api.wallarm.com:444`للعمل مع Wallarm Cloud الأوروبي. إذا كان يمكن تكوين الوصول عبر خادم الوكيل فقط، فاستخدم [التعليمات][wallarm-api-via-proxy]
* تنفيذ كافة الأوامر على نموذج Wallarm كمستخدم فائق الصلاحيات (مثل `root`)

## 1. إطلاق نموذج عقدة التصفية

### إطلاق النموذج عبر واجهة Google Cloud

لإطلاق نموذج عقدة التصفية عبر واجهة Google Cloud، يُرجى فتح [صورة عقدة Wallarm في سوق Google Cloud](https://console.cloud.google.com/launcher/details/wallarm-node-195710/wallarm-node) والنقر على **بدء الاستخدام**.

سيتم إطلاق النموذج مع عقدة التصفية المثبتة مسبقًا. للبحث في المعلومات التفصيلية حول إطلاق النماذج في Google Cloud، يُرجى المتابعة إلى [وثائق منصة Google Cloud الرسمية][link-launch-instance].

### إطلاق النموذج عبر Terraform أو أدوات أخرى

عند استخدام أداة مثل Terraform لإطلاق نموذج عقدة التصفية باستخدام صورة Wallarm GCP، قد يتطلب منك تقديم اسم هذه الصورة في تكوين Terraform.

* يكون اسم الصورة وفقًا للتنسيق التالي:

    ```bash
    wallarm-node-195710/wallarm-node-<إصدار الصورة>-build
    ```
* لإطلاق النموذج بإصدار عقدة التصفية 4.8، يُرجى استخدام اسم الصورة التالي:

    ```bash
    wallarm-node-195710/wallarm-node-4-8-20231019-221905
    ```

للحصول على اسم الصورة، يمكنك أيضًا اتباع الخطوات التالية:

1. تثبيت [Google Cloud SDK](https://cloud.google.com/sdk/docs/install).
2. تنفيذ الأمر [`gcloud compute images list`](https://cloud.google.com/sdk/gcloud/reference/compute/images/list) بالمعلمات التالية:

    ```bash
    gcloud compute images list --project wallarm-node-195710 --filter="name~'wallarm-node-4-8-*'" --no-standard-images
    ```
3. نسخ قيمة الإصدار من اسم أحدث صورة متاحة ولصق القيمة المنسوخة في تنسيق اسم الصورة المُقدم. على سبيل المثال، سيكون لإصدار عقدة التصفية 4.8 الاسم التالي:

    ```bash
    wallarm-node-195710/wallarm-node-4-8-20231019-221905
    ```

## 2. تكوين نموذج عقدة التصفية

قُم بالأعمال التالية لتكوين نموذج عقدة التصفية المُطلق:

1.  التوجه إلى صفحة **نماذج VM** في قسم **خدمة الحوسبة** من القائمة.
2.  تحديد نموذج عقدة التصفية المُطلق والنقر على زر **تعديل**.
3.  تمكين أنواع حركة المرور الواردة المطلوبة من خلال وضع علامات في المربعات المناسبة في إعداد **جدران الحماية**.
4.  إذا لزم الأمر، يمكنك تقييد الاتصال بالنموذج باستخدام مفاتيح SSH الخاصة بالمشروع واستخدام زوج مفاتيح SSH مخصص للاتصال بهذا النموذج. للقيام بذلك، قُم بالأعمال التالية:
    1.  وضع علامة في مربع **حظر على مستوى المشروع** في إعداد **مفاتيح SSH**.
    2.  النقر على زر **إظهار وتعديل** في إعداد **مفاتيح SSH** لتوسيع الحقل الخاص بإدخال مفتاح SSH.
    3.  توليد زوج من مفاتيح SSH العامة والخاصة. على سبيل المثال، يمكنك استخدام أدوات `ssh-keygen` و`PuTTYgen`.
       
        ![توليد مفاتيح SSH باستخدام PuTTYgen][img-ssh-key-generation]

    4.  نسخ مفتاح العام بتنسيق OpenSSH من واجهة مولد المفاتيح المستخدم (في المثال الحالي، يجب نسخ المفتاح العام من منطقة **مفتاح عام للصق في ملف OpenSSH authorized_keys** من واجهة PuTTYgen) ولصقه في الحقل الذي يحتوي على تلميح **أدخل بيانات المفتاح كاملة**.
    5.  حفظ المفتاح الخاص. سيكون مطلوبًا للاتصال بالنموذج المُكوَّن في المستقبل.
5.  النقر على زر **حفظ** في أسفل الصفحة لتطبيق التغييرات.

## 3. الاتصال بنموذج عقدة التصفية عبر SSH

للبحث في المعلومات التفصيلية حول طرق الاتصال بالنماذج، يُرجى المتابعة إلى هذا [الرابط](https://cloud.google.com/compute/docs/instances/connecting-to-instance).

--8<-- "../include/gcp-autoscaling-connect-ssh.md"

## 4. ربط عقدة التصفية ب Wallarm Cloud

--8<-- "../include/waf/installation/connect-waf-and-cloud-4.6-only-with-postanalytics.md"