## إعدادات إضافية

قد تتطلب عقدة التصفية بعض التكوينات الإضافية بعد التثبيت.

يُدرج الوثيقة أدناه بعض الإعدادات النموذجية التي يمكنك تطبيقها عند الحاجة.

للحصول على مزيد من المعلومات حول الإعدادات الأخرى المتاحة، انتقل إلى قسم **التكوين** في [دليل المسؤول](admin-intro-en.md).

### تكوين عرض العنوان الحقيقي للعميل

إذا كانت عقدة التصفية مُنشرة خلف خادم وكيل أو موزع الأحمال دون أي تكوين إضافي، فقد لا يكون عنوان مصدر الطلب مساويًا لعنوان IP الفعلي للعميل. بدلاً من ذلك، قد يكون مُساويًا لأحد عناوين IP الخاصة بخادم الوكيل أو موزع الأحمال.

في هذه الحالة، إذا كنت ترغب في أن تتلقى عقدة التصفية عنوان IP الخاص بالعميل كعنوان مصدر للطلب، تحتاج إلى إجراء [تكوين إضافي](using-proxy-or-balancer-en.md) لخادم الوكيل أو موزع الأحمال.

### إضافة عناوين ماسح Wallarm إلى القائمة البيضاء

يقوم ماسح Wallarm بفحص موارد شركتك بحثًا عن الثغرات الأمنية. يُجرى الفحص باستخدام عناوين IP من إحدى القوائم التالية (حسب نوع سحابة Wallarm التي تستخدمها):

* [عناوين ماسح الولايات المتحدة لمستخدمي سحابة الولايات المتحدة](scanner-address-us-cloud.md)
* [عناوين ماسح الاتحاد الأوروبي لمستخدمي سحابة الاتحاد الأوروبي](scanner-address-eu-cloud.md)

إذا كنت تستخدم ماسح Wallarm، فأنت بحاجة إلى تكوين القوائم البيضاء في برمجيات أمان نطاق شبكتك (مثل جدران الحماية، وأنظمة الكشف عن التسلل، إلخ) لتحتوي على عناوين IP لماسح Wallarm.

على سبيل المثال، يتم وضع عقدة تصفية Wallarm بإعدادات افتراضية في وضع الحظر، مما يجعل ماسح Wallarm غير قادر على فحص الموارد خلف عقدة التصفية.

لجعل الماسح يعمل مرة أخرى، [أضف عناوين IP للماسح إلى القائمة البيضاء](scanner-ips-allowlisting.md) على هذه عقدة التصفية.

### تحديد وقت معالجة الطلب الواحد

استخدم توجيه Wallarm [`wallarm_process_time_limit`](configure-parameters-en.md#wallarm_process_time_limit) لتحديد الحد الأقصى لمدة معالجة طلب واحد بواسطة عقدة التصفية.

إذا استهلكت معالجة الطلب وقتًا أكثر مما هو محدد في التوجيه، يتم إدخال معلومات حول الخطأ في ملف السجل ويُعلم الطلب كهجوم `overlimit_res`.

### تحديد وقت انتظار رد الخادم

استخدم توجيه NGINX [`proxy_read_timeout`](https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout) لتحديد المهلة الزمنية لقراءة رد خادم الوكيل.

إذا لم يرسل الخادم شيئًا خلال هذا الوقت، يتم إغلاق الاتصال.

### تحديد الحجم الأقصى لطلب العميل

استخدم توجيه NGINX [`client_max_body_size`](https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size) لتحديد الحد الأقصى لحجم جسم طلب العميل.

إذا تجاوز هذا الحد، يرد NGINX على العميل بالرمز `413` (`Payload Too Large`)، المعروف أيضًا باسم رسالة `Request Entity Too Large`.