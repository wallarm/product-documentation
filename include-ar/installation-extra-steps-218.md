## إعدادات إضافية

قد يحتاج عقد التصفية إلى بعض الإعدادات الإضافية بعد التثبيت.

المستند أدناه يُدرج بعض الإعدادات النمطية التي يمكن تطبيقها إذا لزم الأمر.

للحصول على مزيد من المعلومات حول الإعدادات المتاحة الأخرى، يُرجى الانتقال إلى قسم **التكوين** في [دليل الإداري](admin-intro-en.md).

### تكوين عرض الـ IP الحقيقي للعميل

إذا تم نشر عقد التصفية خلف خادم وكيل أو موازنة الحمل دون أي تكوين إضافي، قد لا يكون عنوان مصدر الطلب مُساويًا لعنوان IP الفعلي للعميل. بدلًا من ذلك، قد يكون مُساويًا لأحد عناوين IP الخاصة بخادم الوكيل أو موازنة الحمل.

في هذه الحالة، إذا أردت أن يستقبل عقد التصفية عنوان IP للعميل كعنوان مصدر للطلب، ستحتاج إلى إجراء [تكوين إضافي](using-proxy-or-balancer-en.md) لخادم الوكيل أو موازنة الحمل.

### إضافة عناوين ماسح Wallarm إلى قائمة السماح

يقوم ماسح Wallarm بفحص موارد شركتك بحثًا عن الثغرات الأمنية. يتم إجراء الفحص باستخدام عناوين IP من إحدى القائمتين التاليتين (بناءً على نوع سحابة Wallarm التي تستخدمها):

* [عناوين الماسح الأمريكية لمستخدمي سحابة الولايات المتحدة](scanner-address-us-cloud.md)
* [عناوين الماسح الأوروبية لمستخدمي سحابة الاتحاد الأوروبي](scanner-address-eu-cloud.md)

إذا كنت تستخدم ماسح Wallarm، ستحتاج إلى تكوين قوائم السماح في برمجيات أمان نطاق الشبكة لديك (مثل جدران الحماية، أنظمة الكشف عن التسللات، إلخ) لتحتوي عناوين IP لماسح Wallarm.

على سبيل المثال، يتم وضع عقدة فلترة Wallarm بالإعدادات الافتراضية في وضع الحجب، مما يجعل ماسح Wallarm غير قادر على فحص الموارد خلف عقدة الفلترة.

لجعل الماسح يعمل مرة أخرى، [قم بإضافة عناوين IP للماسح إلى قائمة السماح](scanner-ips-allowlisting.md) على هذه عقدة الفلترة.

### تحديد وقت معالجة الطلب الفردي

استخدم توجيه Wallarm [`wallarm_process_time_limit`](configure-parameters-en.md#wallarm_process_time_limit) لتحديد الحد الأقصى لمدة معالجة طلب فردي بواسطة عقدة التصفية.

إذا استغرقت معالجة الطلب وقتًا أطول مما هو مُحدد في التوجيه، تُدخل معلومات الخطأ في ملف السجل ويُميز الطلب كهجوم `overlimit_res`.

### تحديد وقت انتظار رد الخادم

استخدم توجيه NGINX [`proxy_read_timeout`](https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout) لتحديد مهلة قراءة رد خادم الوكيل.

إذا لم يرسل الخادم شيئًا خلال هذا الوقت، يُغلق الاتصال.

### تحديد الحجم الأقصى للطلب

استخدم توجيه NGINX [`client_max_body_size`](https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size) لتحديد حد الحجم الأقصى لجسم طلب العميل.

إذا تم تجاوز هذا الحد، يرد NGINX على العميل بالكود `413` (`Payload Too Large`)، المعروف أيضًا باسم رسالة `Request Entity Too Large`.